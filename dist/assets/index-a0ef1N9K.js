var hE=Object.defineProperty;var pE=(i,e,n)=>e in i?hE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var He=(i,e,n)=>pE(i,typeof e!="symbol"?e+"":e,n);function mE(i,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in i)){const l=Object.getOwnPropertyDescriptor(o,a);l&&Object.defineProperty(i,a,l.get?l:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Gc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function gE(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var a=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return i[o]}})}),n}var Zu={exports:{}},Do={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function yE(){if(rm)return Do;rm=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:o,key:c,ref:a!==void 0?a:null,props:l}}return Do.Fragment=e,Do.jsx=n,Do.jsxs=n,Do}var am;function vE(){return am||(am=1,Zu.exports=yE()),Zu.exports}var T=vE(),ec={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function _E(){if(lm)return ve;lm=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function q(M,K,ie){this.props=M,this.context=K,this.refs=b,this.updater=ie||C}q.prototype.isReactComponent={},q.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},q.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function B(){}B.prototype=q.prototype;function D(M,K,ie){this.props=M,this.context=K,this.refs=b,this.updater=ie||C}var $=D.prototype=new B;$.constructor=D,x($,q.prototype),$.isPureReactComponent=!0;var X=Array.isArray;function ee(){}var J={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function N(M,K,ie){var re=ie.ref;return{$$typeof:i,type:M,key:K,ref:re!==void 0?re:null,props:ie}}function j(M,K){return N(M.type,K,M.props)}function ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function te(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return K[ie]})}var ce=/\/+/g;function me(M,K){return typeof M=="object"&&M!==null&&M.key!=null?te(""+M.key):K.toString(36)}function de(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ee,ee):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function U(M,K,ie,re,Ee){var we=typeof M;(we==="undefined"||we==="boolean")&&(M=null);var Ue=!1;if(M===null)Ue=!0;else switch(we){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(M.$$typeof){case i:case e:Ue=!0;break;case v:return Ue=M._init,U(Ue(M._payload),K,ie,re,Ee)}}if(Ue)return Ee=Ee(M),Ue=re===""?"."+me(M,0):re,X(Ee)?(ie="",Ue!=null&&(ie=Ue.replace(ce,"$&/")+"/"),U(Ee,K,ie,"",function(qs){return qs})):Ee!=null&&(ne(Ee)&&(Ee=j(Ee,ie+(Ee.key==null||M&&M.key===Ee.key?"":(""+Ee.key).replace(ce,"$&/")+"/")+Ue)),K.push(Ee)),1;Ue=0;var vt=re===""?".":re+":";if(X(M))for(var Qe=0;Qe<M.length;Qe++)re=M[Qe],we=vt+me(re,Qe),Ue+=U(re,K,ie,we,Ee);else if(Qe=w(M),typeof Qe=="function")for(M=Qe.call(M),Qe=0;!(re=M.next()).done;)re=re.value,we=vt+me(re,Qe++),Ue+=U(re,K,ie,we,Ee);else if(we==="object"){if(typeof M.then=="function")return U(de(M),K,ie,re,Ee);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function G(M,K,ie){if(M==null)return M;var re=[],Ee=0;return U(M,re,"","",function(we){return K.call(ie,we,Ee++)}),re}function Y(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var Z=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ye={map:G,forEach:function(M,K,ie){G(M,function(){K.apply(this,arguments)},ie)},count:function(M){var K=0;return G(M,function(){K++}),K},toArray:function(M){return G(M,function(K){return K})||[]},only:function(M){if(!ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ve.Activity=_,ve.Children=ye,ve.Component=q,ve.Fragment=n,ve.Profiler=a,ve.PureComponent=D,ve.StrictMode=o,ve.Suspense=p,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,ve.__COMPILER_RUNTIME={__proto__:null,c:function(M){return J.H.useMemoCache(M)}},ve.cache=function(M){return function(){return M.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(M,K,ie){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=x({},M.props),Ee=M.key;if(K!=null)for(we in K.key!==void 0&&(Ee=""+K.key),K)!z.call(K,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&K.ref===void 0||(re[we]=K[we]);var we=arguments.length-2;if(we===1)re.children=ie;else if(1<we){for(var Ue=Array(we),vt=0;vt<we;vt++)Ue[vt]=arguments[vt+2];re.children=Ue}return N(M.type,Ee,re)},ve.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},ve.createElement=function(M,K,ie){var re,Ee={},we=null;if(K!=null)for(re in K.key!==void 0&&(we=""+K.key),K)z.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Ee[re]=K[re]);var Ue=arguments.length-2;if(Ue===1)Ee.children=ie;else if(1<Ue){for(var vt=Array(Ue),Qe=0;Qe<Ue;Qe++)vt[Qe]=arguments[Qe+2];Ee.children=vt}if(M&&M.defaultProps)for(re in Ue=M.defaultProps,Ue)Ee[re]===void 0&&(Ee[re]=Ue[re]);return N(M,we,Ee)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(M){return{$$typeof:f,render:M}},ve.isValidElement=ne,ve.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:Y}},ve.memo=function(M,K){return{$$typeof:m,type:M,compare:K===void 0?null:K}},ve.startTransition=function(M){var K=J.T,ie={};J.T=ie;try{var re=M(),Ee=J.S;Ee!==null&&Ee(ie,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ee,Z)}catch(we){Z(we)}finally{K!==null&&ie.types!==null&&(K.types=ie.types),J.T=K}},ve.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},ve.use=function(M){return J.H.use(M)},ve.useActionState=function(M,K,ie){return J.H.useActionState(M,K,ie)},ve.useCallback=function(M,K){return J.H.useCallback(M,K)},ve.useContext=function(M){return J.H.useContext(M)},ve.useDebugValue=function(){},ve.useDeferredValue=function(M,K){return J.H.useDeferredValue(M,K)},ve.useEffect=function(M,K){return J.H.useEffect(M,K)},ve.useEffectEvent=function(M){return J.H.useEffectEvent(M)},ve.useId=function(){return J.H.useId()},ve.useImperativeHandle=function(M,K,ie){return J.H.useImperativeHandle(M,K,ie)},ve.useInsertionEffect=function(M,K){return J.H.useInsertionEffect(M,K)},ve.useLayoutEffect=function(M,K){return J.H.useLayoutEffect(M,K)},ve.useMemo=function(M,K){return J.H.useMemo(M,K)},ve.useOptimistic=function(M,K){return J.H.useOptimistic(M,K)},ve.useReducer=function(M,K,ie){return J.H.useReducer(M,K,ie)},ve.useRef=function(M){return J.H.useRef(M)},ve.useState=function(M){return J.H.useState(M)},ve.useSyncExternalStore=function(M,K,ie){return J.H.useSyncExternalStore(M,K,ie)},ve.useTransition=function(){return J.H.useTransition()},ve.version="19.2.0",ve}var um;function Bc(){return um||(um=1,ec.exports=_E()),ec.exports}var ae=Bc();const EE=Gc(ae);var tc={exports:{}},Po={},nc={exports:{}},ic={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm;function SE(){return cm||(cm=1,(function(i){function e(U,G){var Y=U.length;U.push(G);e:for(;0<Y;){var Z=Y-1>>>1,ye=U[Z];if(0<a(ye,G))U[Z]=G,U[Y]=ye,Y=Z;else break e}}function n(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var G=U[0],Y=U.pop();if(Y!==G){U[0]=Y;e:for(var Z=0,ye=U.length,M=ye>>>1;Z<M;){var K=2*(Z+1)-1,ie=U[K],re=K+1,Ee=U[re];if(0>a(ie,Y))re<ye&&0>a(Ee,ie)?(U[Z]=Ee,U[re]=Y,Z=re):(U[Z]=ie,U[K]=Y,Z=K);else if(re<ye&&0>a(Ee,Y))U[Z]=Ee,U[re]=Y,Z=re;else break e}}return G}function a(U,G){var Y=U.sortIndex-G.sortIndex;return Y!==0?Y:U.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,_=null,E=3,w=!1,C=!1,x=!1,b=!1,q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function $(U){for(var G=n(m);G!==null;){if(G.callback===null)o(m);else if(G.startTime<=U)o(m),G.sortIndex=G.expirationTime,e(p,G);else break;G=n(m)}}function X(U){if(x=!1,$(U),!C)if(n(p)!==null)C=!0,ee||(ee=!0,te());else{var G=n(m);G!==null&&de(X,G.startTime-U)}}var ee=!1,J=-1,z=5,N=-1;function j(){return b?!0:!(i.unstable_now()-N<z)}function ne(){if(b=!1,ee){var U=i.unstable_now();N=U;var G=!0;try{e:{C=!1,x&&(x=!1,B(J),J=-1),w=!0;var Y=E;try{t:{for($(U),_=n(p);_!==null&&!(_.expirationTime>U&&j());){var Z=_.callback;if(typeof Z=="function"){_.callback=null,E=_.priorityLevel;var ye=Z(_.expirationTime<=U);if(U=i.unstable_now(),typeof ye=="function"){_.callback=ye,$(U),G=!0;break t}_===n(p)&&o(p),$(U)}else o(p);_=n(p)}if(_!==null)G=!0;else{var M=n(m);M!==null&&de(X,M.startTime-U),G=!1}}break e}finally{_=null,E=Y,w=!1}G=void 0}}finally{G?te():ee=!1}}}var te;if(typeof D=="function")te=function(){D(ne)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,me=ce.port2;ce.port1.onmessage=ne,te=function(){me.postMessage(null)}}else te=function(){q(ne,0)};function de(U,G){J=q(function(){U(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(U){switch(E){case 1:case 2:case 3:var G=3;break;default:G=E}var Y=E;E=G;try{return U()}finally{E=Y}},i.unstable_requestPaint=function(){b=!0},i.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=E;E=U;try{return G()}finally{E=Y}},i.unstable_scheduleCallback=function(U,G,Y){var Z=i.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,U){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Y+ye,U={id:v++,callback:G,priorityLevel:U,startTime:Y,expirationTime:ye,sortIndex:-1},Y>Z?(U.sortIndex=Y,e(m,U),n(p)===null&&U===n(m)&&(x?(B(J),J=-1):x=!0,de(X,Y-Z))):(U.sortIndex=ye,e(p,U),C||w||(C=!0,ee||(ee=!0,te()))),U},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(U){var G=E;return function(){var Y=E;E=G;try{return U.apply(this,arguments)}finally{E=Y}}}})(ic)),ic}var dm;function TE(){return dm||(dm=1,nc.exports=SE()),nc.exports}var sc={exports:{}},mt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function wE(){if(fm)return mt;fm=1;var i=Bc();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,mt.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},mt.flushSync=function(p){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=m,o.p=v,o.d.f()}},mt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(p,m))},mt.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},mt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:w}):v==="script"&&o.d.X(p,{crossOrigin:_,integrity:E,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},mt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);o.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(p)},mt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin);o.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},mt.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);o.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(p)},mt.requestFormReset=function(p){o.d.r(p)},mt.unstable_batchedUpdates=function(p,m){return p(m)},mt.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},mt.useFormStatus=function(){return c.H.useHostTransitionStatus()},mt.version="19.2.0",mt}var hm;function AE(){if(hm)return sc.exports;hm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),sc.exports=wE(),sc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function CE(){if(pm)return Po;pm=1;var i=TE(),e=Bc(),n=AE();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function c(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function f(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(l(t)!==t)throw Error(o(188))}function m(t){var s=t.alternate;if(!s){if(s=l(t),s===null)throw Error(o(188));return s!==t?null:t}for(var r=t,u=s;;){var g=r.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){r=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===r)return p(g),t;if(y===u)return p(g),s;y=y.sibling}throw Error(o(188))}if(r.return!==u.return)r=g,u=y;else{for(var S=!1,A=g.child;A;){if(A===r){S=!0,r=g,u=y;break}if(A===u){S=!0,u=g,r=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===r){S=!0,r=y,u=g;break}if(A===u){S=!0,u=y,r=g;break}A=A.sibling}if(!S)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Symbol.for("react.client.reference");function me(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case q:return"Profiler";case b:return"StrictMode";case X:return"Suspense";case ee:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case D:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case $:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return s=t.displayName||null,s!==null?s:me(t.type)||"Memo";case z:s=t._payload,t=t._init;try{return me(t(s))}catch{}}return null}var de=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Z=[],ye=-1;function M(t){return{current:t}}function K(t){0>ye||(t.current=Z[ye],Z[ye]=null,ye--)}function ie(t,s){ye++,Z[ye]=t.current,t.current=s}var re=M(null),Ee=M(null),we=M(null),Ue=M(null);function vt(t,s){switch(ie(we,s),ie(Ee,t),ie(re,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Np(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Np(s),t=Ip(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(re),ie(re,t)}function Qe(){K(re),K(Ee),K(we)}function qs(t){t.memoizedState!==null&&ie(Ue,t);var s=re.current,r=Ip(s,t.type);s!==r&&(ie(Ee,t),ie(re,r))}function zo(t){Ee.current===t&&(K(re),K(Ee)),Ue.current===t&&(K(Ue),xo._currentValue=Y)}var Oa,sd;function ai(t){if(Oa===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Oa=s&&s[1]||"",sd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oa+t+sd}var ka=!1;function La(t,s){if(!t||ka)return"";ka=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(H){var L=H}Reflect.construct(t,[],Q)}else{try{Q.call()}catch(H){L=H}t.call(Q.prototype)}}else{try{throw Error()}catch(H){L=H}(Q=t())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(H){if(H&&L&&typeof H.stack=="string")return[H.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var R=S.split(`
`),k=A.split(`
`);for(g=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;g<k.length&&!k[g].includes("DetermineComponentFrameRoot");)g++;if(u===R.length||g===k.length)for(u=R.length-1,g=k.length-1;1<=u&&0<=g&&R[u]!==k[g];)g--;for(;1<=u&&0<=g;u--,g--)if(R[u]!==k[g]){if(u!==1||g!==1)do if(u--,g--,0>g||R[u]!==k[g]){var V=`
`+R[u].replace(" at new "," at ");return t.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",t.displayName)),V}while(1<=u&&0<=g);break}}}finally{ka=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ai(r):""}function Fv(t,s){switch(t.tag){case 26:case 27:case 5:return ai(t.type);case 16:return ai("Lazy");case 13:return t.child!==s&&s!==null?ai("Suspense Fallback"):ai("Suspense");case 19:return ai("SuspenseList");case 0:case 15:return La(t.type,!1);case 11:return La(t.type.render,!1);case 1:return La(t.type,!0);case 31:return ai("Activity");default:return""}}function od(t){try{var s="",r=null;do s+=Fv(t,r),r=t,t=t.return;while(t);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var qa=Object.prototype.hasOwnProperty,Ga=i.unstable_scheduleCallback,Ba=i.unstable_cancelCallback,Jv=i.unstable_shouldYield,$v=i.unstable_requestPaint,xt=i.unstable_now,Yv=i.unstable_getCurrentPriorityLevel,rd=i.unstable_ImmediatePriority,ad=i.unstable_UserBlockingPriority,Fo=i.unstable_NormalPriority,Kv=i.unstable_LowPriority,ld=i.unstable_IdlePriority,jv=i.log,Qv=i.unstable_setDisableYieldValue,Gs=null,Nt=null;function Dn(t){if(typeof jv=="function"&&Qv(t),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Gs,t)}catch{}}var It=Math.clz32?Math.clz32:Zv,Wv=Math.log,Xv=Math.LN2;function Zv(t){return t>>>=0,t===0?32:31-(Wv(t)/Xv|0)|0}var Jo=256,$o=262144,Yo=4194304;function li(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ko(t,s,r){var u=t.pendingLanes;if(u===0)return 0;var g=0,y=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var A=u&134217727;return A!==0?(u=A&~y,u!==0?g=li(u):(S&=A,S!==0?g=li(S):r||(r=A&~t,r!==0&&(g=li(r))))):(A=u&~y,A!==0?g=li(A):S!==0?g=li(S):r||(r=u&~t,r!==0&&(g=li(r)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:g}function Bs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function e_(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ud(){var t=Yo;return Yo<<=1,(Yo&62914560)===0&&(Yo=4194304),t}function Ha(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Hs(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function t_(t,s,r,u,g,y){var S=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,R=t.expirationTimes,k=t.hiddenUpdates;for(r=S&~r;0<r;){var V=31-It(r),Q=1<<V;A[V]=0,R[V]=-1;var L=k[V];if(L!==null)for(k[V]=null,V=0;V<L.length;V++){var H=L[V];H!==null&&(H.lane&=-536870913)}r&=~Q}u!==0&&cd(t,u,0),y!==0&&g===0&&t.tag!==0&&(t.suspendedLanes|=y&~(S&~s))}function cd(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var u=31-It(s);t.entangledLanes|=s,t.entanglements[u]=t.entanglements[u]|1073741824|r&261930}function dd(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var u=31-It(r),g=1<<u;g&s|t[u]&s&&(t[u]|=s),r&=~g}}function fd(t,s){var r=s&-s;return r=(r&42)!==0?1:Va(r),(r&(t.suspendedLanes|s))!==0?0:r}function Va(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function za(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hd(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:Zp(t.type))}function pd(t,s){var r=G.p;try{return G.p=t,s()}finally{G.p=r}}var Pn=Math.random().toString(36).slice(2),lt="__reactFiber$"+Pn,Et="__reactProps$"+Pn,Ui="__reactContainer$"+Pn,Fa="__reactEvents$"+Pn,n_="__reactListeners$"+Pn,i_="__reactHandles$"+Pn,md="__reactResources$"+Pn,Vs="__reactMarker$"+Pn;function Ja(t){delete t[lt],delete t[Et],delete t[Fa],delete t[n_],delete t[i_]}function Oi(t){var s=t[lt];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Ui]||r[lt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Lp(t);t!==null;){if(r=t[lt])return r;t=Lp(t)}return s}t=r,r=t.parentNode}return null}function ki(t){if(t=t[lt]||t[Ui]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function zs(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function Li(t){var s=t[md];return s||(s=t[md]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function rt(t){t[Vs]=!0}var gd=new Set,yd={};function ui(t,s){qi(t,s),qi(t+"Capture",s)}function qi(t,s){for(yd[t]=s,t=0;t<s.length;t++)gd.add(s[t])}var s_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vd={},_d={};function o_(t){return qa.call(_d,t)?!0:qa.call(vd,t)?!1:s_.test(t)?_d[t]=!0:(vd[t]=!0,!1)}function jo(t,s,r){if(o_(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Qo(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function cn(t,s,r,u){if(u===null)t.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+u)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ed(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function r_(t,s,r){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){r=""+S,y.call(this,S)}}),Object.defineProperty(t,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function $a(t){if(!t._valueTracker){var s=Ed(t)?"checked":"value";t._valueTracker=r_(t,s,""+t[s])}}function Sd(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return t&&(u=Ed(t)?t.checked?"true":"false":t.value),t=u,t!==r?(s.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var a_=/[\n"\\]/g;function Ht(t){return t.replace(a_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ya(t,s,r,u,g,y,S,A){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),s!=null?S==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Bt(s)):t.value!==""+Bt(s)&&(t.value=""+Bt(s)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),s!=null?Ka(t,S,Bt(s)):r!=null?Ka(t,S,Bt(r)):u!=null&&t.removeAttribute("value"),g==null&&y!=null&&(t.defaultChecked=!!y),g!=null&&(t.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Bt(A):t.removeAttribute("name")}function Td(t,s,r,u,g,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){$a(t);return}r=r!=null?""+Bt(r):"",s=s!=null?""+Bt(s):r,A||s===t.value||(t.value=s),t.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=A?t.checked:!!u,t.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),$a(t)}function Ka(t,s,r){s==="number"&&Wo(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Gi(t,s,r,u){if(t=t.options,s){s={};for(var g=0;g<r.length;g++)s["$"+r[g]]=!0;for(r=0;r<t.length;r++)g=s.hasOwnProperty("$"+t[r].value),t[r].selected!==g&&(t[r].selected=g),g&&u&&(t[r].defaultSelected=!0)}else{for(r=""+Bt(r),s=null,g=0;g<t.length;g++){if(t[g].value===r){t[g].selected=!0,u&&(t[g].defaultSelected=!0);return}s!==null||t[g].disabled||(s=t[g])}s!==null&&(s.selected=!0)}}function wd(t,s,r){if(s!=null&&(s=""+Bt(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+Bt(r):""}function Ad(t,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(o(92));if(de(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=Bt(s),t.defaultValue=r,u=t.textContent,u===r&&u!==""&&u!==null&&(t.value=u),$a(t)}function Bi(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var l_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(t,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":u?t.setProperty(s,r):typeof r!="number"||r===0||l_.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function bd(t,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&r[g]!==u&&Cd(t,g,u)}else for(var y in s)s.hasOwnProperty(y)&&Cd(t,y,s[y])}function ja(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),c_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(t){return c_.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function dn(){}var Qa=null;function Wa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hi=null,Vi=null;function Rd(t){var s=ki(t);if(s&&(t=s.stateNode)){var r=t[Et]||null;e:switch(t=s.stateNode,s.type){case"input":if(Ya(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ht(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==t&&u.form===t.form){var g=u[Et]||null;if(!g)throw Error(o(90));Ya(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===t.form&&Sd(u)}break e;case"textarea":wd(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Gi(t,!!r.multiple,s,!1)}}}var Xa=!1;function xd(t,s,r){if(Xa)return t(s,r);Xa=!0;try{var u=t(s);return u}finally{if(Xa=!1,(Hi!==null||Vi!==null)&&(Gr(),Hi&&(s=Hi,t=Vi,Vi=Hi=null,Rd(s),t)))for(s=0;s<t.length;s++)Rd(t[s])}}function Fs(t,s){var r=t.stateNode;if(r===null)return null;var u=r[Et]||null;if(u===null)return null;r=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=!1;if(fn)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Za=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Za=!1}var Un=null,el=null,Zo=null;function Nd(){if(Zo)return Zo;var t,s=el,r=s.length,u,g="value"in Un?Un.value:Un.textContent,y=g.length;for(t=0;t<r&&s[t]===g[t];t++);var S=r-t;for(u=1;u<=S&&s[r-u]===g[y-u];u++);return Zo=g.slice(t,1<u?1-u:void 0)}function er(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function tr(){return!0}function Id(){return!1}function St(t){function s(r,u,g,y,S){this._reactName=r,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?tr:Id,this.isPropagationStopped=Id,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=St(ci),$s=_({},ci,{view:0,detail:0}),d_=St($s),tl,nl,Ys,ir=_({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ys&&(Ys&&t.type==="mousemove"?(tl=t.screenX-Ys.screenX,nl=t.screenY-Ys.screenY):nl=tl=0,Ys=t),tl)},movementY:function(t){return"movementY"in t?t.movementY:nl}}),Md=St(ir),f_=_({},ir,{dataTransfer:0}),h_=St(f_),p_=_({},$s,{relatedTarget:0}),il=St(p_),m_=_({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),g_=St(m_),y_=_({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v_=St(y_),__=_({},ci,{data:0}),Dd=St(__),E_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w_(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=T_[t])?!!s[t]:!1}function sl(){return w_}var A_=_({},$s,{key:function(t){if(t.key){var s=E_[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sl,charCode:function(t){return t.type==="keypress"?er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C_=St(A_),b_=_({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pd=St(b_),R_=_({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sl}),x_=St(R_),N_=_({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),I_=St(N_),M_=_({},ir,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D_=St(M_),P_=_({},ci,{newState:0,oldState:0}),U_=St(P_),O_=[9,13,27,32],ol=fn&&"CompositionEvent"in window,Ks=null;fn&&"documentMode"in document&&(Ks=document.documentMode);var k_=fn&&"TextEvent"in window&&!Ks,Ud=fn&&(!ol||Ks&&8<Ks&&11>=Ks),Od=" ",kd=!1;function Ld(t,s){switch(t){case"keyup":return O_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function L_(t,s){switch(t){case"compositionend":return qd(s);case"keypress":return s.which!==32?null:(kd=!0,Od);case"textInput":return t=s.data,t===Od&&kd?null:t;default:return null}}function q_(t,s){if(zi)return t==="compositionend"||!ol&&Ld(t,s)?(t=Nd(),Zo=el=Un=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ud&&s.locale!=="ko"?null:s.data;default:return null}}var G_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!G_[t.type]:s==="textarea"}function Bd(t,s,r,u){Hi?Vi?Vi.push(u):Vi=[u]:Hi=u,s=$r(s,"onChange"),0<s.length&&(r=new nr("onChange","change",null,r,u),t.push({event:r,listeners:s}))}var js=null,Qs=null;function B_(t){wp(t,0)}function sr(t){var s=zs(t);if(Sd(s))return t}function Hd(t,s){if(t==="change")return s}var Vd=!1;if(fn){var rl;if(fn){var al="oninput"in document;if(!al){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),al=typeof zd.oninput=="function"}rl=al}else rl=!1;Vd=rl&&(!document.documentMode||9<document.documentMode)}function Fd(){js&&(js.detachEvent("onpropertychange",Jd),Qs=js=null)}function Jd(t){if(t.propertyName==="value"&&sr(Qs)){var s=[];Bd(s,Qs,t,Wa(t)),xd(B_,s)}}function H_(t,s,r){t==="focusin"?(Fd(),js=s,Qs=r,js.attachEvent("onpropertychange",Jd)):t==="focusout"&&Fd()}function V_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sr(Qs)}function z_(t,s){if(t==="click")return sr(s)}function F_(t,s){if(t==="input"||t==="change")return sr(s)}function J_(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Mt=typeof Object.is=="function"?Object.is:J_;function Ws(t,s){if(Mt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var g=r[u];if(!qa.call(s,g)||!Mt(t[g],s[g]))return!1}return!0}function $d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yd(t,s){var r=$d(t);t=0;for(var u;r;){if(r.nodeType===3){if(u=t+r.textContent.length,t<=s&&u>=s)return{node:r,offset:s-t};t=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$d(r)}}function Kd(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Kd(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function jd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Wo(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Wo(t.document)}return s}function ll(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var $_=fn&&"documentMode"in document&&11>=document.documentMode,Fi=null,ul=null,Xs=null,cl=!1;function Qd(t,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cl||Fi==null||Fi!==Wo(u)||(u=Fi,"selectionStart"in u&&ll(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xs&&Ws(Xs,u)||(Xs=u,u=$r(ul,"onSelect"),0<u.length&&(s=new nr("onSelect","select",null,s,r),t.push({event:s,listeners:u}),s.target=Fi)))}function di(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ji={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionrun:di("Transition","TransitionRun"),transitionstart:di("Transition","TransitionStart"),transitioncancel:di("Transition","TransitionCancel"),transitionend:di("Transition","TransitionEnd")},dl={},Wd={};fn&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function fi(t){if(dl[t])return dl[t];if(!Ji[t])return t;var s=Ji[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Wd)return dl[t]=s[r];return t}var Xd=fi("animationend"),Zd=fi("animationiteration"),ef=fi("animationstart"),Y_=fi("transitionrun"),K_=fi("transitionstart"),j_=fi("transitioncancel"),tf=fi("transitionend"),nf=new Map,fl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fl.push("scrollEnd");function Xt(t,s){nf.set(t,s),ui(s,[t])}var or=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Vt=[],$i=0,hl=0;function rr(){for(var t=$i,s=hl=$i=0;s<t;){var r=Vt[s];Vt[s++]=null;var u=Vt[s];Vt[s++]=null;var g=Vt[s];Vt[s++]=null;var y=Vt[s];if(Vt[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&sf(r,g,y)}}function ar(t,s,r,u){Vt[$i++]=t,Vt[$i++]=s,Vt[$i++]=r,Vt[$i++]=u,hl|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function pl(t,s,r,u){return ar(t,s,r,u),lr(t)}function hi(t,s){return ar(t,null,null,s),lr(t)}function sf(t,s,r){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r);for(var g=!1,y=t.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(g=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,g&&s!==null&&(g=31-It(r),t=y.hiddenUpdates,u=t[g],u===null?t[g]=[s]:u.push(s),s.lane=r|536870912),y):null}function lr(t){if(50<So)throw So=0,wu=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Yi={};function Q_(t,s,r,u){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,s,r,u){return new Q_(t,s,r,u)}function ml(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hn(t,s){var r=t.alternate;return r===null?(r=Dt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function of(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ur(t,s,r,u,g,y){var S=0;if(u=t,typeof t=="function")ml(t)&&(S=1);else if(typeof t=="string")S=tE(t,r,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Dt(31,r,s,g),t.elementType=N,t.lanes=y,t;case x:return pi(r.children,g,y,s);case b:S=8,g|=24;break;case q:return t=Dt(12,r,s,g|2),t.elementType=q,t.lanes=y,t;case X:return t=Dt(13,r,s,g),t.elementType=X,t.lanes=y,t;case ee:return t=Dt(19,r,s,g),t.elementType=ee,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:S=10;break e;case B:S=9;break e;case $:S=11;break e;case J:S=14;break e;case z:S=16,u=null;break e}S=29,r=Error(o(130,t===null?"null":typeof t,"")),u=null}return s=Dt(S,r,s,g),s.elementType=t,s.type=u,s.lanes=y,s}function pi(t,s,r,u){return t=Dt(7,t,u,s),t.lanes=r,t}function gl(t,s,r){return t=Dt(6,t,null,s),t.lanes=r,t}function rf(t){var s=Dt(18,null,null,0);return s.stateNode=t,s}function yl(t,s,r){return s=Dt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var af=new WeakMap;function zt(t,s){if(typeof t=="object"&&t!==null){var r=af.get(t);return r!==void 0?r:(s={value:t,source:s,stack:od(s)},af.set(t,s),s)}return{value:t,source:s,stack:od(s)}}var Ki=[],ji=0,cr=null,Zs=0,Ft=[],Jt=0,On=null,rn=1,an="";function pn(t,s){Ki[ji++]=Zs,Ki[ji++]=cr,cr=t,Zs=s}function lf(t,s,r){Ft[Jt++]=rn,Ft[Jt++]=an,Ft[Jt++]=On,On=t;var u=rn;t=an;var g=32-It(u)-1;u&=~(1<<g),r+=1;var y=32-It(s)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,rn=1<<32-It(s)+g|r<<g|u,an=y+t}else rn=1<<y|r<<g|u,an=t}function vl(t){t.return!==null&&(pn(t,1),lf(t,1,0))}function _l(t){for(;t===cr;)cr=Ki[--ji],Ki[ji]=null,Zs=Ki[--ji],Ki[ji]=null;for(;t===On;)On=Ft[--Jt],Ft[Jt]=null,an=Ft[--Jt],Ft[Jt]=null,rn=Ft[--Jt],Ft[Jt]=null}function uf(t,s){Ft[Jt++]=rn,Ft[Jt++]=an,Ft[Jt++]=On,rn=s.id,an=s.overflow,On=t}var ut=null,ze=null,Ne=!1,kn=null,$t=!1,El=Error(o(519));function Ln(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eo(zt(s,t)),El}function cf(t){var s=t.stateNode,r=t.type,u=t.memoizedProps;switch(s[lt]=t,s[Et]=u,r){case"dialog":Ce("cancel",s),Ce("close",s);break;case"iframe":case"object":case"embed":Ce("load",s);break;case"video":case"audio":for(r=0;r<wo.length;r++)Ce(wo[r],s);break;case"source":Ce("error",s);break;case"img":case"image":case"link":Ce("error",s),Ce("load",s);break;case"details":Ce("toggle",s);break;case"input":Ce("invalid",s),Td(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ce("invalid",s);break;case"textarea":Ce("invalid",s),Ad(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||Rp(s.textContent,r)?(u.popover!=null&&(Ce("beforetoggle",s),Ce("toggle",s)),u.onScroll!=null&&Ce("scroll",s),u.onScrollEnd!=null&&Ce("scrollend",s),u.onClick!=null&&(s.onclick=dn),s=!0):s=!1,s||Ln(t,!0)}function df(t){for(ut=t.return;ut;)switch(ut.tag){case 5:case 31:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:ut=ut.return}}function Qi(t){if(t!==ut)return!1;if(!Ne)return df(t),Ne=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||qu(t.type,t.memoizedProps)),r=!r),r&&ze&&Ln(t),df(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));ze=kp(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));ze=kp(t)}else s===27?(s=ze,Wn(t.type)?(t=zu,zu=null,ze=t):ze=s):ze=ut?Kt(t.stateNode.nextSibling):null;return!0}function mi(){ze=ut=null,Ne=!1}function Sl(){var t=kn;return t!==null&&(Ct===null?Ct=t:Ct.push.apply(Ct,t),kn=null),t}function eo(t){kn===null?kn=[t]:kn.push(t)}var Tl=M(null),gi=null,mn=null;function qn(t,s,r){ie(Tl,s._currentValue),s._currentValue=r}function gn(t){t._currentValue=Tl.current,K(Tl)}function wl(t,s,r){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===r)break;t=t.return}}function Al(t,s,r,u){var g=t.child;for(g!==null&&(g.return=t);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var R=0;R<s.length;R++)if(A.context===s[R]){y.lanes|=r,A=y.alternate,A!==null&&(A.lanes|=r),wl(y.return,r,t),u||(S=null);break e}y=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=r,y=S.alternate,y!==null&&(y.lanes|=r),wl(S,r,t),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===t){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Wi(t,s,r,u){t=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var A=g.type;Mt(g.pendingProps.value,S.value)||(t!==null?t.push(A):t=[A])}}else if(g===Ue.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(t!==null?t.push(xo):t=[xo])}g=g.return}t!==null&&Al(s,t,r,u),s.flags|=262144}function dr(t){for(t=t.firstContext;t!==null;){if(!Mt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function yi(t){gi=t,mn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ct(t){return ff(gi,t)}function fr(t,s){return gi===null&&yi(t),ff(t,s)}function ff(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},mn===null){if(t===null)throw Error(o(308));mn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else mn=mn.next=s;return r}var W_=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,u){t.push(u)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},X_=i.unstable_scheduleCallback,Z_=i.unstable_NormalPriority,Ze={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cl(){return{controller:new W_,data:new Map,refCount:0}}function to(t){t.refCount--,t.refCount===0&&X_(Z_,function(){t.controller.abort()})}var no=null,bl=0,Xi=0,Zi=null;function e0(t,s){if(no===null){var r=no=[];bl=0,Xi=Nu(),Zi={status:"pending",value:void 0,then:function(u){r.push(u)}}}return bl++,s.then(hf,hf),s}function hf(){if(--bl===0&&no!==null){Zi!==null&&(Zi.status="fulfilled");var t=no;no=null,Xi=0,Zi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function t0(t,s){var r=[],u={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return t.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<r.length;g++)(0,r[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),u}var pf=U.S;U.S=function(t,s){Wh=xt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&e0(t,s),pf!==null&&pf(t,s)};var vi=M(null);function Rl(){var t=vi.current;return t!==null?t:Be.pooledCache}function hr(t,s){s===null?ie(vi,vi.current):ie(vi,s.pool)}function mf(){var t=Rl();return t===null?null:{parent:Ze._currentValue,pool:t}}var es=Error(o(460)),xl=Error(o(474)),pr=Error(o(542)),mr={then:function(){}};function gf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yf(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(dn,dn),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,_f(t),t;default:if(typeof s.status=="string")s.then(dn,dn);else{if(t=Be,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,_f(t),t}throw Ei=s,es}}function _i(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ei=r,es):r}}var Ei=null;function vf(){if(Ei===null)throw Error(o(459));var t=Ei;return Ei=null,t}function _f(t){if(t===es||t===pr)throw Error(o(483))}var ts=null,io=0;function gr(t){var s=io;return io+=1,ts===null&&(ts=[]),yf(ts,t,s)}function so(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function yr(t,s){throw s.$$typeof===E?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ef(t){function s(P,I){if(t){var O=P.deletions;O===null?(P.deletions=[I],P.flags|=16):O.push(I)}}function r(P,I){if(!t)return null;for(;I!==null;)s(P,I),I=I.sibling;return null}function u(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function g(P,I){return P=hn(P,I),P.index=0,P.sibling=null,P}function y(P,I,O){return P.index=O,t?(O=P.alternate,O!==null?(O=O.index,O<I?(P.flags|=67108866,I):O):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function S(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function A(P,I,O,F){return I===null||I.tag!==6?(I=gl(O,P.mode,F),I.return=P,I):(I=g(I,O),I.return=P,I)}function R(P,I,O,F){var he=O.type;return he===x?V(P,I,O.props.children,F,O.key):I!==null&&(I.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===z&&_i(he)===I.type)?(I=g(I,O.props),so(I,O),I.return=P,I):(I=ur(O.type,O.key,O.props,null,P.mode,F),so(I,O),I.return=P,I)}function k(P,I,O,F){return I===null||I.tag!==4||I.stateNode.containerInfo!==O.containerInfo||I.stateNode.implementation!==O.implementation?(I=yl(O,P.mode,F),I.return=P,I):(I=g(I,O.children||[]),I.return=P,I)}function V(P,I,O,F,he){return I===null||I.tag!==7?(I=pi(O,P.mode,F,he),I.return=P,I):(I=g(I,O),I.return=P,I)}function Q(P,I,O){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=gl(""+I,P.mode,O),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case w:return O=ur(I.type,I.key,I.props,null,P.mode,O),so(O,I),O.return=P,O;case C:return I=yl(I,P.mode,O),I.return=P,I;case z:return I=_i(I),Q(P,I,O)}if(de(I)||te(I))return I=pi(I,P.mode,O,null),I.return=P,I;if(typeof I.then=="function")return Q(P,gr(I),O);if(I.$$typeof===D)return Q(P,fr(P,I),O);yr(P,I)}return null}function L(P,I,O,F){var he=I!==null?I.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return he!==null?null:A(P,I,""+O,F);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return O.key===he?R(P,I,O,F):null;case C:return O.key===he?k(P,I,O,F):null;case z:return O=_i(O),L(P,I,O,F)}if(de(O)||te(O))return he!==null?null:V(P,I,O,F,null);if(typeof O.then=="function")return L(P,I,gr(O),F);if(O.$$typeof===D)return L(P,I,fr(P,O),F);yr(P,O)}return null}function H(P,I,O,F,he){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return P=P.get(O)||null,A(I,P,""+F,he);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return P=P.get(F.key===null?O:F.key)||null,R(I,P,F,he);case C:return P=P.get(F.key===null?O:F.key)||null,k(I,P,F,he);case z:return F=_i(F),H(P,I,O,F,he)}if(de(F)||te(F))return P=P.get(O)||null,V(I,P,F,he,null);if(typeof F.then=="function")return H(P,I,O,gr(F),he);if(F.$$typeof===D)return H(P,I,O,fr(I,F),he);yr(I,F)}return null}function oe(P,I,O,F){for(var he=null,Ie=null,le=I,Te=I=0,Re=null;le!==null&&Te<O.length;Te++){le.index>Te?(Re=le,le=null):Re=le.sibling;var Me=L(P,le,O[Te],F);if(Me===null){le===null&&(le=Re);break}t&&le&&Me.alternate===null&&s(P,le),I=y(Me,I,Te),Ie===null?he=Me:Ie.sibling=Me,Ie=Me,le=Re}if(Te===O.length)return r(P,le),Ne&&pn(P,Te),he;if(le===null){for(;Te<O.length;Te++)le=Q(P,O[Te],F),le!==null&&(I=y(le,I,Te),Ie===null?he=le:Ie.sibling=le,Ie=le);return Ne&&pn(P,Te),he}for(le=u(le);Te<O.length;Te++)Re=H(le,P,Te,O[Te],F),Re!==null&&(t&&Re.alternate!==null&&le.delete(Re.key===null?Te:Re.key),I=y(Re,I,Te),Ie===null?he=Re:Ie.sibling=Re,Ie=Re);return t&&le.forEach(function(ni){return s(P,ni)}),Ne&&pn(P,Te),he}function pe(P,I,O,F){if(O==null)throw Error(o(151));for(var he=null,Ie=null,le=I,Te=I=0,Re=null,Me=O.next();le!==null&&!Me.done;Te++,Me=O.next()){le.index>Te?(Re=le,le=null):Re=le.sibling;var ni=L(P,le,Me.value,F);if(ni===null){le===null&&(le=Re);break}t&&le&&ni.alternate===null&&s(P,le),I=y(ni,I,Te),Ie===null?he=ni:Ie.sibling=ni,Ie=ni,le=Re}if(Me.done)return r(P,le),Ne&&pn(P,Te),he;if(le===null){for(;!Me.done;Te++,Me=O.next())Me=Q(P,Me.value,F),Me!==null&&(I=y(Me,I,Te),Ie===null?he=Me:Ie.sibling=Me,Ie=Me);return Ne&&pn(P,Te),he}for(le=u(le);!Me.done;Te++,Me=O.next())Me=H(le,P,Te,Me.value,F),Me!==null&&(t&&Me.alternate!==null&&le.delete(Me.key===null?Te:Me.key),I=y(Me,I,Te),Ie===null?he=Me:Ie.sibling=Me,Ie=Me);return t&&le.forEach(function(fE){return s(P,fE)}),Ne&&pn(P,Te),he}function Ge(P,I,O,F){if(typeof O=="object"&&O!==null&&O.type===x&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case w:e:{for(var he=O.key;I!==null;){if(I.key===he){if(he=O.type,he===x){if(I.tag===7){r(P,I.sibling),F=g(I,O.props.children),F.return=P,P=F;break e}}else if(I.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===z&&_i(he)===I.type){r(P,I.sibling),F=g(I,O.props),so(F,O),F.return=P,P=F;break e}r(P,I);break}else s(P,I);I=I.sibling}O.type===x?(F=pi(O.props.children,P.mode,F,O.key),F.return=P,P=F):(F=ur(O.type,O.key,O.props,null,P.mode,F),so(F,O),F.return=P,P=F)}return S(P);case C:e:{for(he=O.key;I!==null;){if(I.key===he)if(I.tag===4&&I.stateNode.containerInfo===O.containerInfo&&I.stateNode.implementation===O.implementation){r(P,I.sibling),F=g(I,O.children||[]),F.return=P,P=F;break e}else{r(P,I);break}else s(P,I);I=I.sibling}F=yl(O,P.mode,F),F.return=P,P=F}return S(P);case z:return O=_i(O),Ge(P,I,O,F)}if(de(O))return oe(P,I,O,F);if(te(O)){if(he=te(O),typeof he!="function")throw Error(o(150));return O=he.call(O),pe(P,I,O,F)}if(typeof O.then=="function")return Ge(P,I,gr(O),F);if(O.$$typeof===D)return Ge(P,I,fr(P,O),F);yr(P,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,I!==null&&I.tag===6?(r(P,I.sibling),F=g(I,O),F.return=P,P=F):(r(P,I),F=gl(O,P.mode,F),F.return=P,P=F),S(P)):r(P,I)}return function(P,I,O,F){try{io=0;var he=Ge(P,I,O,F);return ts=null,he}catch(le){if(le===es||le===pr)throw le;var Ie=Dt(29,le,null,P.mode);return Ie.lanes=F,Ie.return=P,Ie}finally{}}}var Si=Ef(!0),Sf=Ef(!1),Gn=!1;function Nl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Il(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Bn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Hn(t,s,r){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=lr(t),sf(t,null,r),s}return ar(t,u,s,r),lr(t)}function oo(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=t.pendingLanes,r|=u,s.lanes=r,dd(t,r)}}function Ml(t,s){var r=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var g=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,r=r.next}while(r!==null);y===null?g=y=s:y=y.next=s}else g=y=s;r={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var Dl=!1;function ro(){if(Dl){var t=Zi;if(t!==null)throw t}}function ao(t,s,r,u){Dl=!1;var g=t.updateQueue;Gn=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var R=A,k=R.next;R.next=null,S===null?y=k:S.next=k,S=R;var V=t.alternate;V!==null&&(V=V.updateQueue,A=V.lastBaseUpdate,A!==S&&(A===null?V.firstBaseUpdate=k:A.next=k,V.lastBaseUpdate=R))}if(y!==null){var Q=g.baseState;S=0,V=k=R=null,A=y;do{var L=A.lane&-536870913,H=L!==A.lane;if(H?(be&L)===L:(u&L)===L){L!==0&&L===Xi&&(Dl=!0),V!==null&&(V=V.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var oe=t,pe=A;L=s;var Ge=r;switch(pe.tag){case 1:if(oe=pe.payload,typeof oe=="function"){Q=oe.call(Ge,Q,L);break e}Q=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=pe.payload,L=typeof oe=="function"?oe.call(Ge,Q,L):oe,L==null)break e;Q=_({},Q,L);break e;case 2:Gn=!0}}L=A.callback,L!==null&&(t.flags|=64,H&&(t.flags|=8192),H=g.callbacks,H===null?g.callbacks=[L]:H.push(L))}else H={lane:L,tag:A.tag,payload:A.payload,callback:A.callback,next:null},V===null?(k=V=H,R=Q):V=V.next=H,S|=L;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;H=A,A=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);V===null&&(R=Q),g.baseState=R,g.firstBaseUpdate=k,g.lastBaseUpdate=V,y===null&&(g.shared.lanes=0),$n|=S,t.lanes=S,t.memoizedState=Q}}function Tf(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function wf(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Tf(r[t],s)}var ns=M(null),vr=M(0);function Af(t,s){t=Cn,ie(vr,t),ie(ns,s),Cn=t|s.baseLanes}function Pl(){ie(vr,Cn),ie(ns,ns.current)}function Ul(){Cn=vr.current,K(ns),K(vr)}var Pt=M(null),Yt=null;function Vn(t){var s=t.alternate;ie(We,We.current&1),ie(Pt,t),Yt===null&&(s===null||ns.current!==null||s.memoizedState!==null)&&(Yt=t)}function Ol(t){ie(We,We.current),ie(Pt,t),Yt===null&&(Yt=t)}function Cf(t){t.tag===22?(ie(We,We.current),ie(Pt,t),Yt===null&&(Yt=t)):zn()}function zn(){ie(We,We.current),ie(Pt,Pt.current)}function Ut(t){K(Pt),Yt===t&&(Yt=null),K(We)}var We=M(0);function _r(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Hu(r)||Vu(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yn=0,Se=null,Le=null,et=null,Er=!1,is=!1,Ti=!1,Sr=0,lo=0,ss=null,n0=0;function Ke(){throw Error(o(321))}function kl(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Mt(t[r],s[r]))return!1;return!0}function Ll(t,s,r,u,g,y){return yn=y,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=t===null||t.memoizedState===null?lh:Xl,Ti=!1,y=r(u,g),Ti=!1,is&&(y=Rf(s,r,u,g)),bf(t),y}function bf(t){U.H=fo;var s=Le!==null&&Le.next!==null;if(yn=0,et=Le=Se=null,Er=!1,lo=0,ss=null,s)throw Error(o(300));t===null||tt||(t=t.dependencies,t!==null&&dr(t)&&(tt=!0))}function Rf(t,s,r,u){Se=t;var g=0;do{if(is&&(ss=null),lo=0,is=!1,25<=g)throw Error(o(301));if(g+=1,et=Le=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=uh,y=s(r,u)}while(is);return y}function i0(){var t=U.H,s=t.useState()[0];return s=typeof s.then=="function"?uo(s):s,t=t.useState()[0],(Le!==null?Le.memoizedState:null)!==t&&(Se.flags|=1024),s}function ql(){var t=Sr!==0;return Sr=0,t}function Gl(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Bl(t){if(Er){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Er=!1}yn=0,et=Le=Se=null,is=!1,lo=Sr=0,ss=null}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Se.memoizedState=et=t:et=et.next=t,et}function Xe(){if(Le===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var s=et===null?Se.memoizedState:et.next;if(s!==null)et=s,Le=t;else{if(t===null)throw Se.alternate===null?Error(o(467)):Error(o(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},et===null?Se.memoizedState=et=t:et=et.next=t}return et}function Tr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uo(t){var s=lo;return lo+=1,ss===null&&(ss=[]),t=yf(ss,t,s),s=Se,(et===null?s.memoizedState:et.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?lh:Xl),t}function wr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return uo(t);if(t.$$typeof===D)return ct(t)}throw Error(o(438,String(t)))}function Hl(t){var s=null,r=Se.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=Se.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Tr(),Se.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),u=0;u<t;u++)r[u]=j;return s.index++,r}function vn(t,s){return typeof s=="function"?s(t):s}function Ar(t){var s=Xe();return Vl(s,Le,t)}function Vl(t,s,r){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var g=t.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}s.baseQueue=g=y,u.pending=null}if(y=t.baseState,g===null)t.memoizedState=y;else{s=g.next;var A=S=null,R=null,k=s,V=!1;do{var Q=k.lane&-536870913;if(Q!==k.lane?(be&Q)===Q:(yn&Q)===Q){var L=k.revertLane;if(L===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),Q===Xi&&(V=!0);else if((yn&L)===L){k=k.next,L===Xi&&(V=!0);continue}else Q={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},R===null?(A=R=Q,S=y):R=R.next=Q,Se.lanes|=L,$n|=L;Q=k.action,Ti&&r(y,Q),y=k.hasEagerState?k.eagerState:r(y,Q)}else L={lane:Q,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},R===null?(A=R=L,S=y):R=R.next=L,Se.lanes|=Q,$n|=Q;k=k.next}while(k!==null&&k!==s);if(R===null?S=y:R.next=A,!Mt(y,t.memoizedState)&&(tt=!0,V&&(r=Zi,r!==null)))throw r;t.memoizedState=y,t.baseState=S,t.baseQueue=R,u.lastRenderedState=y}return g===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function zl(t){var s=Xe(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var u=r.dispatch,g=r.pending,y=s.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do y=t(y,S.action),S=S.next;while(S!==g);Mt(y,s.memoizedState)||(tt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function xf(t,s,r){var u=Se,g=Xe(),y=Ne;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var S=!Mt((Le||g).memoizedState,r);if(S&&(g.memoizedState=r,tt=!0),g=g.queue,$l(Mf.bind(null,u,g,t),[t]),g.getSnapshot!==s||S||et!==null&&et.memoizedState.tag&1){if(u.flags|=2048,os(9,{destroy:void 0},If.bind(null,u,g,r,s),null),Be===null)throw Error(o(349));y||(yn&127)!==0||Nf(u,s,r)}return r}function Nf(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Se.updateQueue,s===null?(s=Tr(),Se.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function If(t,s,r,u){s.value=r,s.getSnapshot=u,Df(s)&&Pf(t)}function Mf(t,s,r){return r(function(){Df(s)&&Pf(t)})}function Df(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Mt(t,r)}catch{return!0}}function Pf(t){var s=hi(t,2);s!==null&&bt(s,t,2)}function Fl(t){var s=_t();if(typeof t=="function"){var r=t;if(t=r(),Ti){Dn(!0);try{r()}finally{Dn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:t},s}function Uf(t,s,r,u){return t.baseState=r,Vl(t,Le,typeof u=="function"?u:vn)}function s0(t,s,r,u,g){if(Rr(t))throw Error(o(485));if(t=s.action,t!==null){var y={payload:g,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};U.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,Of(s,y)):(y.next=r.next,s.pending=r.next=y)}}function Of(t,s){var r=s.action,u=s.payload,g=t.state;if(s.isTransition){var y=U.T,S={};U.T=S;try{var A=r(g,u),R=U.S;R!==null&&R(S,A),kf(t,s,A)}catch(k){Jl(t,s,k)}finally{y!==null&&S.types!==null&&(y.types=S.types),U.T=y}}else try{y=r(g,u),kf(t,s,y)}catch(k){Jl(t,s,k)}}function kf(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Lf(t,s,u)},function(u){return Jl(t,s,u)}):Lf(t,s,r)}function Lf(t,s,r){s.status="fulfilled",s.value=r,qf(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,Of(t,r)))}function Jl(t,s,r){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,qf(s),s=s.next;while(s!==u)}t.action=null}function qf(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Gf(t,s){return s}function Bf(t,s){if(Ne){var r=Be.formState;if(r!==null){e:{var u=Se;if(Ne){if(ze){t:{for(var g=ze,y=$t;g.nodeType!==8;){if(!y){g=null;break t}if(g=Kt(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){ze=Kt(g.nextSibling),u=g.data==="F!";break e}}Ln(u)}u=!1}u&&(s=r[0])}}return r=_t(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gf,lastRenderedState:s},r.queue=u,r=oh.bind(null,Se,u),u.dispatch=r,u=Fl(!1),y=Wl.bind(null,Se,!1,u.queue),u=_t(),g={state:s,dispatch:null,action:t,pending:null},u.queue=g,r=s0.bind(null,Se,g,y,r),g.dispatch=r,u.memoizedState=t,[s,r,!1]}function Hf(t){var s=Xe();return Vf(s,Le,t)}function Vf(t,s,r){if(s=Vl(t,s,Gf)[0],t=Ar(vn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=uo(s)}catch(S){throw S===es?pr:S}else u=s;s=Xe();var g=s.queue,y=g.dispatch;return r!==s.memoizedState&&(Se.flags|=2048,os(9,{destroy:void 0},o0.bind(null,g,r),null)),[u,y,t]}function o0(t,s){t.action=s}function zf(t){var s=Xe(),r=Le;if(r!==null)return Vf(s,r,t);Xe(),s=s.memoizedState,r=Xe();var u=r.queue.dispatch;return r.memoizedState=t,[s,u,!1]}function os(t,s,r,u){return t={tag:t,create:r,deps:u,inst:s,next:null},s=Se.updateQueue,s===null&&(s=Tr(),Se.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(u=r.next,r.next=t,t.next=u,s.lastEffect=t),t}function Ff(){return Xe().memoizedState}function Cr(t,s,r,u){var g=_t();Se.flags|=t,g.memoizedState=os(1|s,{destroy:void 0},r,u===void 0?null:u)}function br(t,s,r,u){var g=Xe();u=u===void 0?null:u;var y=g.memoizedState.inst;Le!==null&&u!==null&&kl(u,Le.memoizedState.deps)?g.memoizedState=os(s,y,r,u):(Se.flags|=t,g.memoizedState=os(1|s,y,r,u))}function Jf(t,s){Cr(8390656,8,t,s)}function $l(t,s){br(2048,8,t,s)}function r0(t){Se.flags|=4;var s=Se.updateQueue;if(s===null)s=Tr(),Se.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function $f(t){var s=Xe().memoizedState;return r0({ref:s,nextImpl:t}),function(){if((Pe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Yf(t,s){return br(4,2,t,s)}function Kf(t,s){return br(4,4,t,s)}function jf(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Qf(t,s,r){r=r!=null?r.concat([t]):null,br(4,4,jf.bind(null,s,t),r)}function Yl(){}function Wf(t,s){var r=Xe();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&kl(s,u[1])?u[0]:(r.memoizedState=[t,s],t)}function Xf(t,s){var r=Xe();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&kl(s,u[1]))return u[0];if(u=t(),Ti){Dn(!0);try{t()}finally{Dn(!1)}}return r.memoizedState=[u,s],u}function Kl(t,s,r){return r===void 0||(yn&1073741824)!==0&&(be&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=Zh(),Se.lanes|=t,$n|=t,r)}function Zf(t,s,r,u){return Mt(r,s)?r:ns.current!==null?(t=Kl(t,r,u),Mt(t,s)||(tt=!0),t):(yn&42)===0||(yn&1073741824)!==0&&(be&261930)===0?(tt=!0,t.memoizedState=r):(t=Zh(),Se.lanes|=t,$n|=t,s)}function eh(t,s,r,u,g){var y=G.p;G.p=y!==0&&8>y?y:8;var S=U.T,A={};U.T=A,Wl(t,!1,s,r);try{var R=g(),k=U.S;if(k!==null&&k(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var V=t0(R,u);co(t,s,V,Lt(t))}else co(t,s,u,Lt(t))}catch(Q){co(t,s,{then:function(){},status:"rejected",reason:Q},Lt())}finally{G.p=y,S!==null&&A.types!==null&&(S.types=A.types),U.T=S}}function a0(){}function jl(t,s,r,u){if(t.tag!==5)throw Error(o(476));var g=th(t).queue;eh(t,g,s,Y,r===null?a0:function(){return nh(t),r(u)})}function th(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:Y},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function nh(t){var s=th(t);s.next===null&&(s=t.alternate.memoizedState),co(t,s.next.queue,{},Lt())}function Ql(){return ct(xo)}function ih(){return Xe().memoizedState}function sh(){return Xe().memoizedState}function l0(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=Lt();t=Bn(r);var u=Hn(s,t,r);u!==null&&(bt(u,s,r),oo(u,s,r)),s={cache:Cl()},t.payload=s;return}s=s.return}}function u0(t,s,r){var u=Lt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Rr(t)?rh(s,r):(r=pl(t,s,r,u),r!==null&&(bt(r,t,u),ah(r,s,u)))}function oh(t,s,r){var u=Lt();co(t,s,r,u)}function co(t,s,r,u){var g={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Rr(t))rh(s,g);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,A=y(S,r);if(g.hasEagerState=!0,g.eagerState=A,Mt(A,S))return ar(t,s,g,0),Be===null&&rr(),!1}catch{}finally{}if(r=pl(t,s,g,u),r!==null)return bt(r,t,u),ah(r,s,u),!0}return!1}function Wl(t,s,r,u){if(u={lane:2,revertLane:Nu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Rr(t)){if(s)throw Error(o(479))}else s=pl(t,r,u,2),s!==null&&bt(s,t,2)}function Rr(t){var s=t.alternate;return t===Se||s!==null&&s===Se}function rh(t,s){is=Er=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function ah(t,s,r){if((r&4194048)!==0){var u=s.lanes;u&=t.pendingLanes,r|=u,s.lanes=r,dd(t,r)}}var fo={readContext:ct,use:wr,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};fo.useEffectEvent=Ke;var lh={readContext:ct,use:wr,useCallback:function(t,s){return _t().memoizedState=[t,s===void 0?null:s],t},useContext:ct,useEffect:Jf,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Cr(4194308,4,jf.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Cr(4194308,4,t,s)},useInsertionEffect:function(t,s){Cr(4,2,t,s)},useMemo:function(t,s){var r=_t();s=s===void 0?null:s;var u=t();if(Ti){Dn(!0);try{t()}finally{Dn(!1)}}return r.memoizedState=[u,s],u},useReducer:function(t,s,r){var u=_t();if(r!==void 0){var g=r(s);if(Ti){Dn(!0);try{r(s)}finally{Dn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:g},u.queue=t,t=t.dispatch=u0.bind(null,Se,t),[u.memoizedState,t]},useRef:function(t){var s=_t();return t={current:t},s.memoizedState=t},useState:function(t){t=Fl(t);var s=t.queue,r=oh.bind(null,Se,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:Yl,useDeferredValue:function(t,s){var r=_t();return Kl(r,t,s)},useTransition:function(){var t=Fl(!1);return t=eh.bind(null,Se,t.queue,!0,!1),_t().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var u=Se,g=_t();if(Ne){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),Be===null)throw Error(o(349));(be&127)!==0||Nf(u,s,r)}g.memoizedState=r;var y={value:r,getSnapshot:s};return g.queue=y,Jf(Mf.bind(null,u,y,t),[t]),u.flags|=2048,os(9,{destroy:void 0},If.bind(null,u,y,r,s),null),r},useId:function(){var t=_t(),s=Be.identifierPrefix;if(Ne){var r=an,u=rn;r=(u&~(1<<32-It(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Sr++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=n0++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Ql,useFormState:Bf,useActionState:Bf,useOptimistic:function(t){var s=_t();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Wl.bind(null,Se,!0,r),r.dispatch=s,[t,s]},useMemoCache:Hl,useCacheRefresh:function(){return _t().memoizedState=l0.bind(null,Se)},useEffectEvent:function(t){var s=_t(),r={impl:t};return s.memoizedState=r,function(){if((Pe&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},Xl={readContext:ct,use:wr,useCallback:Wf,useContext:ct,useEffect:$l,useImperativeHandle:Qf,useInsertionEffect:Yf,useLayoutEffect:Kf,useMemo:Xf,useReducer:Ar,useRef:Ff,useState:function(){return Ar(vn)},useDebugValue:Yl,useDeferredValue:function(t,s){var r=Xe();return Zf(r,Le.memoizedState,t,s)},useTransition:function(){var t=Ar(vn)[0],s=Xe().memoizedState;return[typeof t=="boolean"?t:uo(t),s]},useSyncExternalStore:xf,useId:ih,useHostTransitionStatus:Ql,useFormState:Hf,useActionState:Hf,useOptimistic:function(t,s){var r=Xe();return Uf(r,Le,t,s)},useMemoCache:Hl,useCacheRefresh:sh};Xl.useEffectEvent=$f;var uh={readContext:ct,use:wr,useCallback:Wf,useContext:ct,useEffect:$l,useImperativeHandle:Qf,useInsertionEffect:Yf,useLayoutEffect:Kf,useMemo:Xf,useReducer:zl,useRef:Ff,useState:function(){return zl(vn)},useDebugValue:Yl,useDeferredValue:function(t,s){var r=Xe();return Le===null?Kl(r,t,s):Zf(r,Le.memoizedState,t,s)},useTransition:function(){var t=zl(vn)[0],s=Xe().memoizedState;return[typeof t=="boolean"?t:uo(t),s]},useSyncExternalStore:xf,useId:ih,useHostTransitionStatus:Ql,useFormState:zf,useActionState:zf,useOptimistic:function(t,s){var r=Xe();return Le!==null?Uf(r,Le,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Hl,useCacheRefresh:sh};uh.useEffectEvent=$f;function Zl(t,s,r,u){s=t.memoizedState,r=r(u,s),r=r==null?s:_({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var eu={enqueueSetState:function(t,s,r){t=t._reactInternals;var u=Lt(),g=Bn(u);g.payload=s,r!=null&&(g.callback=r),s=Hn(t,g,u),s!==null&&(bt(s,t,u),oo(s,t,u))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var u=Lt(),g=Bn(u);g.tag=1,g.payload=s,r!=null&&(g.callback=r),s=Hn(t,g,u),s!==null&&(bt(s,t,u),oo(s,t,u))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Lt(),u=Bn(r);u.tag=2,s!=null&&(u.callback=s),s=Hn(t,u,r),s!==null&&(bt(s,t,r),oo(s,t,r))}};function ch(t,s,r,u,g,y,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,y,S):s.prototype&&s.prototype.isPureReactComponent?!Ws(r,u)||!Ws(g,y):!0}function dh(t,s,r,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==t&&eu.enqueueReplaceState(s,s.state,null)}function wi(t,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(t=t.defaultProps){r===s&&(r=_({},r));for(var g in t)r[g]===void 0&&(r[g]=t[g])}return r}function fh(t){or(t)}function hh(t){console.error(t)}function ph(t){or(t)}function xr(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function mh(t,s,r){try{var u=t.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function tu(t,s,r){return r=Bn(r),r.tag=3,r.payload={element:null},r.callback=function(){xr(t,s)},r}function gh(t){return t=Bn(t),t.tag=3,t}function yh(t,s,r,u){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;t.payload=function(){return g(y)},t.callback=function(){mh(s,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){mh(s,r,u),typeof g!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function c0(t,s,r,u,g){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&Wi(s,r,g,!0),r=Pt.current,r!==null){switch(r.tag){case 31:case 13:return Yt===null?Br():r.alternate===null&&je===0&&(je=3),r.flags&=-257,r.flags|=65536,r.lanes=g,u===mr?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),bu(t,u,g)),!1;case 22:return r.flags|=65536,u===mr?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),bu(t,u,g)),!1}throw Error(o(435,r.tag))}return bu(t,u,g),Br(),!1}if(Ne)return s=Pt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==El&&(t=Error(o(422),{cause:u}),eo(zt(t,r)))):(u!==El&&(s=Error(o(423),{cause:u}),eo(zt(s,r))),t=t.current.alternate,t.flags|=65536,g&=-g,t.lanes|=g,u=zt(u,r),g=tu(t.stateNode,u,g),Ml(t,g),je!==4&&(je=2)),!1;var y=Error(o(520),{cause:u});if(y=zt(y,r),Eo===null?Eo=[y]:Eo.push(y),je!==4&&(je=2),s===null)return!0;u=zt(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=g&-g,r.lanes|=t,t=tu(r.stateNode,u,t),Ml(r,t),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Yn===null||!Yn.has(y))))return r.flags|=65536,g&=-g,r.lanes|=g,g=gh(g),yh(g,t,r,u),Ml(r,g),!1}r=r.return}while(r!==null);return!1}var nu=Error(o(461)),tt=!1;function dt(t,s,r,u){s.child=t===null?Sf(s,null,r,u):Si(s,t.child,r,u)}function vh(t,s,r,u,g){r=r.render;var y=s.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return yi(s),u=Ll(t,s,r,S,y,g),A=ql(),t!==null&&!tt?(Gl(t,s,g),_n(t,s,g)):(Ne&&A&&vl(s),s.flags|=1,dt(t,s,u,g),s.child)}function _h(t,s,r,u,g){if(t===null){var y=r.type;return typeof y=="function"&&!ml(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Eh(t,s,y,u,g)):(t=ur(r.type,null,u,s,s.mode,g),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,!cu(t,g)){var S=y.memoizedProps;if(r=r.compare,r=r!==null?r:Ws,r(S,u)&&t.ref===s.ref)return _n(t,s,g)}return s.flags|=1,t=hn(y,u),t.ref=s.ref,t.return=s,s.child=t}function Eh(t,s,r,u,g){if(t!==null){var y=t.memoizedProps;if(Ws(y,u)&&t.ref===s.ref)if(tt=!1,s.pendingProps=u=y,cu(t,g))(t.flags&131072)!==0&&(tt=!0);else return s.lanes=t.lanes,_n(t,s,g)}return iu(t,s,r,u,g)}function Sh(t,s,r,u){var g=u.children,y=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,t!==null){for(u=s.child=t.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,s.child=null;return Th(t,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&hr(s,y!==null?y.cachePool:null),y!==null?Af(s,y):Pl(),Cf(s);else return u=s.lanes=536870912,Th(t,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(hr(s,y.cachePool),Af(s,y),zn(),s.memoizedState=null):(t!==null&&hr(s,null),Pl(),zn());return dt(t,s,g,r),s.child}function ho(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Th(t,s,r,u,g){var y=Rl();return y=y===null?null:{parent:Ze._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},t!==null&&hr(s,null),Pl(),Cf(s),t!==null&&Wi(t,s,u,!0),s.childLanes=g,null}function Nr(t,s){return s=Mr({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function wh(t,s,r){return Si(s,t.child,null,r),t=Nr(s,s.pendingProps),t.flags|=2,Ut(s),s.memoizedState=null,t}function d0(t,s,r){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Ne){if(u.mode==="hidden")return t=Nr(s,u),s.lanes=536870912,ho(null,t);if(Ol(s),(t=ze)?(t=Op(t,$t),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:On!==null?{id:rn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},r=rf(t),r.return=s,s.child=r,ut=s,ze=null)):t=null,t===null)throw Ln(s);return s.lanes=536870912,null}return Nr(s,u)}var y=t.memoizedState;if(y!==null){var S=y.dehydrated;if(Ol(s),g)if(s.flags&256)s.flags&=-257,s=wh(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(tt||Wi(t,s,r,!1),g=(r&t.childLanes)!==0,tt||g){if(u=Be,u!==null&&(S=fd(u,r),S!==0&&S!==y.retryLane))throw y.retryLane=S,hi(t,S),bt(u,t,S),nu;Br(),s=wh(t,s,r)}else t=y.treeContext,ze=Kt(S.nextSibling),ut=s,Ne=!0,kn=null,$t=!1,t!==null&&uf(s,t),s=Nr(s,u),s.flags|=4096;return s}return t=hn(t.child,{mode:u.mode,children:u.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Ir(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function iu(t,s,r,u,g){return yi(s),r=Ll(t,s,r,u,void 0,g),u=ql(),t!==null&&!tt?(Gl(t,s,g),_n(t,s,g)):(Ne&&u&&vl(s),s.flags|=1,dt(t,s,r,g),s.child)}function Ah(t,s,r,u,g,y){return yi(s),s.updateQueue=null,r=Rf(s,u,r,g),bf(t),u=ql(),t!==null&&!tt?(Gl(t,s,y),_n(t,s,y)):(Ne&&u&&vl(s),s.flags|=1,dt(t,s,r,y),s.child)}function Ch(t,s,r,u,g){if(yi(s),s.stateNode===null){var y=Yi,S=r.contextType;typeof S=="object"&&S!==null&&(y=ct(S)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=eu,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},Nl(s),S=r.contextType,y.context=typeof S=="object"&&S!==null?ct(S):Yi,y.state=s.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Zl(s,r,S,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&eu.enqueueReplaceState(y,y.state,null),ao(s,u,y,g),ro(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(t===null){y=s.stateNode;var A=s.memoizedProps,R=wi(r,A);y.props=R;var k=y.context,V=r.contextType;S=Yi,typeof V=="object"&&V!==null&&(S=ct(V));var Q=r.getDerivedStateFromProps;V=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||k!==S)&&dh(s,y,u,S),Gn=!1;var L=s.memoizedState;y.state=L,ao(s,u,y,g),ro(),k=s.memoizedState,A||L!==k||Gn?(typeof Q=="function"&&(Zl(s,r,Q,u),k=s.memoizedState),(R=Gn||ch(s,r,R,u,L,k,S))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=k),y.props=u,y.state=k,y.context=S,u=R):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,Il(t,s),S=s.memoizedProps,V=wi(r,S),y.props=V,Q=s.pendingProps,L=y.context,k=r.contextType,R=Yi,typeof k=="object"&&k!==null&&(R=ct(k)),A=r.getDerivedStateFromProps,(k=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Q||L!==R)&&dh(s,y,u,R),Gn=!1,L=s.memoizedState,y.state=L,ao(s,u,y,g),ro();var H=s.memoizedState;S!==Q||L!==H||Gn||t!==null&&t.dependencies!==null&&dr(t.dependencies)?(typeof A=="function"&&(Zl(s,r,A,u),H=s.memoizedState),(V=Gn||ch(s,r,V,u,L,H,R)||t!==null&&t.dependencies!==null&&dr(t.dependencies))?(k||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,H,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,H,R)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),y.props=u,y.state=H,y.context=R,u=V):(typeof y.componentDidUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&L===t.memoizedState||(s.flags|=1024),u=!1)}return y=u,Ir(t,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,t!==null&&u?(s.child=Si(s,t.child,null,g),s.child=Si(s,null,r,g)):dt(t,s,r,g),s.memoizedState=y.state,t=s.child):t=_n(t,s,g),t}function bh(t,s,r,u){return mi(),s.flags|=256,dt(t,s,r,u),s.child}var su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(t){return{baseLanes:t,cachePool:mf()}}function ru(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=kt),t}function Rh(t,s,r){var u=s.pendingProps,g=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=t!==null&&t.memoizedState===null?!1:(We.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ne){if(g?Vn(s):zn(),(t=ze)?(t=Op(t,$t),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:On!==null?{id:rn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},r=rf(t),r.return=s,s.child=r,ut=s,ze=null)):t=null,t===null)throw Ln(s);return Vu(t)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(zn(),g=s.mode,A=Mr({mode:"hidden",children:A},g),u=pi(u,g,r,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=ou(r),u.childLanes=ru(t,S,r),s.memoizedState=su,ho(null,u)):(Vn(s),au(s,A))}var R=t.memoizedState;if(R!==null&&(A=R.dehydrated,A!==null)){if(y)s.flags&256?(Vn(s),s.flags&=-257,s=lu(t,s,r)):s.memoizedState!==null?(zn(),s.child=t.child,s.flags|=128,s=null):(zn(),A=u.fallback,g=s.mode,u=Mr({mode:"visible",children:u.children},g),A=pi(A,g,r,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Si(s,t.child,null,r),u=s.child,u.memoizedState=ou(r),u.childLanes=ru(t,S,r),s.memoizedState=su,s=ho(null,u));else if(Vn(s),Vu(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var k=S.dgst;S=k,u=Error(o(419)),u.stack="",u.digest=S,eo({value:u,source:null,stack:null}),s=lu(t,s,r)}else if(tt||Wi(t,s,r,!1),S=(r&t.childLanes)!==0,tt||S){if(S=Be,S!==null&&(u=fd(S,r),u!==0&&u!==R.retryLane))throw R.retryLane=u,hi(t,u),bt(S,t,u),nu;Hu(A)||Br(),s=lu(t,s,r)}else Hu(A)?(s.flags|=192,s.child=t.child,s=null):(t=R.treeContext,ze=Kt(A.nextSibling),ut=s,Ne=!0,kn=null,$t=!1,t!==null&&uf(s,t),s=au(s,u.children),s.flags|=4096);return s}return g?(zn(),A=u.fallback,g=s.mode,R=t.child,k=R.sibling,u=hn(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,k!==null?A=hn(k,A):(A=pi(A,g,r,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,ho(null,u),u=s.child,A=t.child.memoizedState,A===null?A=ou(r):(g=A.cachePool,g!==null?(R=Ze._currentValue,g=g.parent!==R?{parent:R,pool:R}:g):g=mf(),A={baseLanes:A.baseLanes|r,cachePool:g}),u.memoizedState=A,u.childLanes=ru(t,S,r),s.memoizedState=su,ho(t.child,u)):(Vn(s),r=t.child,t=r.sibling,r=hn(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,t!==null&&(S=s.deletions,S===null?(s.deletions=[t],s.flags|=16):S.push(t)),s.child=r,s.memoizedState=null,r)}function au(t,s){return s=Mr({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Mr(t,s){return t=Dt(22,t,null,s),t.lanes=0,t}function lu(t,s,r){return Si(s,t.child,null,r),t=au(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function xh(t,s,r){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),wl(t.return,s,r)}function uu(t,s,r,u,g,y){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:g,treeForkCount:y}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=g,S.treeForkCount=y)}function Nh(t,s,r){var u=s.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var S=We.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,ie(We,S),dt(t,s,u,r),u=Ne?Zs:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xh(t,r,s);else if(t.tag===19)xh(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(g){case"forwards":for(r=s.child,g=null;r!==null;)t=r.alternate,t!==null&&_r(t)===null&&(g=r),r=r.sibling;r=g,r===null?(g=s.child,s.child=null):(g=r.sibling,r.sibling=null),uu(s,!1,g,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=s.child,s.child=null;g!==null;){if(t=g.alternate,t!==null&&_r(t)===null){s.child=g;break}t=g.sibling,g.sibling=r,r=g,g=t}uu(s,!0,r,null,y,u);break;case"together":uu(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function _n(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),$n|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Wi(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,r=hn(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=hn(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function cu(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&dr(t)))}function f0(t,s,r){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),qn(s,Ze,t.memoizedState.cache),mi();break;case 27:case 5:qs(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:qn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ol(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Vn(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Rh(t,s,r):(Vn(s),t=_n(t,s,r),t!==null?t.sibling:null);Vn(s);break;case 19:var g=(t.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(Wi(t,s,r,!1),u=(r&s.childLanes)!==0),g){if(u)return Nh(t,s,r);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ie(We,We.current),u)break;return null;case 22:return s.lanes=0,Sh(t,s,r,s.pendingProps);case 24:qn(s,Ze,t.memoizedState.cache)}return _n(t,s,r)}function Ih(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)tt=!0;else{if(!cu(t,r)&&(s.flags&128)===0)return tt=!1,f0(t,s,r);tt=(t.flags&131072)!==0}else tt=!1,Ne&&(s.flags&1048576)!==0&&lf(s,Zs,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(t=_i(s.elementType),s.type=t,typeof t=="function")ml(t)?(u=wi(t,u),s.tag=1,s=Ch(null,s,t,u,r)):(s.tag=0,s=iu(null,s,t,u,r));else{if(t!=null){var g=t.$$typeof;if(g===$){s.tag=11,s=vh(null,s,t,u,r);break e}else if(g===J){s.tag=14,s=_h(null,s,t,u,r);break e}}throw s=me(t)||t,Error(o(306,s,""))}}return s;case 0:return iu(t,s,s.type,s.pendingProps,r);case 1:return u=s.type,g=wi(u,s.pendingProps),Ch(t,s,u,g,r);case 3:e:{if(vt(s,s.stateNode.containerInfo),t===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;g=y.element,Il(t,s),ao(s,u,null,r);var S=s.memoizedState;if(u=S.cache,qn(s,Ze,u),u!==y.cache&&Al(s,[Ze],r,!0),ro(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=bh(t,s,u,r);break e}else if(u!==g){g=zt(Error(o(424)),s),eo(g),s=bh(t,s,u,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ze=Kt(t.firstChild),ut=s,Ne=!0,kn=null,$t=!0,r=Sf(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(mi(),u===g){s=_n(t,s,r);break e}dt(t,s,u,r)}s=s.child}return s;case 26:return Ir(t,s),t===null?(r=Hp(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ne||(r=s.type,t=s.pendingProps,u=Yr(we.current).createElement(r),u[lt]=s,u[Et]=t,ft(u,r,t),rt(u),s.stateNode=u):s.memoizedState=Hp(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return qs(s),t===null&&Ne&&(u=s.stateNode=qp(s.type,s.pendingProps,we.current),ut=s,$t=!0,g=ze,Wn(s.type)?(zu=g,ze=Kt(u.firstChild)):ze=g),dt(t,s,s.pendingProps.children,r),Ir(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ne&&((g=u=ze)&&(u=V0(u,s.type,s.pendingProps,$t),u!==null?(s.stateNode=u,ut=s,ze=Kt(u.firstChild),$t=!1,g=!0):g=!1),g||Ln(s)),qs(s),g=s.type,y=s.pendingProps,S=t!==null?t.memoizedProps:null,u=y.children,qu(g,y)?u=null:S!==null&&qu(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Ll(t,s,i0,null,null,r),xo._currentValue=g),Ir(t,s),dt(t,s,u,r),s.child;case 6:return t===null&&Ne&&((t=r=ze)&&(r=z0(r,s.pendingProps,$t),r!==null?(s.stateNode=r,ut=s,ze=null,t=!0):t=!1),t||Ln(s)),null;case 13:return Rh(t,s,r);case 4:return vt(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=Si(s,null,u,r):dt(t,s,u,r),s.child;case 11:return vh(t,s,s.type,s.pendingProps,r);case 7:return dt(t,s,s.pendingProps,r),s.child;case 8:return dt(t,s,s.pendingProps.children,r),s.child;case 12:return dt(t,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,qn(s,s.type,u.value),dt(t,s,u.children,r),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,yi(s),g=ct(g),u=u(g),s.flags|=1,dt(t,s,u,r),s.child;case 14:return _h(t,s,s.type,s.pendingProps,r);case 15:return Eh(t,s,s.type,s.pendingProps,r);case 19:return Nh(t,s,r);case 31:return d0(t,s,r);case 22:return Sh(t,s,r,s.pendingProps);case 24:return yi(s),u=ct(Ze),t===null?(g=Rl(),g===null&&(g=Be,y=Cl(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=r),g=y),s.memoizedState={parent:u,cache:g},Nl(s),qn(s,Ze,g)):((t.lanes&r)!==0&&(Il(t,s),ao(s,null,null,r),ro()),g=t.memoizedState,y=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),qn(s,Ze,u)):(u=y.cache,qn(s,Ze,u),u!==g.cache&&Al(s,[Ze],r,!0))),dt(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function En(t){t.flags|=4}function du(t,s,r,u,g){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(g&335544128)===g)if(t.stateNode.complete)t.flags|=8192;else if(ip())t.flags|=8192;else throw Ei=mr,xl}else t.flags&=-16777217}function Mh(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$p(s))if(ip())t.flags|=8192;else throw Ei=mr,xl}function Dr(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ud():536870912,t.lanes|=s,us|=s)}function po(t,s){if(!Ne)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Fe(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,u=0;if(s)for(var g=t.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=t,g=g.sibling;else for(g=t.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=t,g=g.sibling;return t.subtreeFlags|=u,t.childLanes=r,s}function h0(t,s,r){var u=s.pendingProps;switch(_l(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(s),null;case 1:return Fe(s),null;case 3:return r=s.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),gn(Ze),Qe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qi(s)?En(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sl())),Fe(s),null;case 26:var g=s.type,y=s.memoizedState;return t===null?(En(s),y!==null?(Fe(s),Mh(s,y)):(Fe(s),du(s,g,null,u,r))):y?y!==t.memoizedState?(En(s),Fe(s),Mh(s,y)):(Fe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==u&&En(s),Fe(s),du(s,g,t,u,r)),null;case 27:if(zo(s),r=we.current,g=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&En(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Fe(s),null}t=re.current,Qi(s)?cf(s):(t=qp(g,u,r),s.stateNode=t,En(s))}return Fe(s),null;case 5:if(zo(s),g=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&En(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Fe(s),null}if(y=re.current,Qi(s))cf(s);else{var S=Yr(we.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}y[lt]=s,y[Et]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=y;e:switch(ft(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&En(s)}}return Fe(s),du(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==u&&En(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(t=we.current,Qi(s)){if(t=s.stateNode,r=s.memoizedProps,u=null,g=ut,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}t[lt]=s,t=!!(t.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Rp(t.nodeValue,r)),t||Ln(s,!0)}else t=Yr(t).createTextNode(u),t[lt]=s,s.stateNode=t}return Fe(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(u=Qi(s),r!==null){if(t===null){if(!u)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[lt]=s}else mi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),t=!1}else r=Sl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(Ut(s),s):(Ut(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Fe(s),null;case 13:if(u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(g=Qi(s),u!==null&&u.dehydrated!==null){if(t===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[lt]=s}else mi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),g=!1}else g=Sl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Ut(s),s):(Ut(s),null)}return Ut(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,t=t!==null&&t.memoizedState!==null,r&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),Dr(s,s.updateQueue),Fe(s),null);case 4:return Qe(),t===null&&Pu(s.stateNode.containerInfo),Fe(s),null;case 10:return gn(s.type),Fe(s),null;case 19:if(K(We),u=s.memoizedState,u===null)return Fe(s),null;if(g=(s.flags&128)!==0,y=u.rendering,y===null)if(g)po(u,!1);else{if(je!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(y=_r(t),y!==null){for(s.flags|=128,po(u,!1),t=y.updateQueue,s.updateQueue=t,Dr(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)of(r,t),r=r.sibling;return ie(We,We.current&1|2),Ne&&pn(s,u.treeForkCount),s.child}t=t.sibling}u.tail!==null&&xt()>Lr&&(s.flags|=128,g=!0,po(u,!1),s.lanes=4194304)}else{if(!g)if(t=_r(y),t!==null){if(s.flags|=128,g=!0,t=t.updateQueue,s.updateQueue=t,Dr(s,t),po(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ne)return Fe(s),null}else 2*xt()-u.renderingStartTime>Lr&&r!==536870912&&(s.flags|=128,g=!0,po(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(t=u.last,t!==null?t.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=xt(),t.sibling=null,r=We.current,ie(We,g?r&1|2:r&1),Ne&&pn(s,u.treeForkCount),t):(Fe(s),null);case 22:case 23:return Ut(s),Ul(),u=s.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(Fe(s),s.subtreeFlags&6&&(s.flags|=8192)):Fe(s),r=s.updateQueue,r!==null&&Dr(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),t!==null&&K(vi),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),gn(Ze),Fe(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function p0(t,s){switch(_l(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return gn(Ze),Qe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return zo(s),null;case 31:if(s.memoizedState!==null){if(Ut(s),s.alternate===null)throw Error(o(340));mi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Ut(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));mi()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return K(We),null;case 4:return Qe(),null;case 10:return gn(s.type),null;case 22:case 23:return Ut(s),Ul(),t!==null&&K(vi),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return gn(Ze),null;case 25:return null;default:return null}}function Dh(t,s){switch(_l(s),s.tag){case 3:gn(Ze),Qe();break;case 26:case 27:case 5:zo(s);break;case 4:Qe();break;case 31:s.memoizedState!==null&&Ut(s);break;case 13:Ut(s);break;case 19:K(We);break;case 10:gn(s.type);break;case 22:case 23:Ut(s),Ul(),t!==null&&K(vi);break;case 24:gn(Ze)}}function mo(t,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var g=u.next;r=g;do{if((r.tag&t)===t){u=void 0;var y=r.create,S=r.inst;u=y(),S.destroy=u}r=r.next}while(r!==g)}}catch(A){ke(s,s.return,A)}}function Fn(t,s,r){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&t)===t){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=s;var R=r,k=A;try{k()}catch(V){ke(g,R,V)}}}u=u.next}while(u!==y)}}catch(V){ke(s,s.return,V)}}function Ph(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{wf(s,r)}catch(u){ke(t,t.return,u)}}}function Uh(t,s,r){r.props=wi(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(u){ke(t,s,u)}}function go(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof r=="function"?t.refCleanup=r(u):r.current=u}}catch(g){ke(t,s,g)}}function ln(t,s){var r=t.ref,u=t.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(g){ke(t,s,g)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){ke(t,s,g)}else r.current=null}function Oh(t){var s=t.type,r=t.memoizedProps,u=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(g){ke(t,t.return,g)}}function fu(t,s,r){try{var u=t.stateNode;k0(u,t.type,r,s),u[Et]=s}catch(g){ke(t,t.return,g)}}function kh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Wn(t.type)||t.tag===4}function hu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Wn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pu(t,s,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=dn));else if(u!==4&&(u===27&&Wn(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(pu(t,s,r),t=t.sibling;t!==null;)pu(t,s,r),t=t.sibling}function Pr(t,s,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(u!==4&&(u===27&&Wn(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Pr(t,s,r),t=t.sibling;t!==null;)Pr(t,s,r),t=t.sibling}function Lh(t){var s=t.stateNode,r=t.memoizedProps;try{for(var u=t.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);ft(s,u,r),s[lt]=t,s[Et]=r}catch(y){ke(t,t.return,y)}}var Sn=!1,nt=!1,mu=!1,qh=typeof WeakSet=="function"?WeakSet:Set,at=null;function m0(t,s){if(t=t.containerInfo,ku=ea,t=jd(t),ll(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var S=0,A=-1,R=-1,k=0,V=0,Q=t,L=null;t:for(;;){for(var H;Q!==r||g!==0&&Q.nodeType!==3||(A=S+g),Q!==y||u!==0&&Q.nodeType!==3||(R=S+u),Q.nodeType===3&&(S+=Q.nodeValue.length),(H=Q.firstChild)!==null;)L=Q,Q=H;for(;;){if(Q===t)break t;if(L===r&&++k===g&&(A=S),L===y&&++V===u&&(R=S),(H=Q.nextSibling)!==null)break;Q=L,L=Q.parentNode}Q=H}r=A===-1||R===-1?null:{start:A,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lu={focusedElem:t,selectionRange:r},ea=!1,at=s;at!==null;)if(s=at,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,at=t;else for(;at!==null;){switch(s=at,y=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)g=t[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,r=s,g=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var oe=wi(r.type,g);t=u.getSnapshotBeforeUpdate(oe,y),u.__reactInternalSnapshotBeforeUpdate=t}catch(pe){ke(r,r.return,pe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Bu(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Bu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,at=t;break}at=s.return}}function Gh(t,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:wn(t,r),u&4&&mo(5,r);break;case 1:if(wn(t,r),u&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(S){ke(r,r.return,S)}else{var g=wi(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(g,s,t.__reactInternalSnapshotBeforeUpdate)}catch(S){ke(r,r.return,S)}}u&64&&Ph(r),u&512&&go(r,r.return);break;case 3:if(wn(t,r),u&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{wf(t,s)}catch(S){ke(r,r.return,S)}}break;case 27:s===null&&u&4&&Lh(r);case 26:case 5:wn(t,r),s===null&&u&4&&Oh(r),u&512&&go(r,r.return);break;case 12:wn(t,r);break;case 31:wn(t,r),u&4&&Vh(t,r);break;case 13:wn(t,r),u&4&&zh(t,r),u&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=A0.bind(null,r),F0(t,r))));break;case 22:if(u=r.memoizedState!==null||Sn,!u){s=s!==null&&s.memoizedState!==null||nt,g=Sn;var y=nt;Sn=u,(nt=s)&&!y?An(t,r,(r.subtreeFlags&8772)!==0):wn(t,r),Sn=g,nt=y}break;case 30:break;default:wn(t,r)}}function Bh(t){var s=t.alternate;s!==null&&(t.alternate=null,Bh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ja(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,Tt=!1;function Tn(t,s,r){for(r=r.child;r!==null;)Hh(t,s,r),r=r.sibling}function Hh(t,s,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Gs,r)}catch{}switch(r.tag){case 26:nt||ln(r,s),Tn(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:nt||ln(r,s);var u=$e,g=Tt;Wn(r.type)&&($e=r.stateNode,Tt=!1),Tn(t,s,r),Co(r.stateNode),$e=u,Tt=g;break;case 5:nt||ln(r,s);case 6:if(u=$e,g=Tt,$e=null,Tn(t,s,r),$e=u,Tt=g,$e!==null)if(Tt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(r.stateNode)}catch(y){ke(r,s,y)}else try{$e.removeChild(r.stateNode)}catch(y){ke(r,s,y)}break;case 18:$e!==null&&(Tt?(t=$e,Pp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),ys(t)):Pp($e,r.stateNode));break;case 4:u=$e,g=Tt,$e=r.stateNode.containerInfo,Tt=!0,Tn(t,s,r),$e=u,Tt=g;break;case 0:case 11:case 14:case 15:Fn(2,r,s),nt||Fn(4,r,s),Tn(t,s,r);break;case 1:nt||(ln(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Uh(r,s,u)),Tn(t,s,r);break;case 21:Tn(t,s,r);break;case 22:nt=(u=nt)||r.memoizedState!==null,Tn(t,s,r),nt=u;break;default:Tn(t,s,r)}}function Vh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ys(t)}catch(r){ke(s,s.return,r)}}}function zh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ys(t)}catch(r){ke(s,s.return,r)}}function g0(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new qh),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new qh),s;default:throw Error(o(435,t.tag))}}function Ur(t,s){var r=g0(t);s.forEach(function(u){if(!r.has(u)){r.add(u);var g=C0.bind(null,t,u);u.then(g,g)}})}function wt(t,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var g=r[u],y=t,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Wn(A.type)){$e=A.stateNode,Tt=!1;break e}break;case 5:$e=A.stateNode,Tt=!1;break e;case 3:case 4:$e=A.stateNode.containerInfo,Tt=!0;break e}A=A.return}if($e===null)throw Error(o(160));Hh(y,S,g),$e=null,Tt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Fh(s,t),s=s.sibling}var Zt=null;function Fh(t,s){var r=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wt(s,t),At(t),u&4&&(Fn(3,t,t.return),mo(3,t),Fn(5,t,t.return));break;case 1:wt(s,t),At(t),u&512&&(nt||r===null||ln(r,r.return)),u&64&&Sn&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var g=Zt;if(wt(s,t),At(t),u&512&&(nt||r===null||ln(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=t.memoizedState,r===null)if(u===null)if(t.stateNode===null){e:{u=t.type,r=t.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Vs]||y[lt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),ft(y,u,r),y[lt]=t,rt(y),u=y;break e;case"link":var S=Fp("link","href",g).get(u+(r.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(A,1);break t}}y=g.createElement(u),ft(y,u,r),g.head.appendChild(y);break;case"meta":if(S=Fp("meta","content",g).get(u+(r.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(A,1);break t}}y=g.createElement(u),ft(y,u,r),g.head.appendChild(y);break;default:throw Error(o(468,u))}y[lt]=t,rt(y),u=y}t.stateNode=u}else Jp(g,t.type,t.stateNode);else t.stateNode=zp(g,u,t.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?Jp(g,t.type,t.stateNode):zp(g,u,t.memoizedProps)):u===null&&t.stateNode!==null&&fu(t,t.memoizedProps,r.memoizedProps)}break;case 27:wt(s,t),At(t),u&512&&(nt||r===null||ln(r,r.return)),r!==null&&u&4&&fu(t,t.memoizedProps,r.memoizedProps);break;case 5:if(wt(s,t),At(t),u&512&&(nt||r===null||ln(r,r.return)),t.flags&32){g=t.stateNode;try{Bi(g,"")}catch(oe){ke(t,t.return,oe)}}u&4&&t.stateNode!=null&&(g=t.memoizedProps,fu(t,g,r!==null?r.memoizedProps:g)),u&1024&&(mu=!0);break;case 6:if(wt(s,t),At(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,r=t.stateNode;try{r.nodeValue=u}catch(oe){ke(t,t.return,oe)}}break;case 3:if(Qr=null,g=Zt,Zt=Kr(s.containerInfo),wt(s,t),Zt=g,At(t),u&4&&r!==null&&r.memoizedState.isDehydrated)try{ys(s.containerInfo)}catch(oe){ke(t,t.return,oe)}mu&&(mu=!1,Jh(t));break;case 4:u=Zt,Zt=Kr(t.stateNode.containerInfo),wt(s,t),At(t),Zt=u;break;case 12:wt(s,t),At(t);break;case 31:wt(s,t),At(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Ur(t,u)));break;case 13:wt(s,t),At(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(kr=xt()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Ur(t,u)));break;case 22:g=t.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,k=Sn,V=nt;if(Sn=k||g,nt=V||R,wt(s,t),nt=V,Sn=k,At(t),u&8192)e:for(s=t.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(r===null||R||Sn||nt||Ai(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){R=r=s;try{if(y=R.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=R.stateNode;var Q=R.memoizedProps.style,L=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;A.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(oe){ke(R,R.return,oe)}}}else if(s.tag===6){if(r===null){R=s;try{R.stateNode.nodeValue=g?"":R.memoizedProps}catch(oe){ke(R,R.return,oe)}}}else if(s.tag===18){if(r===null){R=s;try{var H=R.stateNode;g?Up(H,!0):Up(R.stateNode,!1)}catch(oe){ke(R,R.return,oe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=t.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Ur(t,r))));break;case 19:wt(s,t),At(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Ur(t,u)));break;case 30:break;case 21:break;default:wt(s,t),At(t)}}function At(t){var s=t.flags;if(s&2){try{for(var r,u=t.return;u!==null;){if(kh(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var g=r.stateNode,y=hu(t);Pr(t,y,g);break;case 5:var S=r.stateNode;r.flags&32&&(Bi(S,""),r.flags&=-33);var A=hu(t);Pr(t,A,S);break;case 3:case 4:var R=r.stateNode.containerInfo,k=hu(t);pu(t,k,R);break;default:throw Error(o(161))}}catch(V){ke(t,t.return,V)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Jh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Jh(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function wn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Gh(t,s.alternate,s),s=s.sibling}function Ai(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Fn(4,s,s.return),Ai(s);break;case 1:ln(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Uh(s,s.return,r),Ai(s);break;case 27:Co(s.stateNode);case 26:case 5:ln(s,s.return),Ai(s);break;case 22:s.memoizedState===null&&Ai(s);break;case 30:Ai(s);break;default:Ai(s)}t=t.sibling}}function An(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=t,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:An(g,y,r),mo(4,y);break;case 1:if(An(g,y,r),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(k){ke(u,u.return,k)}if(u=y,g=u.updateQueue,g!==null){var A=u.stateNode;try{var R=g.shared.hiddenCallbacks;if(R!==null)for(g.shared.hiddenCallbacks=null,g=0;g<R.length;g++)Tf(R[g],A)}catch(k){ke(u,u.return,k)}}r&&S&64&&Ph(y),go(y,y.return);break;case 27:Lh(y);case 26:case 5:An(g,y,r),r&&u===null&&S&4&&Oh(y),go(y,y.return);break;case 12:An(g,y,r);break;case 31:An(g,y,r),r&&S&4&&Vh(g,y);break;case 13:An(g,y,r),r&&S&4&&zh(g,y);break;case 22:y.memoizedState===null&&An(g,y,r),go(y,y.return);break;case 30:break;default:An(g,y,r)}s=s.sibling}}function gu(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&to(r))}function yu(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&to(t))}function en(t,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$h(t,s,r,u),s=s.sibling}function $h(t,s,r,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:en(t,s,r,u),g&2048&&mo(9,s);break;case 1:en(t,s,r,u);break;case 3:en(t,s,r,u),g&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&to(t)));break;case 12:if(g&2048){en(t,s,r,u),t=s.stateNode;try{var y=s.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){ke(s,s.return,R)}}else en(t,s,r,u);break;case 31:en(t,s,r,u);break;case 13:en(t,s,r,u);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?en(t,s,r,u):yo(t,s):y._visibility&2?en(t,s,r,u):(y._visibility|=2,rs(t,s,r,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&gu(S,s);break;case 24:en(t,s,r,u),g&2048&&yu(s.alternate,s);break;default:en(t,s,r,u)}}function rs(t,s,r,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=t,S=s,A=r,R=u,k=S.flags;switch(S.tag){case 0:case 11:case 15:rs(y,S,A,R,g),mo(8,S);break;case 23:break;case 22:var V=S.stateNode;S.memoizedState!==null?V._visibility&2?rs(y,S,A,R,g):yo(y,S):(V._visibility|=2,rs(y,S,A,R,g)),g&&k&2048&&gu(S.alternate,S);break;case 24:rs(y,S,A,R,g),g&&k&2048&&yu(S.alternate,S);break;default:rs(y,S,A,R,g)}s=s.sibling}}function yo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,u=s,g=u.flags;switch(u.tag){case 22:yo(r,u),g&2048&&gu(u.alternate,u);break;case 24:yo(r,u),g&2048&&yu(u.alternate,u);break;default:yo(r,u)}s=s.sibling}}var vo=8192;function as(t,s,r){if(t.subtreeFlags&vo)for(t=t.child;t!==null;)Yh(t,s,r),t=t.sibling}function Yh(t,s,r){switch(t.tag){case 26:as(t,s,r),t.flags&vo&&t.memoizedState!==null&&nE(r,Zt,t.memoizedState,t.memoizedProps);break;case 5:as(t,s,r);break;case 3:case 4:var u=Zt;Zt=Kr(t.stateNode.containerInfo),as(t,s,r),Zt=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=vo,vo=16777216,as(t,s,r),vo=u):as(t,s,r));break;default:as(t,s,r)}}function Kh(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function _o(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];at=u,Qh(u,t)}Kh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jh(t),t=t.sibling}function jh(t){switch(t.tag){case 0:case 11:case 15:_o(t),t.flags&2048&&Fn(9,t,t.return);break;case 3:_o(t);break;case 12:_o(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Or(t)):_o(t);break;default:_o(t)}}function Or(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];at=u,Qh(u,t)}Kh(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Fn(8,s,s.return),Or(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Or(s));break;default:Or(s)}t=t.sibling}}function Qh(t,s){for(;at!==null;){var r=at;switch(r.tag){case 0:case 11:case 15:Fn(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:to(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,at=u;else e:for(r=t;at!==null;){u=at;var g=u.sibling,y=u.return;if(Bh(u),u===r){at=null;break e}if(g!==null){g.return=y,at=g;break e}at=y}}}var y0={getCacheForType:function(t){var s=ct(Ze),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return ct(Ze).controller.signal}},v0=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Be=null,Ae=null,be=0,Oe=0,Ot=null,Jn=!1,ls=!1,vu=!1,Cn=0,je=0,$n=0,Ci=0,_u=0,kt=0,us=0,Eo=null,Ct=null,Eu=!1,kr=0,Wh=0,Lr=1/0,qr=null,Yn=null,st=0,Kn=null,cs=null,bn=0,Su=0,Tu=null,Xh=null,So=0,wu=null;function Lt(){return(Pe&2)!==0&&be!==0?be&-be:U.T!==null?Nu():hd()}function Zh(){if(kt===0)if((be&536870912)===0||Ne){var t=$o;$o<<=1,($o&3932160)===0&&($o=262144),kt=t}else kt=536870912;return t=Pt.current,t!==null&&(t.flags|=32),kt}function bt(t,s,r){(t===Be&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)&&(ds(t,0),jn(t,be,kt,!1)),Hs(t,r),((Pe&2)===0||t!==Be)&&(t===Be&&((Pe&2)===0&&(Ci|=r),je===4&&jn(t,be,kt,!1)),un(t))}function ep(t,s,r){if((Pe&6)!==0)throw Error(o(327));var u=!r&&(s&127)===0&&(s&t.expiredLanes)===0||Bs(t,s),g=u?S0(t,s):Cu(t,s,!0),y=u;do{if(g===0){ls&&!u&&jn(t,s,0,!1);break}else{if(r=t.current.alternate,y&&!_0(r)){g=Cu(t,s,!1),y=!1;continue}if(g===2){if(y=s,t.errorRecoveryDisabledLanes&y)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=t;g=Eo;var R=A.current.memoizedState.isDehydrated;if(R&&(ds(A,S).flags|=256),S=Cu(A,S,!1),S!==2){if(vu&&!R){A.errorRecoveryDisabledLanes|=y,Ci|=y,g=4;break e}y=Ct,Ct=g,y!==null&&(Ct===null?Ct=y:Ct.push.apply(Ct,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){ds(t,0),jn(t,s,0,!0);break}e:{switch(u=t,y=g,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:jn(u,s,kt,!Jn);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=kr+300-xt(),10<g)){if(jn(u,s,kt,!Jn),Ko(u,0,!0)!==0)break e;bn=s,u.timeoutHandle=Mp(tp.bind(null,u,r,Ct,qr,Eu,s,kt,Ci,us,Jn,y,"Throttled",-0,0),g);break e}tp(u,r,Ct,qr,Eu,s,kt,Ci,us,Jn,y,null,-0,0)}}break}while(!0);un(t)}function tp(t,s,r,u,g,y,S,A,R,k,V,Q,L,H){if(t.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:dn},Yh(s,y,Q);var oe=(y&62914560)===y?kr-xt():(y&4194048)===y?Wh-xt():0;if(oe=iE(Q,oe),oe!==null){bn=y,t.cancelPendingCommit=oe(up.bind(null,t,s,y,r,u,g,S,A,R,V,Q,null,L,H)),jn(t,y,S,!k);return}}up(t,s,y,r,u,g,S,A,R)}function _0(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var g=r[u],y=g.getSnapshot;g=g.value;try{if(!Mt(y(),g))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function jn(t,s,r,u){s&=~_u,s&=~Ci,t.suspendedLanes|=s,t.pingedLanes&=~s,u&&(t.warmLanes|=s),u=t.expirationTimes;for(var g=s;0<g;){var y=31-It(g),S=1<<y;u[y]=-1,g&=~S}r!==0&&cd(t,r,s)}function Gr(){return(Pe&6)===0?(To(0),!1):!0}function Au(){if(Ae!==null){if(Oe===0)var t=Ae.return;else t=Ae,mn=gi=null,Bl(t),ts=null,io=0,t=Ae;for(;t!==null;)Dh(t.alternate,t),t=t.return;Ae=null}}function ds(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,G0(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),bn=0,Au(),Be=t,Ae=r=hn(t.current,null),be=s,Oe=0,Ot=null,Jn=!1,ls=Bs(t,s),vu=!1,us=kt=_u=Ci=$n=je=0,Ct=Eo=null,Eu=!1,(s&8)!==0&&(s|=s&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=s;0<u;){var g=31-It(u),y=1<<g;s|=t[g],u&=~y}return Cn=s,rr(),r}function np(t,s){Se=null,U.H=fo,s===es||s===pr?(s=vf(),Oe=3):s===xl?(s=vf(),Oe=4):Oe=s===nu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ot=s,Ae===null&&(je=1,xr(t,zt(s,t.current)))}function ip(){var t=Pt.current;return t===null?!0:(be&4194048)===be?Yt===null:(be&62914560)===be||(be&536870912)!==0?t===Yt:!1}function sp(){var t=U.H;return U.H=fo,t===null?fo:t}function op(){var t=U.A;return U.A=y0,t}function Br(){je=4,Jn||(be&4194048)!==be&&Pt.current!==null||(ls=!0),($n&134217727)===0&&(Ci&134217727)===0||Be===null||jn(Be,be,kt,!1)}function Cu(t,s,r){var u=Pe;Pe|=2;var g=sp(),y=op();(Be!==t||be!==s)&&(qr=null,ds(t,s)),s=!1;var S=je;e:do try{if(Oe!==0&&Ae!==null){var A=Ae,R=Ot;switch(Oe){case 8:Au(),S=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(s=!0);var k=Oe;if(Oe=0,Ot=null,fs(t,A,R,k),r&&ls){S=0;break e}break;default:k=Oe,Oe=0,Ot=null,fs(t,A,R,k)}}E0(),S=je;break}catch(V){np(t,V)}while(!0);return s&&t.shellSuspendCounter++,mn=gi=null,Pe=u,U.H=g,U.A=y,Ae===null&&(Be=null,be=0,rr()),S}function E0(){for(;Ae!==null;)rp(Ae)}function S0(t,s){var r=Pe;Pe|=2;var u=sp(),g=op();Be!==t||be!==s?(qr=null,Lr=xt()+500,ds(t,s)):ls=Bs(t,s);e:do try{if(Oe!==0&&Ae!==null){s=Ae;var y=Ot;t:switch(Oe){case 1:Oe=0,Ot=null,fs(t,s,y,1);break;case 2:case 9:if(gf(y)){Oe=0,Ot=null,ap(s);break}s=function(){Oe!==2&&Oe!==9||Be!==t||(Oe=7),un(t)},y.then(s,s);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:gf(y)?(Oe=0,Ot=null,ap(s)):(Oe=0,Ot=null,fs(t,s,y,7));break;case 5:var S=null;switch(Ae.tag){case 26:S=Ae.memoizedState;case 5:case 27:var A=Ae;if(S?$p(S):A.stateNode.complete){Oe=0,Ot=null;var R=A.sibling;if(R!==null)Ae=R;else{var k=A.return;k!==null?(Ae=k,Hr(k)):Ae=null}break t}}Oe=0,Ot=null,fs(t,s,y,5);break;case 6:Oe=0,Ot=null,fs(t,s,y,6);break;case 8:Au(),je=6;break e;default:throw Error(o(462))}}T0();break}catch(V){np(t,V)}while(!0);return mn=gi=null,U.H=u,U.A=g,Pe=r,Ae!==null?0:(Be=null,be=0,rr(),je)}function T0(){for(;Ae!==null&&!Jv();)rp(Ae)}function rp(t){var s=Ih(t.alternate,t,Cn);t.memoizedProps=t.pendingProps,s===null?Hr(t):Ae=s}function ap(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=Ah(r,s,s.pendingProps,s.type,void 0,be);break;case 11:s=Ah(r,s,s.pendingProps,s.type.render,s.ref,be);break;case 5:Bl(s);default:Dh(r,s),s=Ae=of(s,Cn),s=Ih(r,s,Cn)}t.memoizedProps=t.pendingProps,s===null?Hr(t):Ae=s}function fs(t,s,r,u){mn=gi=null,Bl(s),ts=null,io=0;var g=s.return;try{if(c0(t,g,s,r,be)){je=1,xr(t,zt(r,t.current)),Ae=null;return}}catch(y){if(g!==null)throw Ae=g,y;je=1,xr(t,zt(r,t.current)),Ae=null;return}s.flags&32768?(Ne||u===1?t=!0:ls||(be&536870912)!==0?t=!1:(Jn=t=!0,(u===2||u===9||u===3||u===6)&&(u=Pt.current,u!==null&&u.tag===13&&(u.flags|=16384))),lp(s,t)):Hr(s)}function Hr(t){var s=t;do{if((s.flags&32768)!==0){lp(s,Jn);return}t=s.return;var r=h0(s.alternate,s,Cn);if(r!==null){Ae=r;return}if(s=s.sibling,s!==null){Ae=s;return}Ae=s=t}while(s!==null);je===0&&(je=5)}function lp(t,s){do{var r=p0(t.alternate,t);if(r!==null){r.flags&=32767,Ae=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Ae=t;return}Ae=t=r}while(t!==null);je=6,Ae=null}function up(t,s,r,u,g,y,S,A,R){t.cancelPendingCommit=null;do Vr();while(st!==0);if((Pe&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=hl,t_(t,r,y,S,A,R),t===Be&&(Ae=Be=null,be=0),cs=s,Kn=t,bn=r,Su=y,Tu=g,Xh=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,b0(Fo,function(){return pp(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,g=G.p,G.p=2,S=Pe,Pe|=4;try{m0(t,s,r)}finally{Pe=S,G.p=g,U.T=u}}st=1,cp(),dp(),fp()}}function cp(){if(st===1){st=0;var t=Kn,s=cs,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=U.T,U.T=null;var u=G.p;G.p=2;var g=Pe;Pe|=4;try{Fh(s,t);var y=Lu,S=jd(t.containerInfo),A=y.focusedElem,R=y.selectionRange;if(S!==A&&A&&A.ownerDocument&&Kd(A.ownerDocument.documentElement,A)){if(R!==null&&ll(A)){var k=R.start,V=R.end;if(V===void 0&&(V=k),"selectionStart"in A)A.selectionStart=k,A.selectionEnd=Math.min(V,A.value.length);else{var Q=A.ownerDocument||document,L=Q&&Q.defaultView||window;if(L.getSelection){var H=L.getSelection(),oe=A.textContent.length,pe=Math.min(R.start,oe),Ge=R.end===void 0?pe:Math.min(R.end,oe);!H.extend&&pe>Ge&&(S=Ge,Ge=pe,pe=S);var P=Yd(A,pe),I=Yd(A,Ge);if(P&&I&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==I.node||H.focusOffset!==I.offset)){var O=Q.createRange();O.setStart(P.node,P.offset),H.removeAllRanges(),pe>Ge?(H.addRange(O),H.extend(I.node,I.offset)):(O.setEnd(I.node,I.offset),H.addRange(O))}}}}for(Q=[],H=A;H=H.parentNode;)H.nodeType===1&&Q.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Q.length;A++){var F=Q[A];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}ea=!!ku,Lu=ku=null}finally{Pe=g,G.p=u,U.T=r}}t.current=s,st=2}}function dp(){if(st===2){st=0;var t=Kn,s=cs,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=U.T,U.T=null;var u=G.p;G.p=2;var g=Pe;Pe|=4;try{Gh(t,s.alternate,s)}finally{Pe=g,G.p=u,U.T=r}}st=3}}function fp(){if(st===4||st===3){st=0,$v();var t=Kn,s=cs,r=bn,u=Xh;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?st=5:(st=0,cs=Kn=null,hp(t,t.pendingLanes));var g=t.pendingLanes;if(g===0&&(Yn=null),za(r),s=s.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Gs,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=U.T,g=G.p,G.p=2,U.T=null;try{for(var y=t.onRecoverableError,S=0;S<u.length;S++){var A=u[S];y(A.value,{componentStack:A.stack})}}finally{U.T=s,G.p=g}}(bn&3)!==0&&Vr(),un(t),g=t.pendingLanes,(r&261930)!==0&&(g&42)!==0?t===wu?So++:(So=0,wu=t):So=0,To(0)}}function hp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,to(s)))}function Vr(){return cp(),dp(),fp(),pp()}function pp(){if(st!==5)return!1;var t=Kn,s=Su;Su=0;var r=za(bn),u=U.T,g=G.p;try{G.p=32>r?32:r,U.T=null,r=Tu,Tu=null;var y=Kn,S=bn;if(st=0,cs=Kn=null,bn=0,(Pe&6)!==0)throw Error(o(331));var A=Pe;if(Pe|=4,jh(y.current),$h(y,y.current,S,r),Pe=A,To(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Gs,y)}catch{}return!0}finally{G.p=g,U.T=u,hp(t,s)}}function mp(t,s,r){s=zt(r,s),s=tu(t.stateNode,s,2),t=Hn(t,s,2),t!==null&&(Hs(t,2),un(t))}function ke(t,s,r){if(t.tag===3)mp(t,t,r);else for(;s!==null;){if(s.tag===3){mp(s,t,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Yn===null||!Yn.has(u))){t=zt(r,t),r=gh(2),u=Hn(s,r,2),u!==null&&(yh(r,u,s,t),Hs(u,2),un(u));break}}s=s.return}}function bu(t,s,r){var u=t.pingCache;if(u===null){u=t.pingCache=new v0;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(r)||(vu=!0,g.add(r),t=w0.bind(null,t,s,r),s.then(t,t))}function w0(t,s,r){var u=t.pingCache;u!==null&&u.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Be===t&&(be&r)===r&&(je===4||je===3&&(be&62914560)===be&&300>xt()-kr?(Pe&2)===0&&ds(t,0):_u|=r,us===be&&(us=0)),un(t)}function gp(t,s){s===0&&(s=ud()),t=hi(t,s),t!==null&&(Hs(t,s),un(t))}function A0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),gp(t,r)}function C0(t,s){var r=0;switch(t.tag){case 31:case 13:var u=t.stateNode,g=t.memoizedState;g!==null&&(r=g.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),gp(t,r)}function b0(t,s){return Ga(t,s)}var zr=null,hs=null,Ru=!1,Fr=!1,xu=!1,Qn=0;function un(t){t!==hs&&t.next===null&&(hs===null?zr=hs=t:hs=hs.next=t),Fr=!0,Ru||(Ru=!0,x0())}function To(t,s){if(!xu&&Fr){xu=!0;do for(var r=!1,u=zr;u!==null;){if(t!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-It(42|t)+1)-1,y&=g&~(S&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Ep(u,y))}else y=be,y=Ko(u,u===Be?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Bs(u,y)||(r=!0,Ep(u,y));u=u.next}while(r);xu=!1}}function R0(){yp()}function yp(){Fr=Ru=!1;var t=0;Qn!==0&&q0()&&(t=Qn);for(var s=xt(),r=null,u=zr;u!==null;){var g=u.next,y=vp(u,s);y===0?(u.next=null,r===null?zr=g:r.next=g,g===null&&(hs=r)):(r=u,(t!==0||(y&3)!==0)&&(Fr=!0)),u=g}st!==0&&st!==5||To(t),Qn!==0&&(Qn=0)}function vp(t,s){for(var r=t.suspendedLanes,u=t.pingedLanes,g=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var S=31-It(y),A=1<<S,R=g[S];R===-1?((A&r)===0||(A&u)!==0)&&(g[S]=e_(A,s)):R<=s&&(t.expiredLanes|=A),y&=~A}if(s=Be,r=be,r=Ko(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,r===0||t===s&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&Ba(u),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Bs(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(u!==null&&Ba(u),za(r)){case 2:case 8:r=ad;break;case 32:r=Fo;break;case 268435456:r=ld;break;default:r=Fo}return u=_p.bind(null,t),r=Ga(r,u),t.callbackPriority=s,t.callbackNode=r,s}return u!==null&&u!==null&&Ba(u),t.callbackPriority=2,t.callbackNode=null,2}function _p(t,s){if(st!==0&&st!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Vr()&&t.callbackNode!==r)return null;var u=be;return u=Ko(t,t===Be?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(ep(t,u,s),vp(t,xt()),t.callbackNode!=null&&t.callbackNode===r?_p.bind(null,t):null)}function Ep(t,s){if(Vr())return null;ep(t,s,!0)}function x0(){B0(function(){(Pe&6)!==0?Ga(rd,R0):yp()})}function Nu(){if(Qn===0){var t=Xi;t===0&&(t=Jo,Jo<<=1,(Jo&261888)===0&&(Jo=256)),Qn=t}return Qn}function Sp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xo(""+t)}function Tp(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function N0(t,s,r,u,g){if(s==="submit"&&r&&r.stateNode===g){var y=Sp((g[Et]||null).action),S=u.submitter;S&&(s=(s=S[Et]||null)?Sp(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var A=new nr("action","action",null,u,g);t.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qn!==0){var R=S?Tp(g,S):new FormData(g);jl(r,{pending:!0,data:R,method:g.method,action:y},null,R)}}else typeof y=="function"&&(A.preventDefault(),R=S?Tp(g,S):new FormData(g),jl(r,{pending:!0,data:R,method:g.method,action:y},y,R))},currentTarget:g}]})}}for(var Iu=0;Iu<fl.length;Iu++){var Mu=fl[Iu],I0=Mu.toLowerCase(),M0=Mu[0].toUpperCase()+Mu.slice(1);Xt(I0,"on"+M0)}Xt(Xd,"onAnimationEnd"),Xt(Zd,"onAnimationIteration"),Xt(ef,"onAnimationStart"),Xt("dblclick","onDoubleClick"),Xt("focusin","onFocus"),Xt("focusout","onBlur"),Xt(Y_,"onTransitionRun"),Xt(K_,"onTransitionStart"),Xt(j_,"onTransitionCancel"),Xt(tf,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wo));function wp(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var u=t[r],g=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var S=u.length-1;0<=S;S--){var A=u[S],R=A.instance,k=A.currentTarget;if(A=A.listener,R!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=k;try{y(g)}catch(V){or(V)}g.currentTarget=null,y=R}else for(S=0;S<u.length;S++){if(A=u[S],R=A.instance,k=A.currentTarget,A=A.listener,R!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=k;try{y(g)}catch(V){or(V)}g.currentTarget=null,y=R}}}}function Ce(t,s){var r=s[Fa];r===void 0&&(r=s[Fa]=new Set);var u=t+"__bubble";r.has(u)||(Ap(s,t,2,!1),r.add(u))}function Du(t,s,r){var u=0;s&&(u|=4),Ap(r,t,u,s)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function Pu(t){if(!t[Jr]){t[Jr]=!0,gd.forEach(function(r){r!=="selectionchange"&&(D0.has(r)||Du(r,!1,t),Du(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Jr]||(s[Jr]=!0,Du("selectionchange",!1,s))}}function Ap(t,s,r,u){switch(Zp(s)){case 2:var g=rE;break;case 8:g=aE;break;default:g=Ku}r=g.bind(null,s,r,t),g=void 0,!Za||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?t.addEventListener(s,r,{capture:!0,passive:g}):t.addEventListener(s,r,!0):g!==void 0?t.addEventListener(s,r,{passive:g}):t.addEventListener(s,r,!1)}function Uu(t,s,r,u,g){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var R=S.tag;if((R===3||R===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=Oi(A),S===null)return;if(R=S.tag,R===5||R===6||R===26||R===27){u=y=S;continue e}A=A.parentNode}}u=u.return}xd(function(){var k=y,V=Wa(r),Q=[];e:{var L=nf.get(t);if(L!==void 0){var H=nr,oe=t;switch(t){case"keypress":if(er(r)===0)break e;case"keydown":case"keyup":H=C_;break;case"focusin":oe="focus",H=il;break;case"focusout":oe="blur",H=il;break;case"beforeblur":case"afterblur":H=il;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=h_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=x_;break;case Xd:case Zd:case ef:H=g_;break;case tf:H=I_;break;case"scroll":case"scrollend":H=d_;break;case"wheel":H=D_;break;case"copy":case"cut":case"paste":H=v_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Pd;break;case"toggle":case"beforetoggle":H=U_}var pe=(s&4)!==0,Ge=!pe&&(t==="scroll"||t==="scrollend"),P=pe?L!==null?L+"Capture":null:L;pe=[];for(var I=k,O;I!==null;){var F=I;if(O=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||O===null||P===null||(F=Fs(I,P),F!=null&&pe.push(Ao(I,F,O))),Ge)break;I=I.return}0<pe.length&&(L=new H(L,oe,null,r,V),Q.push({event:L,listeners:pe}))}}if((s&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",L&&r!==Qa&&(oe=r.relatedTarget||r.fromElement)&&(Oi(oe)||oe[Ui]))break e;if((H||L)&&(L=V.window===V?V:(L=V.ownerDocument)?L.defaultView||L.parentWindow:window,H?(oe=r.relatedTarget||r.toElement,H=k,oe=oe?Oi(oe):null,oe!==null&&(Ge=l(oe),pe=oe.tag,oe!==Ge||pe!==5&&pe!==27&&pe!==6)&&(oe=null)):(H=null,oe=k),H!==oe)){if(pe=Md,F="onMouseLeave",P="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Pd,F="onPointerLeave",P="onPointerEnter",I="pointer"),Ge=H==null?L:zs(H),O=oe==null?L:zs(oe),L=new pe(F,I+"leave",H,r,V),L.target=Ge,L.relatedTarget=O,F=null,Oi(V)===k&&(pe=new pe(P,I+"enter",oe,r,V),pe.target=O,pe.relatedTarget=Ge,F=pe),Ge=F,H&&oe)t:{for(pe=P0,P=H,I=oe,O=0,F=P;F;F=pe(F))O++;F=0;for(var he=I;he;he=pe(he))F++;for(;0<O-F;)P=pe(P),O--;for(;0<F-O;)I=pe(I),F--;for(;O--;){if(P===I||I!==null&&P===I.alternate){pe=P;break t}P=pe(P),I=pe(I)}pe=null}else pe=null;H!==null&&Cp(Q,L,H,pe,!1),oe!==null&&Ge!==null&&Cp(Q,Ge,oe,pe,!0)}}e:{if(L=k?zs(k):window,H=L.nodeName&&L.nodeName.toLowerCase(),H==="select"||H==="input"&&L.type==="file")var Ie=Hd;else if(Gd(L))if(Vd)Ie=F_;else{Ie=V_;var le=H_}else H=L.nodeName,!H||H.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?k&&ja(k.elementType)&&(Ie=Hd):Ie=z_;if(Ie&&(Ie=Ie(t,k))){Bd(Q,Ie,r,V);break e}le&&le(t,L,k),t==="focusout"&&k&&L.type==="number"&&k.memoizedProps.value!=null&&Ka(L,"number",L.value)}switch(le=k?zs(k):window,t){case"focusin":(Gd(le)||le.contentEditable==="true")&&(Fi=le,ul=k,Xs=null);break;case"focusout":Xs=ul=Fi=null;break;case"mousedown":cl=!0;break;case"contextmenu":case"mouseup":case"dragend":cl=!1,Qd(Q,r,V);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Qd(Q,r,V)}var Te;if(ol)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else zi?Ld(t,r)&&(Re="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(Ud&&r.locale!=="ko"&&(zi||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&zi&&(Te=Nd()):(Un=V,el="value"in Un?Un.value:Un.textContent,zi=!0)),le=$r(k,Re),0<le.length&&(Re=new Dd(Re,t,null,r,V),Q.push({event:Re,listeners:le}),Te?Re.data=Te:(Te=qd(r),Te!==null&&(Re.data=Te)))),(Te=k_?L_(t,r):q_(t,r))&&(Re=$r(k,"onBeforeInput"),0<Re.length&&(le=new Dd("onBeforeInput","beforeinput",null,r,V),Q.push({event:le,listeners:Re}),le.data=Te)),N0(Q,t,k,r,V)}wp(Q,s)})}function Ao(t,s,r){return{instance:t,listener:s,currentTarget:r}}function $r(t,s){for(var r=s+"Capture",u=[];t!==null;){var g=t,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Fs(t,r),g!=null&&u.unshift(Ao(t,g,y)),g=Fs(t,s),g!=null&&u.push(Ao(t,g,y))),t.tag===3)return u;t=t.return}return[]}function P0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Cp(t,s,r,u,g){for(var y=s._reactName,S=[];r!==null&&r!==u;){var A=r,R=A.alternate,k=A.stateNode;if(A=A.tag,R!==null&&R===u)break;A!==5&&A!==26&&A!==27||k===null||(R=k,g?(k=Fs(r,y),k!=null&&S.unshift(Ao(r,k,R))):g||(k=Fs(r,y),k!=null&&S.push(Ao(r,k,R)))),r=r.return}S.length!==0&&t.push({event:s,listeners:S})}var U0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function bp(t){return(typeof t=="string"?t:""+t).replace(U0,`
`).replace(O0,"")}function Rp(t,s){return s=bp(s),bp(t)===s}function qe(t,s,r,u,g,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Bi(t,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Bi(t,""+u);break;case"className":Qo(t,"class",u);break;case"tabIndex":Qo(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qo(t,r,u);break;case"style":bd(t,u,y);break;case"data":if(s!=="object"){Qo(t,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=Xo(""+u),t.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&qe(t,s,"name",g.name,g,null),qe(t,s,"formEncType",g.formEncType,g,null),qe(t,s,"formMethod",g.formMethod,g,null),qe(t,s,"formTarget",g.formTarget,g,null)):(qe(t,s,"encType",g.encType,g,null),qe(t,s,"method",g.method,g,null),qe(t,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=Xo(""+u),t.setAttribute(r,u);break;case"onClick":u!=null&&(t.onclick=dn);break;case"onScroll":u!=null&&Ce("scroll",t);break;case"onScrollEnd":u!=null&&Ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}r=Xo(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""+u):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":u===!0?t.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,u):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(r,u):t.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(r):t.setAttribute(r,u);break;case"popover":Ce("beforetoggle",t),Ce("toggle",t),jo(t,"popover",u);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":jo(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=u_.get(r)||r,jo(t,r,u))}}function Ou(t,s,r,u,g,y){switch(r){case"style":bd(t,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof u=="string"?Bi(t,u):(typeof u=="number"||typeof u=="bigint")&&Bi(t,""+u);break;case"onScroll":u!=null&&Ce("scroll",t);break;case"onScrollEnd":u!=null&&Ce("scrollend",t);break;case"onClick":u!=null&&(t.onclick=dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),s=r.slice(2,g?r.length-7:void 0),y=t[Et]||null,y=y!=null?y[r]:null,typeof y=="function"&&t.removeEventListener(s,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,u,g);break e}r in t?t[r]=u:u===!0?t.setAttribute(r,""):jo(t,r,u)}}}function ft(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",t),Ce("load",t);var u=!1,g=!1,y;for(y in r)if(r.hasOwnProperty(y)){var S=r[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:qe(t,s,y,S,r,null)}}g&&qe(t,s,"srcSet",r.srcSet,r,null),u&&qe(t,s,"src",r.src,r,null);return;case"input":Ce("invalid",t);var A=y=S=g=null,R=null,k=null;for(u in r)if(r.hasOwnProperty(u)){var V=r[u];if(V!=null)switch(u){case"name":g=V;break;case"type":S=V;break;case"checked":R=V;break;case"defaultChecked":k=V;break;case"value":y=V;break;case"defaultValue":A=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,s));break;default:qe(t,s,u,V,r,null)}}Td(t,y,A,R,k,S,g,!1);return;case"select":Ce("invalid",t),u=S=y=null;for(g in r)if(r.hasOwnProperty(g)&&(A=r[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:qe(t,s,g,A,r,null)}s=y,r=S,t.multiple=!!u,s!=null?Gi(t,!!u,s,!1):r!=null&&Gi(t,!!u,r,!0);return;case"textarea":Ce("invalid",t),y=g=u=null;for(S in r)if(r.hasOwnProperty(S)&&(A=r[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:qe(t,s,S,A,r,null)}Ad(t,u,g,y);return;case"option":for(R in r)if(r.hasOwnProperty(R)&&(u=r[R],u!=null))switch(R){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:qe(t,s,R,u,r,null)}return;case"dialog":Ce("beforetoggle",t),Ce("toggle",t),Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":Ce("load",t);break;case"video":case"audio":for(u=0;u<wo.length;u++)Ce(wo[u],t);break;case"image":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"embed":case"source":case"link":Ce("error",t),Ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in r)if(r.hasOwnProperty(k)&&(u=r[k],u!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:qe(t,s,k,u,r,null)}return;default:if(ja(s)){for(V in r)r.hasOwnProperty(V)&&(u=r[V],u!==void 0&&Ou(t,s,V,u,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(u=r[A],u!=null&&qe(t,s,A,u,r,null))}function k0(t,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,A=null,R=null,k=null,V=null;for(H in r){var Q=r[H];if(r.hasOwnProperty(H)&&Q!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":R=Q;default:u.hasOwnProperty(H)||qe(t,s,H,null,u,Q)}}for(var L in u){var H=u[L];if(Q=r[L],u.hasOwnProperty(L)&&(H!=null||Q!=null))switch(L){case"type":y=H;break;case"name":g=H;break;case"checked":k=H;break;case"defaultChecked":V=H;break;case"value":S=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,s));break;default:H!==Q&&qe(t,s,L,H,u,Q)}}Ya(t,S,A,R,k,V,y,g);return;case"select":H=S=A=L=null;for(y in r)if(R=r[y],r.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":H=R;default:u.hasOwnProperty(y)||qe(t,s,y,null,u,R)}for(g in u)if(y=u[g],R=r[g],u.hasOwnProperty(g)&&(y!=null||R!=null))switch(g){case"value":L=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==R&&qe(t,s,g,y,u,R)}s=A,r=S,u=H,L!=null?Gi(t,!!r,L,!1):!!u!=!!r&&(s!=null?Gi(t,!!r,s,!0):Gi(t,!!r,r?[]:"",!1));return;case"textarea":H=L=null;for(A in r)if(g=r[A],r.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:qe(t,s,A,null,u,g)}for(S in u)if(g=u[S],y=r[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":L=g;break;case"defaultValue":H=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==y&&qe(t,s,S,g,u,y)}wd(t,L,H);return;case"option":for(var oe in r)if(L=r[oe],r.hasOwnProperty(oe)&&L!=null&&!u.hasOwnProperty(oe))switch(oe){case"selected":t.selected=!1;break;default:qe(t,s,oe,null,u,L)}for(R in u)if(L=u[R],H=r[R],u.hasOwnProperty(R)&&L!==H&&(L!=null||H!=null))switch(R){case"selected":t.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:qe(t,s,R,L,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in r)L=r[pe],r.hasOwnProperty(pe)&&L!=null&&!u.hasOwnProperty(pe)&&qe(t,s,pe,null,u,L);for(k in u)if(L=u[k],H=r[k],u.hasOwnProperty(k)&&L!==H&&(L!=null||H!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:qe(t,s,k,L,u,H)}return;default:if(ja(s)){for(var Ge in r)L=r[Ge],r.hasOwnProperty(Ge)&&L!==void 0&&!u.hasOwnProperty(Ge)&&Ou(t,s,Ge,void 0,u,L);for(V in u)L=u[V],H=r[V],!u.hasOwnProperty(V)||L===H||L===void 0&&H===void 0||Ou(t,s,V,L,u,H);return}}for(var P in r)L=r[P],r.hasOwnProperty(P)&&L!=null&&!u.hasOwnProperty(P)&&qe(t,s,P,null,u,L);for(Q in u)L=u[Q],H=r[Q],!u.hasOwnProperty(Q)||L===H||L==null&&H==null||qe(t,s,Q,L,u,H)}function xp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var g=r[u],y=g.transferSize,S=g.initiatorType,A=g.duration;if(y&&A&&xp(S)){for(S=0,A=g.responseEnd,u+=1;u<r.length;u++){var R=r[u],k=R.startTime;if(k>A)break;var V=R.transferSize,Q=R.initiatorType;V&&xp(Q)&&(R=R.responseEnd,S+=V*(R<A?1:(A-k)/(R-k)))}if(--u,s+=8*(y+S)/(g.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ku=null,Lu=null;function Yr(t){return t.nodeType===9?t:t.ownerDocument}function Np(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ip(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function qu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gu=null;function q0(){var t=window.event;return t&&t.type==="popstate"?t===Gu?!1:(Gu=t,!0):(Gu=null,!1)}var Mp=typeof setTimeout=="function"?setTimeout:void 0,G0=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,B0=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(t){return Dp.resolve(null).then(t).catch(H0)}:Mp;function H0(t){setTimeout(function(){throw t})}function Wn(t){return t==="head"}function Pp(t,s){var r=s,u=0;do{var g=r.nextSibling;if(t.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(u===0){t.removeChild(g),ys(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Co(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Co(r);for(var y=r.firstChild;y;){var S=y.nextSibling,A=y.nodeName;y[Vs]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=S}}else r==="body"&&Co(t.ownerDocument.body);r=g}while(r);ys(s)}function Up(t,s){var r=t;t=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=u}while(r)}function Bu(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Bu(r),Ja(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function V0(t,s,r,u){for(;t.nodeType===1;){var g=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[Vs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==g.rel||t.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||t.getAttribute("title")!==(g.title==null?null:g.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(g.src==null?null:g.src)||t.getAttribute("type")!==(g.type==null?null:g.type)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=Kt(t.nextSibling),t===null)break}return null}function z0(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Kt(t.nextSibling),t===null))return null;return t}function Op(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Kt(t.nextSibling),t===null))return null;return t}function Hu(t){return t.data==="$?"||t.data==="$~"}function Vu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function F0(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function Kt(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var zu=null;function kp(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return Kt(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function Lp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function qp(t,s,r){switch(s=Yr(r),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Co(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ja(t)}var jt=new Map,Gp=new Set;function Kr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Rn=G.d;G.d={f:J0,r:$0,D:Y0,C:K0,L:j0,m:Q0,X:X0,S:W0,M:Z0};function J0(){var t=Rn.f(),s=Gr();return t||s}function $0(t){var s=ki(t);s!==null&&s.tag===5&&s.type==="form"?nh(s):Rn.r(t)}var ps=typeof document>"u"?null:document;function Bp(t,s,r){var u=ps;if(u&&typeof s=="string"&&s){var g=Ht(s);g='link[rel="'+t+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),Gp.has(g)||(Gp.add(g),t={rel:t,crossOrigin:r,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),ft(s,"link",t),rt(s),u.head.appendChild(s)))}}function Y0(t){Rn.D(t),Bp("dns-prefetch",t,null)}function K0(t,s){Rn.C(t,s),Bp("preconnect",t,s)}function j0(t,s,r){Rn.L(t,s,r);var u=ps;if(u&&t&&s){var g='link[rel="preload"][as="'+Ht(s)+'"]';s==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Ht(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Ht(r.imageSizes)+'"]')):g+='[href="'+Ht(t)+'"]';var y=g;switch(s){case"style":y=ms(t);break;case"script":y=gs(t)}jt.has(y)||(t=_({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),jt.set(y,t),u.querySelector(g)!==null||s==="style"&&u.querySelector(bo(y))||s==="script"&&u.querySelector(Ro(y))||(s=u.createElement("link"),ft(s,"link",t),rt(s),u.head.appendChild(s)))}}function Q0(t,s){Rn.m(t,s);var r=ps;if(r&&t){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Ht(u)+'"][href="'+Ht(t)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=gs(t)}if(!jt.has(y)&&(t=_({rel:"modulepreload",href:t},s),jt.set(y,t),r.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ro(y)))return}u=r.createElement("link"),ft(u,"link",t),rt(u),r.head.appendChild(u)}}}function W0(t,s,r){Rn.S(t,s,r);var u=ps;if(u&&t){var g=Li(u).hoistableStyles,y=ms(t);s=s||"default";var S=g.get(y);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(bo(y)))A.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},r),(r=jt.get(y))&&Fu(t,r);var R=S=u.createElement("link");rt(R),ft(R,"link",t),R._p=new Promise(function(k,V){R.onload=k,R.onerror=V}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,jr(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(y,S)}}}function X0(t,s){Rn.X(t,s);var r=ps;if(r&&t){var u=Li(r).hoistableScripts,g=gs(t),y=u.get(g);y||(y=r.querySelector(Ro(g)),y||(t=_({src:t,async:!0},s),(s=jt.get(g))&&Ju(t,s),y=r.createElement("script"),rt(y),ft(y,"link",t),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Z0(t,s){Rn.M(t,s);var r=ps;if(r&&t){var u=Li(r).hoistableScripts,g=gs(t),y=u.get(g);y||(y=r.querySelector(Ro(g)),y||(t=_({src:t,async:!0,type:"module"},s),(s=jt.get(g))&&Ju(t,s),y=r.createElement("script"),rt(y),ft(y,"link",t),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Hp(t,s,r,u){var g=(g=we.current)?Kr(g):null;if(!g)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=ms(r.href),r=Li(g).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=ms(r.href);var y=Li(g).hoistableStyles,S=y.get(t);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,S),(y=g.querySelector(bo(t)))&&!y._p&&(S.instance=y,S.state.loading=5),jt.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},jt.set(t,r),y||eE(g,t,r,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=gs(r),r=Li(g).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function ms(t){return'href="'+Ht(t)+'"'}function bo(t){return'link[rel="stylesheet"]['+t+"]"}function Vp(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function eE(t,s,r,u){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=t.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ft(s,"link",r),rt(s),t.head.appendChild(s))}function gs(t){return'[src="'+Ht(t)+'"]'}function Ro(t){return"script[async]"+t}function zp(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=t.querySelector('style[data-href~="'+Ht(r.href)+'"]');if(u)return s.instance=u,rt(u),u;var g=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),rt(u),ft(u,"style",g),jr(u,r.precedence,t),s.instance=u;case"stylesheet":g=ms(r.href);var y=t.querySelector(bo(g));if(y)return s.state.loading|=4,s.instance=y,rt(y),y;u=Vp(r),(g=jt.get(g))&&Fu(u,g),y=(t.ownerDocument||t).createElement("link"),rt(y);var S=y;return S._p=new Promise(function(A,R){S.onload=A,S.onerror=R}),ft(y,"link",u),s.state.loading|=4,jr(y,r.precedence,t),s.instance=y;case"script":return y=gs(r.src),(g=t.querySelector(Ro(y)))?(s.instance=g,rt(g),g):(u=r,(g=jt.get(y))&&(u=_({},r),Ju(u,g)),t=t.ownerDocument||t,g=t.createElement("script"),rt(g),ft(g,"link",u),t.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,jr(u,r.precedence,t));return s.instance}function jr(t,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===s)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(t,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Fu(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Ju(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Qr=null;function Fp(t,s,r){if(Qr===null){var u=new Map,g=Qr=new Map;g.set(r,u)}else g=Qr,u=g.get(r),u||(u=new Map,g.set(r,u));if(u.has(t))return u;for(u.set(t,null),r=r.getElementsByTagName(t),g=0;g<r.length;g++){var y=r[g];if(!(y[Vs]||y[lt]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=t+S;var A=u.get(S);A?A.push(y):u.set(S,[y])}}return u}function Jp(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function tE(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $p(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function nE(t,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=ms(u.href),y=s.querySelector(bo(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Wr.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=y,rt(y);return}y=s.ownerDocument||s,u=Vp(u),(g=jt.get(g))&&Fu(u,g),y=y.createElement("link"),rt(y);var S=y;S._p=new Promise(function(A,R){S.onload=A,S.onerror=R}),ft(y,"link",u),r.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Wr.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var $u=0;function iE(t,s){return t.stylesheets&&t.count===0&&Zr(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var u=setTimeout(function(){if(t.stylesheets&&Zr(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+s);0<t.imgBytes&&$u===0&&($u=62500*L0());var g=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zr(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>$u?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Wr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xr=null;function Zr(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xr=new Map,s.forEach(sE,t),Xr=null,Wr.call(t))}function sE(t,s){if(!(s.state.loading&4)){var r=Xr.get(t);if(r)var u=r.get(null);else{r=new Map,Xr.set(t,r);for(var g=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),y=r.get(S)||u,y===u&&r.set(null,g),r.set(S,g),this.count++,u=Wr.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(g,t.firstChild)),s.state.loading|=4}}var xo={$$typeof:D,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function oE(t,s,r,u,g,y,S,A,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.hiddenUpdates=Ha(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Yp(t,s,r,u,g,y,S,A,R,k,V,Q){return t=new oE(t,s,r,S,R,k,V,Q,A),s=1,y===!0&&(s|=24),y=Dt(3,null,null,s),t.current=y,y.stateNode=t,s=Cl(),s.refCount++,t.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},Nl(y),t}function Kp(t){return t?(t=Yi,t):Yi}function jp(t,s,r,u,g,y){g=Kp(g),u.context===null?u.context=g:u.pendingContext=g,u=Bn(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Hn(t,u,s),r!==null&&(bt(r,t,s),oo(r,t,s))}function Qp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Yu(t,s){Qp(t,s),(t=t.alternate)&&Qp(t,s)}function Wp(t){if(t.tag===13||t.tag===31){var s=hi(t,67108864);s!==null&&bt(s,t,67108864),Yu(t,67108864)}}function Xp(t){if(t.tag===13||t.tag===31){var s=Lt();s=Va(s);var r=hi(t,s);r!==null&&bt(r,t,s),Yu(t,s)}}var ea=!0;function rE(t,s,r,u){var g=U.T;U.T=null;var y=G.p;try{G.p=2,Ku(t,s,r,u)}finally{G.p=y,U.T=g}}function aE(t,s,r,u){var g=U.T;U.T=null;var y=G.p;try{G.p=8,Ku(t,s,r,u)}finally{G.p=y,U.T=g}}function Ku(t,s,r,u){if(ea){var g=ju(u);if(g===null)Uu(t,s,u,ta,r),em(t,u);else if(uE(g,t,s,r,u))u.stopPropagation();else if(em(t,u),s&4&&-1<lE.indexOf(t)){for(;g!==null;){var y=ki(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=li(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var R=1<<31-It(S);A.entanglements[1]|=R,S&=~R}un(y),(Pe&6)===0&&(Lr=xt()+500,To(0))}}break;case 31:case 13:A=hi(y,2),A!==null&&bt(A,y,2),Gr(),Yu(y,2)}if(y=ju(u),y===null&&Uu(t,s,u,ta,r),y===g)break;g=y}g!==null&&u.stopPropagation()}else Uu(t,s,u,null,r)}}function ju(t){return t=Wa(t),Qu(t)}var ta=null;function Qu(t){if(ta=null,t=Oi(t),t!==null){var s=l(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=c(s),t!==null)return t;t=null}else if(r===31){if(t=f(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return ta=t,null}function Zp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yv()){case rd:return 2;case ad:return 8;case Fo:case Kv:return 32;case ld:return 268435456;default:return 32}default:return 32}}var Wu=!1,Xn=null,Zn=null,ei=null,No=new Map,Io=new Map,ti=[],lE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function em(t,s){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":No.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(s.pointerId)}}function Mo(t,s,r,u,g,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},s!==null&&(s=ki(s),s!==null&&Wp(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),t)}function uE(t,s,r,u,g){switch(s){case"focusin":return Xn=Mo(Xn,t,s,r,u,g),!0;case"dragenter":return Zn=Mo(Zn,t,s,r,u,g),!0;case"mouseover":return ei=Mo(ei,t,s,r,u,g),!0;case"pointerover":var y=g.pointerId;return No.set(y,Mo(No.get(y)||null,t,s,r,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Io.set(y,Mo(Io.get(y)||null,t,s,r,u,g)),!0}return!1}function tm(t){var s=Oi(t.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){t.blockedOn=s,pd(t.priority,function(){Xp(r)});return}}else if(s===31){if(s=f(r),s!==null){t.blockedOn=s,pd(t.priority,function(){Xp(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function na(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=ju(t.nativeEvent);if(r===null){r=t.nativeEvent;var u=new r.constructor(r.type,r);Qa=u,r.target.dispatchEvent(u),Qa=null}else return s=ki(r),s!==null&&Wp(s),t.blockedOn=r,!1;s.shift()}return!0}function nm(t,s,r){na(t)&&r.delete(s)}function cE(){Wu=!1,Xn!==null&&na(Xn)&&(Xn=null),Zn!==null&&na(Zn)&&(Zn=null),ei!==null&&na(ei)&&(ei=null),No.forEach(nm),Io.forEach(nm)}function ia(t,s){t.blockedOn===s&&(t.blockedOn=null,Wu||(Wu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,cE)))}var sa=null;function im(t){sa!==t&&(sa=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sa===t&&(sa=null);for(var s=0;s<t.length;s+=3){var r=t[s],u=t[s+1],g=t[s+2];if(typeof u!="function"){if(Qu(u||r)===null)continue;break}var y=ki(r);y!==null&&(t.splice(s,3),s-=3,jl(y,{pending:!0,data:g,method:r.method,action:u},u,g))}}))}function ys(t){function s(R){return ia(R,t)}Xn!==null&&ia(Xn,t),Zn!==null&&ia(Zn,t),ei!==null&&ia(ei,t),No.forEach(s),Io.forEach(s);for(var r=0;r<ti.length;r++){var u=ti[r];u.blockedOn===t&&(u.blockedOn=null)}for(;0<ti.length&&(r=ti[0],r.blockedOn===null);)tm(r),r.blockedOn===null&&ti.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var g=r[u],y=r[u+1],S=g[Et]||null;if(typeof y=="function")S||im(r);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[Et]||null)A=S.formAction;else if(Qu(g)!==null)continue}else A=S.action;typeof A=="function"?r[u+1]=A:(r.splice(u,3),u-=3),im(r)}}}function sm(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Xu(t){this._internalRoot=t}oa.prototype.render=Xu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,u=Lt();jp(r,u,t,s,null,null)},oa.prototype.unmount=Xu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;jp(t.current,2,null,t,null,null),Gr(),s[Ui]=null}};function oa(t){this._internalRoot=t}oa.prototype.unstable_scheduleHydration=function(t){if(t){var s=hd();t={blockedOn:null,target:t,priority:s};for(var r=0;r<ti.length&&s!==0&&s<ti[r].priority;r++);ti.splice(r,0,t),r===0&&tm(t)}};var om=e.version;if(om!=="19.2.0")throw Error(o(527,om,"19.2.0"));G.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=m(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var dE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{Gs=ra.inject(dE),Nt=ra}catch{}}return Po.createRoot=function(t,s){if(!a(t))throw Error(o(299));var r=!1,u="",g=fh,y=hh,S=ph;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Yp(t,1,!1,null,null,r,u,null,g,y,S,sm),t[Ui]=s.current,Pu(t),new Xu(s)},Po.hydrateRoot=function(t,s,r){if(!a(t))throw Error(o(299));var u=!1,g="",y=fh,S=hh,A=ph,R=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(R=r.formState)),s=Yp(t,1,!0,s,r??null,u,g,R,y,S,A,sm),s.context=Kp(null),r=s.current,u=Lt(),u=Va(u),g=Bn(u),g.callback=null,Hn(r,g,u),r=u,s.current.lanes=r,Hs(s,r),un(s),t[Ui]=s.current,Pu(t),new oa(s)},Po.version="19.2.0",Po}var mm;function bE(){if(mm)return tc.exports;mm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tc.exports=CE(),tc.exports}var RE=bE();const xE=Gc(RE);var pc=function(i,e){return pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},pc(i,e)};function gy(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pc(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var va=function(){return va=Object.assign||function(e){for(var n,o=1,a=arguments.length;o<a;o++){n=arguments[o];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},va.apply(this,arguments)};function Ms(i,e){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(n[o[a]]=i[o[a]]);return n}function yy(i,e,n,o){var a=arguments.length,l=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,n):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,e,n,o);else for(var f=i.length-1;f>=0;f--)(c=i[f])&&(l=(a<3?c(l):a>3?c(e,n,l):c(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function vy(i,e){return function(n,o){e(n,o,i)}}function _y(i,e,n,o,a,l){function c(q){if(q!==void 0&&typeof q!="function")throw new TypeError("Function expected");return q}for(var f=o.kind,p=f==="getter"?"get":f==="setter"?"set":"value",m=!e&&i?o.static?i:i.prototype:null,v=e||(m?Object.getOwnPropertyDescriptor(m,o.name):{}),_,E=!1,w=n.length-1;w>=0;w--){var C={};for(var x in o)C[x]=x==="access"?{}:o[x];for(var x in o.access)C.access[x]=o.access[x];C.addInitializer=function(q){if(E)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(q||null))};var b=(0,n[w])(f==="accessor"?{get:v.get,set:v.set}:v[p],C);if(f==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(_=c(b.get))&&(v.get=_),(_=c(b.set))&&(v.set=_),(_=c(b.init))&&a.unshift(_)}else(_=c(b))&&(f==="field"?a.unshift(_):v[p]=_)}m&&Object.defineProperty(m,o.name,v),E=!0}function Ey(i,e,n){for(var o=arguments.length>2,a=0;a<e.length;a++)n=o?e[a].call(i,n):e[a].call(i);return o?n:void 0}function Sy(i){return typeof i=="symbol"?i:"".concat(i)}function Ty(i,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function wy(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function ue(i,e,n,o){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function f(v){try{m(o.next(v))}catch(_){c(_)}}function p(v){try{m(o.throw(v))}catch(_){c(_)}}function m(v){v.done?l(v.value):a(v.value).then(f,p)}m((o=o.apply(i,e||[])).next())})}function Ay(i,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(v){return p([m,v])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(o=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(m[0]===6&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(v){m=[6,v],a=0}finally{o=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Na=Object.create?(function(i,e,n,o){o===void 0&&(o=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(i,o,a)}):(function(i,e,n,o){o===void 0&&(o=n),i[o]=e[n]});function Cy(i,e){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Na(e,i,n)}function _a(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hc(i,e){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var o=n.call(i),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return l}function by(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Hc(arguments[e]));return i}function Ry(){for(var i=0,e=0,n=arguments.length;e<n;e++)i+=arguments[e].length;for(var o=Array(i),a=0,e=0;e<n;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,a++)o[a]=l[c];return o}function xy(i,e,n){if(n||arguments.length===2)for(var o=0,a=e.length,l;o<a;o++)(l||!(o in e))&&(l||(l=Array.prototype.slice.call(e,0,o)),l[o]=e[o]);return i.concat(l||Array.prototype.slice.call(e))}function Is(i){return this instanceof Is?(this.v=i,this):new Is(i)}function Ny(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(w){return function(C){return Promise.resolve(C).then(w,_)}}function f(w,C){o[w]&&(a[w]=function(x){return new Promise(function(b,q){l.push([w,x,b,q])>1||p(w,x)})},C&&(a[w]=C(a[w])))}function p(w,C){try{m(o[w](C))}catch(x){E(l[0][3],x)}}function m(w){w.value instanceof Is?Promise.resolve(w.value.v).then(v,_):E(l[0][2],w)}function v(w){p("next",w)}function _(w){p("throw",w)}function E(w,C){w(C),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Iy(i){var e,n;return e={},o("next"),o("throw",function(a){throw a}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(a,l){e[a]=i[a]?function(c){return(n=!n)?{value:Is(i[a](c)),done:!1}:l?l(c):c}:l}}function My(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof _a=="function"?_a(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=i[l]&&function(c){return new Promise(function(f,p){c=i[l](c),a(f,p,c.done,c.value)})}}function a(l,c,f,p){Promise.resolve(p).then(function(m){l({value:m,done:f})},c)}}function Dy(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var NE=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},mc=function(i){return mc=Object.getOwnPropertyNames||function(e){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[n.length]=o);return n},mc(i)};function Py(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var n=mc(i),o=0;o<n.length;o++)n[o]!=="default"&&Na(e,i,n[o]);return NE(e,i),e}function Uy(i){return i&&i.__esModule?i:{default:i}}function Oy(i,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(i):o?o.value:e.get(i)}function ky(i,e,n,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(i,n):a?a.value=n:e.set(i,n),n}function Ly(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function qy(i,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var o,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=e[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=e[Symbol.dispose],n&&(a=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");a&&(o=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),i.stack.push({value:e,dispose:o,async:n})}else n&&i.stack.push({async:!0});return e}var IE=typeof SuppressedError=="function"?SuppressedError:function(i,e,n){var o=new Error(n);return o.name="SuppressedError",o.error=i,o.suppressed=e,o};function Gy(i){function e(l){i.error=i.hasError?new IE(l,i.error,"An error was suppressed during disposal."):l,i.hasError=!0}var n,o=0;function a(){for(;n=i.stack.pop();)try{if(!n.async&&o===1)return o=0,i.stack.push(n),Promise.resolve().then(a);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else o|=1}catch(c){e(c)}if(o===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}function By(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,a,l,c){return o?e?".jsx":".js":a&&(!l||!c)?n:a+l+"."+c.toLowerCase()+"js"}):i}const ME={__extends:gy,__assign:va,__rest:Ms,__decorate:yy,__param:vy,__esDecorate:_y,__runInitializers:Ey,__propKey:Sy,__setFunctionName:Ty,__metadata:wy,__awaiter:ue,__generator:Ay,__createBinding:Na,__exportStar:Cy,__values:_a,__read:Hc,__spread:by,__spreadArrays:Ry,__spreadArray:xy,__await:Is,__asyncGenerator:Ny,__asyncDelegator:Iy,__asyncValues:My,__makeTemplateObject:Dy,__importStar:Py,__importDefault:Uy,__classPrivateFieldGet:Oy,__classPrivateFieldSet:ky,__classPrivateFieldIn:Ly,__addDisposableResource:qy,__disposeResources:Gy,__rewriteRelativeImportExtension:By},DE=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qy,get __assign(){return va},__asyncDelegator:Iy,__asyncGenerator:Ny,__asyncValues:My,__await:Is,__awaiter:ue,__classPrivateFieldGet:Oy,__classPrivateFieldIn:Ly,__classPrivateFieldSet:ky,__createBinding:Na,__decorate:yy,__disposeResources:Gy,__esDecorate:_y,__exportStar:Cy,__extends:gy,__generator:Ay,__importDefault:Uy,__importStar:Py,__makeTemplateObject:Dy,__metadata:wy,__param:vy,__propKey:Sy,__read:Hc,__rest:Ms,__rewriteRelativeImportExtension:By,__runInitializers:Ey,__setFunctionName:Ty,__spread:by,__spreadArray:xy,__spreadArrays:Ry,__values:_a,default:ME},Symbol.toStringTag,{value:"Module"})),PE=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class Vc extends Error{constructor(e,n="FunctionsError",o){super(e),this.name=n,this.context=o}}class UE extends Vc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gm extends Vc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ym extends Vc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(gc||(gc={}));class OE{constructor(e,{headers:n={},customFetch:o,region:a=gc.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=PE(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ue(this,arguments,void 0,function*(n,o={}){var a;let l,c;try{const{headers:f,method:p,body:m,signal:v,timeout:_}=o;let E={},{region:w}=o;w||(w=this.region);const C=new URL(`${this.url}/${n}`);w&&w!=="any"&&(E["x-region"]=w,C.searchParams.set("forceFunctionRegion",w));let x;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",x=m):typeof m=="string"?(E["Content-Type"]="text/plain",x=m):typeof FormData<"u"&&m instanceof FormData?x=m:(E["Content-Type"]="application/json",x=JSON.stringify(m)):x=m;let b=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(b=c.signal,v.addEventListener("abort",()=>c.abort())):b=c.signal);const q=yield this.fetch(C.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),f),body:x,signal:b}).catch(X=>{throw new UE(X)}),B=q.headers.get("x-relay-error");if(B&&B==="true")throw new gm(q);if(!q.ok)throw new ym(q);let D=((a=q.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),$;return D==="application/json"?$=yield q.json():D==="application/octet-stream"||D==="application/pdf"?$=yield q.blob():D==="text/event-stream"?$=q:D==="multipart/form-data"?$=yield q.formData():$=yield q.text(),{data:$,error:null,response:q}}catch(f){return{data:null,error:f,response:f instanceof ym||f instanceof gm?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var gt={};const Ds=gE(DE);var aa={},la={},ua={},ca={},da={},fa={},vm;function Hy(){if(vm)return fa;vm=1,Object.defineProperty(fa,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return fa.default=i,fa}var _m;function Vy(){if(_m)return da;_m=1,Object.defineProperty(da,"__esModule",{value:!0});const e=Ds.__importDefault(Hy());class n{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,v,_,E;let w=null,C=null,x=null,b=p.status,q=p.statusText;if(p.ok){if(this.method!=="HEAD"){const X=await p.text();X===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?C=X:C=JSON.parse(X))}const D=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),$=(_=p.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");D&&$&&$.length>1&&(x=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(w={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,x=null,b=406,q="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const D=await p.text();try{w=JSON.parse(D),Array.isArray(w)&&p.status===404&&(C=[],w=null,b=200,q="OK")}catch{p.status===404&&D===""?(b=204,q="No Content"):w={message:D}}if(w&&this.isMaybeSingle&&(!((E=w==null?void 0:w.details)===null||E===void 0)&&E.includes("0 rows"))&&(w=null,b=200,q="OK"),w&&this.shouldThrowOnError)throw new e.default(w)}return{error:w,data:C,count:x,status:b,statusText:q}});return this.shouldThrowOnError||(f=f.catch(p=>{var m,v,_;return{error:{message:`${(m=p==null?void 0:p.name)!==null&&m!==void 0?m:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(v=p==null?void 0:p.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(_=p==null?void 0:p.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,l)}returns(){return this}overrideTypes(){return this}}return da.default=n,da}var Em;function zy(){if(Em)return ca;Em=1,Object.defineProperty(ca,"__esModule",{value:!0});const e=Ds.__importDefault(Vy());class n extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:p=f}={}){const m=p?`${p}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:f=c}={}){const p=typeof f>"u"?"offset":`${f}.offset`,m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(m,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:p=!1,format:m="text"}={}){var v;const _=[a?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),E=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${E}"; options=${_};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return ca.default=n,ca}var Sm;function zc(){if(Sm)return ua;Sm=1,Object.defineProperty(ua,"__esModule",{value:!0});const e=Ds.__importDefault(zy()),n=new RegExp("[,()]");class o extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(p=>typeof p=="string"&&n.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${m}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}}return ua.default=o,ua}var Tm;function Fy(){if(Tm)return la;Tm=1,Object.defineProperty(la,"__esModule",{value:!0});const e=Ds.__importDefault(zc());class n{constructor(a,{headers:l={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(a,l){const{head:c=!1,count:f}=l??{},p=c?"HEAD":"GET";let m=!1;const v=(a??"*").split("").map(_=>/\s/.test(_)&&!m?"":(_==='"'&&(m=!m),_)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var f;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(m.length>0){const v=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:p=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const _=a.reduce((E,w)=>E.concat(Object.keys(w)),[]);if(_.length>0){const E=[...new Set(_)].map(w=>`"${w}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return la.default=n,la}var wm;function kE(){if(wm)return aa;wm=1,Object.defineProperty(aa,"__esModule",{value:!0});const i=Ds,e=i.__importDefault(Fy()),n=i.__importDefault(zc());class o{constructor(l,{headers:c={},schema:f,fetch:p}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=p}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new o(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:p=!1,count:m}={}){var v;let _;const E=new URL(`${this.url}/rpc/${l}`);let w;f||p?(_=f?"HEAD":"GET",Object.entries(c).filter(([x,b])=>b!==void 0).map(([x,b])=>[x,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([x,b])=>{E.searchParams.append(x,b)})):(_="POST",w=c);const C=new Headers(this.headers);return m&&C.set("Prefer",`count=${m}`),new n.default({method:_,url:E,headers:C,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return aa.default=o,aa}var Am;function LE(){if(Am)return gt;Am=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const i=Ds,e=i.__importDefault(kE());gt.PostgrestClient=e.default;const n=i.__importDefault(Fy());gt.PostgrestQueryBuilder=n.default;const o=i.__importDefault(zc());gt.PostgrestFilterBuilder=o.default;const a=i.__importDefault(zy());gt.PostgrestTransformBuilder=a.default;const l=i.__importDefault(Vy());gt.PostgrestBuilder=l.default;const c=i.__importDefault(Hy());return gt.PostgrestError=c.default,gt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},gt}var Jy=LE();const $y=Gc(Jy),qE=mE({__proto__:null,default:$y},[Jy]),{PostgrestClient:GE,PostgrestQueryBuilder:qN,PostgrestFilterBuilder:GN,PostgrestTransformBuilder:BN,PostgrestBuilder:HN,PostgrestError:VN}=$y||qE;class BE{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const o=this.getWebSocketConstructor();return new o(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const HE="2.81.1",VE=`realtime-js/${HE}`,Yy="1.0.0",zE="2.0.0",Cm=Yy,yc=1e4,FE=1e3,JE=100;var Ni;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ni||(Ni={}));var ot;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ot||(ot={}));var Qt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Qt||(Qt={}));var vc;(function(i){i.websocket="websocket"})(vc||(vc={}));var Ii;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Ii||(Ii={}));class $E{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,n){if(this._isArrayBuffer(e.payload))return n(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(o))}_binaryEncodePush(e){const{join_ref:n,ref:o,event:a,topic:l,payload:c}=e,f=this.META_LENGTH+n.length+o.length+l.length+a.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),v=0;m.setUint8(v++,this.KINDS.push),m.setUint8(v++,n.length),m.setUint8(v++,o.length),m.setUint8(v++,l.length),m.setUint8(v++,a.length),Array.from(n,E=>m.setUint8(v++,E.charCodeAt(0))),Array.from(o,E=>m.setUint8(v++,E.charCodeAt(0))),Array.from(l,E=>m.setUint8(v++,E.charCodeAt(0))),Array.from(a,E=>m.setUint8(v++,E.charCodeAt(0)));var _=new Uint8Array(p.byteLength+c.byteLength);return _.set(new Uint8Array(p),0),_.set(new Uint8Array(c),p.byteLength),_.buffer}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,o;const{join_ref:a,ref:l,topic:c}=e,f=e.payload.event,p=(o=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),m=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+c.length+f.length,v=new ArrayBuffer(this.HEADER_LENGTH+m);let _=new DataView(v),E=0;_.setUint8(E++,this.KINDS.userBroadcastPush),_.setUint8(E++,a.length),_.setUint8(E++,l.length),_.setUint8(E++,c.length),_.setUint8(E++,f.length),_.setUint8(E++,this.BINARY_ENCODING),Array.from(a,C=>_.setUint8(E++,C.charCodeAt(0))),Array.from(l,C=>_.setUint8(E++,C.charCodeAt(0))),Array.from(c,C=>_.setUint8(E++,C.charCodeAt(0))),Array.from(f,C=>_.setUint8(E++,C.charCodeAt(0)));var w=new Uint8Array(v.byteLength+p.byteLength);return w.set(new Uint8Array(v),0),w.set(new Uint8Array(p),v.byteLength),w.buffer}_encodeJsonUserBroadcastPush(e){var n,o;const{join_ref:a,ref:l,topic:c}=e,f=e.payload.event,p=(o=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},v=new TextEncoder().encode(JSON.stringify(p)).buffer,_=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+l.length+c.length+f.length,E=new ArrayBuffer(this.HEADER_LENGTH+_);let w=new DataView(E),C=0;w.setUint8(C++,this.KINDS.userBroadcastPush),w.setUint8(C++,a.length),w.setUint8(C++,l.length),w.setUint8(C++,c.length),w.setUint8(C++,f.length),w.setUint8(C++,this.JSON_ENCODING),Array.from(a,b=>w.setUint8(C++,b.charCodeAt(0))),Array.from(l,b=>w.setUint8(C++,b.charCodeAt(0))),Array.from(c,b=>w.setUint8(C++,b.charCodeAt(0))),Array.from(f,b=>w.setUint8(C++,b.charCodeAt(0)));var x=new Uint8Array(E.byteLength+v.byteLength);return x.set(new Uint8Array(E),0),x.set(new Uint8Array(v),E.byteLength),x.buffer}decode(e,n){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return n(o)}if(typeof e=="string"){const o=JSON.parse(e),[a,l,c,f,p]=o;return n({join_ref:a,ref:l,topic:c,event:f,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),o=n.getUint8(0),a=new TextDecoder;switch(o){case this.KINDS.push:return this._decodePush(e,n,a);case this.KINDS.reply:return this._decodeReply(e,n,a);case this.KINDS.broadcast:return this._decodeBroadcast(e,n,a);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodePush(e,n,o){const a=n.getUint8(1),l=n.getUint8(2),c=n.getUint8(3);let f=this.HEADER_LENGTH+this.META_LENGTH-1;const p=o.decode(e.slice(f,f+a));f=f+a;const m=o.decode(e.slice(f,f+l));f=f+l;const v=o.decode(e.slice(f,f+c));f=f+c;const _=JSON.parse(o.decode(e.slice(f,e.byteLength)));return{join_ref:p,ref:null,topic:m,event:v,payload:_}}_decodeReply(e,n,o){const a=n.getUint8(1),l=n.getUint8(2),c=n.getUint8(3),f=n.getUint8(4);let p=this.HEADER_LENGTH+this.META_LENGTH;const m=o.decode(e.slice(p,p+a));p=p+a;const v=o.decode(e.slice(p,p+l));p=p+l;const _=o.decode(e.slice(p,p+c));p=p+c;const E=o.decode(e.slice(p,p+f));p=p+f;const w=JSON.parse(o.decode(e.slice(p,e.byteLength))),C={status:E,response:w};return{join_ref:m,ref:v,topic:_,event:Qt.reply,payload:C}}_decodeBroadcast(e,n,o){const a=n.getUint8(1),l=n.getUint8(2);let c=this.HEADER_LENGTH+2;const f=o.decode(e.slice(c,c+a));c=c+a;const p=o.decode(e.slice(c,c+l));c=c+l;const m=JSON.parse(o.decode(e.slice(c,e.byteLength)));return{join_ref:null,ref:null,topic:f,event:p,payload:m}}_decodeUserBroadcast(e,n,o){const a=n.getUint8(1),l=n.getUint8(2),c=n.getUint8(3),f=n.getUint8(4);let p=this.HEADER_LENGTH+4;const m=o.decode(e.slice(p,p+a));p=p+a;const v=o.decode(e.slice(p,p+l));p=p+l;const _=o.decode(e.slice(p,p+c));p=p+c;const E=e.slice(p,e.byteLength),w=f===this.JSON_ENCODING?JSON.parse(o.decode(E)):E,C={type:this.BROADCAST,event:v,payload:w};return c>0&&(C.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST,payload:C}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class Ky{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ve||(Ve={}));const bm=(i,e,n={})=>{var o;const a=(o=n.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=YE(c,i,e,a),l),{}):{}},YE=(i,e,n,o)=>{const a=e.find(f=>f.name===i),l=a==null?void 0:a.type,c=n[i];return l&&!o.includes(l)?jy(l,c):_c(c)},jy=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return WE(e,n)}switch(i){case Ve.bool:return KE(e);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return jE(e);case Ve.json:case Ve.jsonb:return QE(e);case Ve.timestamp:return XE(e);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return _c(e);default:return _c(e)}},_c=i=>i,KE=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},jE=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},QE=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},WE=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let l;const c=i.slice(1,n);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>jy(e,f))}return i},XE=i=>typeof i=="string"?i.replace(" ","T"):i,Qy=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class oc{constructor(e,n,o={},a=yc){this.channel=e,this.event=n,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var o;return this._hasReceived(e)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Rm;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Rm||(Rm={}));class ko{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ko.syncState(this.state,a,l,c),this.pendingDiffs.forEach(p=>{this.state=ko.syncDiff(this.state,p,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ko.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,o,a){const l=this.cloneDeep(e),c=this.transformState(n),f={},p={};return this.map(l,(m,v)=>{c[m]||(p[m]=v)}),this.map(c,(m,v)=>{const _=l[m];if(_){const E=v.map(b=>b.presence_ref),w=_.map(b=>b.presence_ref),C=v.filter(b=>w.indexOf(b.presence_ref)<0),x=_.filter(b=>E.indexOf(b.presence_ref)<0);C.length>0&&(f[m]=C),x.length>0&&(p[m]=x)}else f[m]=v}),this.syncDiff(l,{joins:f,leaves:p},o,a)}static syncDiff(e,n,o,a){const{joins:l,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(l,(f,p)=>{var m;const v=(m=e[f])!==null&&m!==void 0?m:[];if(e[f]=this.cloneDeep(p),v.length>0){const _=e[f].map(w=>w.presence_ref),E=v.filter(w=>_.indexOf(w.presence_ref)<0);e[f].unshift(...E)}o(f,v,p)}),this.map(c,(f,p)=>{let m=e[f];if(!m)return;const v=p.map(_=>_.presence_ref);m=m.filter(_=>v.indexOf(_.presence_ref)<0),e[f]=m,a(f,m,p),m.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(o=>n(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,o)=>{const a=e[o];return"metas"in a?n[o]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[o]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xm;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(xm||(xm={}));var Lo;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Lo||(Lo={}));var xn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(xn||(xn={}));class Fc{constructor(e,n={config:{}},o){var a,l;if(this.topic=e,this.params=n,this.socket=o,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new oc(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new Ky(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new ko(this),this.broadcastEndpointURL=Qy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:c,presence:f,private:p}}=this.params,m=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(w=>w.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Lo.PRESENCE]&&this.bindings[Lo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},E={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(xn.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(xn.CLOSED)),this.updateJoinPayload(Object.assign({config:E},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var C;if(this.socket.setAuth(),w===void 0){e==null||e(xn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(C=x==null?void 0:x.length)!==null&&C!==void 0?C:0,q=[];for(let B=0;B<b;B++){const D=x[B],{filter:{event:$,schema:X,table:ee,filter:J}}=D,z=w&&w[B];if(z&&z.event===$&&z.schema===X&&z.table===ee&&z.filter===J)q.push(Object.assign(Object.assign({},D),{id:z.id}));else{this.unsubscribe(),this.state=ot.errored,e==null||e(xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,e&&e(xn.SUBSCRIBED);return}}).receive("error",w=>{this.state=ot.errored,e==null||e(xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,o){return this.state===ot.joined&&e===Lo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,o)}async httpSend(e,n,o={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var o,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,p;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new oc(this,Qt.leave,{},e),o.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ot.closed,this.bindings={}}async _fetchWithTimeout(e,n,o){const a=new AbortController,l=setTimeout(()=>a.abort(),o),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),c}_push(e,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new oc(this,e,n,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>JE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,o){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,o){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:p,leave:m,join:v}=Qt;if(o&&[f,p,m,v].indexOf(c)>=0&&o!==this._joinRef())return;let E=this._onMessage(c,n,o);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var C,x,b;return((C=w.filter)===null||C===void 0?void 0:C.event)==="*"||((b=(x=w.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===c}).map(w=>w.callback(E,o)):(l=this.bindings[c])===null||l===void 0||l.filter(w=>{var C,x,b,q,B,D;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in w){const $=w.id,X=(C=w.filter)===null||C===void 0?void 0:C.event;return $&&((x=n.ids)===null||x===void 0?void 0:x.includes($))&&(X==="*"||(X==null?void 0:X.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const $=(B=(q=w==null?void 0:w.filter)===null||q===void 0?void 0:q.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return $==="*"||$===((D=n==null?void 0:n.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===c}).map(w=>{if(typeof E=="object"&&"ids"in E){const C=E.data,{schema:x,table:b,commit_timestamp:q,type:B,errors:D}=C;E=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:q,eventType:B,new:{},old:{},errors:D}),this._getPayloadRecords(C))}w.callback(E,o)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,o){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:o};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===o&&Fc.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const o in e)if(e[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qt.close,{},e)}_onError(e){this._on(Qt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=bm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=bm(e.columns,e.old_record)),n}}const rc=()=>{},ha={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZE=[1e3,2e3,5e3,1e4],eS=1e4,tS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nS{constructor(e,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yc,this.transport=null,this.heartbeatIntervalMs=ha.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rc,this.ref=0,this.reconnectTimer=null,this.vsn=Cm,this.logger=rc,this.conn=null,this.sendBuffer=[],this.serializer=new $E,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((o=n==null?void 0:n.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vc.websocket}`,this.httpEndpoint=Qy(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=BE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,o){this.logger(e,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ni.connecting:return Ii.Connecting;case Ni.open:return Ii.Open;case Ni.closing:return Ii.Closing;default:return Ii.Closed}}isConnected(){return this.connectionState()===Ii.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const o=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===o);if(a)return a;{const l=new Fc(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:o,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${n} ${o} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(FE,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ha.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:a,payload:l,ref:c}=n,f=c?`(${c})`:"",p=l.status||"";this.log("receive",`${p} ${o} ${a} ${f}`.trim(),l),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(a,l,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ni.open||this.conn.readyState===Ni.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const o=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${o}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const o=new Blob([tS],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const a={access_token:n,version:VE};n&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(Qt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Ky(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ha.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,o,a,l,c,f,p,m,v,_,E,w;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:yc,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:ha.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:rc,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:Cm,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(C=>ZE[C-1]||eS),this.vsn){case Yy:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((C,x)=>x(JSON.stringify(C))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((C,x)=>x(JSON.parse(C)));break;case zE:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Jc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class iS extends Jc{constructor(e,n,o){super(e),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ec extends Jc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const $c=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),sS=()=>Response,Sc=i=>{if(Array.isArray(i))return i.map(n=>Sc(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,o])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Sc(o)}),e},oS=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},ac=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},rS=(i,e,n)=>ue(void 0,void 0,void 0,function*(){const o=yield sS();i instanceof o&&!(n!=null&&n.noResolveJson)?i.json().then(a=>{const l=i.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new iS(ac(a),l,c))}).catch(a=>{e(new Ec(ac(a),a))}):e(new Ec(ac(i),i))}),aS=(i,e,n,o)=>{const a={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!o?a:(oS(o)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Vo(i,e,n,o,a,l){return ue(this,void 0,void 0,function*(){return new Promise((c,f)=>{i(n,aS(e,o,a,l)).then(p=>{if(!p.ok)throw p;return o!=null&&o.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>rS(p,f,o))})})}function Go(i,e,n,o){return ue(this,void 0,void 0,function*(){return Vo(i,"GET",e,n,o)})}function sn(i,e,n,o,a){return ue(this,void 0,void 0,function*(){return Vo(i,"POST",e,o,a,n)})}function Tc(i,e,n,o,a){return ue(this,void 0,void 0,function*(){return Vo(i,"PUT",e,o,a,n)})}function lS(i,e,n,o){return ue(this,void 0,void 0,function*(){return Vo(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function Yc(i,e,n,o,a){return ue(this,void 0,void 0,function*(){return Vo(i,"DELETE",e,o,a,n)})}class uS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ue(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}var Wy;class cS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Wy]="BlobDownloadBuilder",this.promise=null}asStream(){return new uS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ue(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}Wy=Symbol.toStringTag;const dS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fS{constructor(e,n={},o,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=o,this.fetch=$c(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,o,a){return ue(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Nm),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&o instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",o)):typeof FormData<"u"&&o instanceof FormData?(l=o,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),p&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(p))):(l=o,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const m=this._removeEmptyFolders(n),v=this._getFinalPath(m),_=yield(e=="PUT"?Tc:sn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ye(l))return{data:null,error:l};throw l}})}upload(e,n,o){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,o)})}uploadToSignedUrl(e,n,o,a){return ue(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",n);try{let p;const m=Object.assign({upsert:Nm.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",m.cacheControl)):(p=o,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const _=yield Tc(this.fetch,f.toString(),p,{headers:v});return{data:{path:l,fullPath:_.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ye(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,n){return ue(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const l=yield sn(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new Jc("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}update(e,n,o){return ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,o)})}move(e,n,o){return ue(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}copy(e,n,o){return ue(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,o){return ue(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield sn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const c=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,o){return ue(this,void 0,void 0,function*(){try{const a=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),p=()=>Go(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new cS(p,this.shouldThrowOnError)}info(e){return ue(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const o=yield Go(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Sc(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}exists(e){return ue(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield lS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o)&&o instanceof Ec){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,n){const o=this._getFinalPath(e),a=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const f=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});p!==""&&a.push(p);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${o}${m}`)}}}remove(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}list(e,n,o){return ue(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},dS),n),{prefix:e||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},o),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}listV2(e,n){return ue(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield sn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Xy="2.81.1",Zy={"X-Client-Info":`storage-js/${Xy}`};class hS{constructor(e,n={},o,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zy),n),this.fetch=$c(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ue(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Go(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}getBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Go(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}createBucket(e){return ue(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return ue(this,void 0,void 0,function*(){try{return{data:yield Tc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}emptyBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class pS{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zy),n),this.fetch=$c(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}listBuckets(e){return ue(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const o=n.toString(),a=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Go(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Yc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}}const Kc={"X-Client-Info":`storage-js/${Xy}`,"Content-Type":"application/json"};class ev extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function qt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class lc extends ev{constructor(e,n,o){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mS extends ev{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Im;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Im||(Im={}));const jc=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),gS=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Mm=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),yS=(i,e,n)=>ue(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(n!=null&&n.noResolveJson)){const a=i.status||500,l=i;if(typeof l.json=="function")l.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new lc(Mm(c),a,f))}).catch(()=>{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new lc(f,a,c))});else{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new lc(f,a,c))}}else e(new mS(Mm(i),i))}),vS=(i,e,n,o)=>{const a={method:i,headers:(e==null?void 0:e.headers)||{}};return o?(gS(o)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,Object.assign(Object.assign({},a),n)):a};function _S(i,e,n,o,a,l){return ue(this,void 0,void 0,function*(){return new Promise((c,f)=>{i(n,vS(e,o,a,l)).then(p=>{if(!p.ok)throw p;if(o!=null&&o.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>c(p)).catch(p=>yS(p,f,o))})})}function Gt(i,e,n,o,a){return ue(this,void 0,void 0,function*(){return _S(i,"POST",e,o,a,n)})}class ES{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Kc),n),this.fetch=jc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}listIndexes(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}}class SS{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Kc),n),this.fetch=jc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ue(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Gt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}getVectors(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}listVectors(e){return ue(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Gt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}queryVectors(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ue(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Gt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}}class TS{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Kc),n),this.fetch=jc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}getBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}listBuckets(){return ue(this,arguments,void 0,function*(e={}){try{return{data:yield Gt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ue(this,void 0,void 0,function*(){try{return{data:(yield Gt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}}class wS extends TS{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new AS(this.url,this.headers,e,this.fetch)}}class AS extends ES{constructor(e,n,o,a){super(e,n,a),this.vectorBucketName=o}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ue(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ue(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ue(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ue(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new CS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class CS extends SS{constructor(e,n,o,a,l){super(e,n,l),this.vectorBucketName=o,this.indexName=a}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ue(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ue(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ue(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ue(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ue(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class bS extends hS{constructor(e,n={},o,a){super(e,n,o,a)}from(e){return new fS(this.url,this.headers,e,this.fetch)}get vectors(){return new wS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pS(this.url+"/iceberg",this.headers,this.fetch)}}const RS="2.81.1";let Oo="";typeof Deno<"u"?Oo="deno":typeof document<"u"?Oo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Oo="react-native":Oo="node";const xS={"X-Client-Info":`supabase-js-${Oo}/${RS}`},NS={headers:xS},IS={schema:"public"},MS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DS={},PS=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),US=()=>Headers,OS=(i,e,n)=>{const o=PS(n),a=US();return async(l,c)=>{var f;const p=(f=await e())!==null&&f!==void 0?f:i;let m=new a(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),o(l,Object.assign(Object.assign({},c),{headers:m}))}};function kS(i){return i.endsWith("/")?i:i+"/"}function LS(i,e){var n,o;const{db:a,auth:l,realtime:c,global:f}=i,{db:p,auth:m,realtime:v,global:_}=e,E={db:Object.assign(Object.assign({},p),a),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},_),f),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(o=f==null?void 0:f.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?E.accessToken=i.accessToken:delete E.accessToken,E}function qS(i){const e=i==null?void 0:i.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(kS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const tv="2.81.1",ws=30*1e3,wc=3,uc=wc*ws,GS="http://localhost:9999",BS="supabase.auth.token",HS={"X-Client-Info":`gotrue-js/${tv}`},Ac="X-Supabase-Api-Version",nv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zS=600*1e3;class Bo extends Error{constructor(e,n,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function fe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class FS extends Bo{constructor(e,n,o){super(e,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function JS(i){return fe(i)&&i.name==="AuthApiError"}class Mi extends Bo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class oi extends Bo{constructor(e,n,o,a){super(e,o,a),this.name=n,this.status=o}}class tn extends oi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $S(i){return fe(i)&&i.name==="AuthSessionMissingError"}class vs extends oi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pa extends oi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ma extends oi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YS(i){return fe(i)&&i.name==="AuthImplicitGrantRedirectError"}class Dm extends oi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cc extends oi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function cc(i){return fe(i)&&i.name==="AuthRetryableFetchError"}class Pm extends oi{constructor(e,n,o){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class bc extends oi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Um=` 	
\r=`.split(""),KS=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Um.length;e+=1)i[Um[e].charCodeAt(0)]=-2;for(let e=0;e<Ea.length;e+=1)i[Ea[e].charCodeAt(0)]=e;return i})();function Om(i,e,n){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Ea[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Ea[o]),e.queuedBits-=6}}function iv(i,e,n){const o=KS[i];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function km(i){const e=[],n=c=>{e.push(String.fromCodePoint(c))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{WS(c,o,n)};for(let c=0;c<i.length;c+=1)iv(i.charCodeAt(c),a,l);return e.join("")}function jS(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function QS(i,e){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}jS(o,e)}}function WS(i,e,n){if(e.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function bs(i){const e=[],n={queue:0,queuedBits:0},o=a=>{e.push(a)};for(let a=0;a<i.length;a+=1)iv(i.charCodeAt(a),n,o);return new Uint8Array(e)}function XS(i){const e=[];return QS(i,n=>e.push(n)),new Uint8Array(e)}function Di(i){const e=[],n={queue:0,queuedBits:0},o=a=>{e.push(a)};return i.forEach(a=>Om(a,n,o)),Om(null,n,o),e.join("")}function ZS(i){return Math.round(Date.now()/1e3)+i}function eT(){return Symbol("auth-callback")}const ht=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},sv=()=>{if(!ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function tT(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((o,a)=>{e[a]=o}),e}const ov=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),nT=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",As=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Ri=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ii=async(i,e)=>{await i.removeItem(e)};class Ia{constructor(){this.promise=new Ia.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ia.promiseConstructor=Promise;function dc(i){const e=i.split(".");if(e.length!==3)throw new bc("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!VS.test(e[o]))throw new bc("JWT not in base64url format");return{header:JSON.parse(km(e[0])),payload:JSON.parse(km(e[1])),signature:bs(e[2]),raw:{header:e[0],payload:e[1]}}}async function iT(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function sT(i,e){return new Promise((o,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await i(l);if(!e(l,null,c)){o(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function oT(i){return("0"+i.toString(16)).substr(-2)}function rT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(e),Array.from(e,oT).join("")}async function aT(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(o);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function lT(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await aT(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _s(i,e,n=!1){const o=rT();let a=o;n&&(a+="/PASSWORD_RECOVERY"),await As(i,`${e}-code-verifier`,a);const l=await lT(o);return[l,o===l?"plain":"s256"]}const uT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cT(i){const e=i.headers.get(Ac);if(!e||!e.match(uT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dT(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function fT(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Es(i){if(!hT.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fc(){const i={};return new Proxy(i,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pT(i,e){return new Proxy(i,{get:(n,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const l=o.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,a)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,o,a)}})}function Lm(i){return JSON.parse(JSON.stringify(i))}const xi=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),mT=[502,503,504];async function qm(i){var e;if(!nT(i))throw new Cc(xi(i),0);if(mT.includes(i.status))throw new Cc(xi(i),i.status);let n;try{n=await i.json()}catch(l){throw new Mi(xi(l),l)}let o;const a=cT(i);if(a&&a.getTime()>=nv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Pm(xi(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new tn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Pm(xi(n),i.status,n.weak_password.reasons);throw new FS(xi(n),i.status||500,o)}const gT=(i,e,n,o)=>{const a={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),n))};async function ge(i,e,n,o){var a;const l=Object.assign({},o==null?void 0:o.headers);l[Ac]||(l[Ac]=nv["2024-01-01"].name),o!=null&&o.jwt&&(l.Authorization=`Bearer ${o.jwt}`);const c=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(c.redirect_to=o.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await yT(i,e,n+f,{headers:l,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(p):{data:Object.assign({},p),error:null}}async function yT(i,e,n,o,a,l){const c=gT(e,o,a,l);let f;try{f=await i(n,Object.assign({},c))}catch(p){throw console.error(p),new Cc(xi(p),0)}if(f.ok||await qm(f),o!=null&&o.noResolveJson)return f;try{return await f.json()}catch(p){await qm(p)}}function nn(i){var e;let n=null;ET(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=ZS(i.expires_in)));const o=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:o},error:null}}function Gm(i){const e=nn(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(e.data.weak_password=i.weak_password),e}function si(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function vT(i){return{data:i,error:null}}function _T(i){const{action_link:e,email_otp:n,hashed_token:o,redirect_to:a,verification_type:l}=i,c=Ms(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:o,redirect_to:a,verification_type:l},p=Object.assign({},c);return{data:{properties:f,user:p},error:null}}function Bm(i){return i}function ET(i){return i.access_token&&i.refresh_token&&i.expires_in}const hc=["global","local","others"];class ST{constructor({url:e="",headers:n={},fetch:o}){this.url=e,this.headers=n,this.fetch=ov(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=hc[0]){if(hc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hc.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:si})}catch(o){if(fe(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:n}=e,o=Ms(e,["options"]),a=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:_T,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:si})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,o,a,l,c,f,p;try{const m={nextPage:null,lastPage:0,total:0},v=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Bm});if(v.error)throw v.error;const _=await v.json(),E=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(p=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(C.split(";")[1].split("=")[1]);m[`${b}Page`]=x}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(fe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Es(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:si})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Es(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:si})}catch(o){if(fe(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,n=!1){Es(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:si})}catch(o){if(fe(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){Es(e.userId);try{const{data:n,error:o}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:o}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Es(e.userId),Es(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,o,a,l,c,f,p;try{const m={nextPage:null,lastPage:0,total:0},v=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Bm});if(v.error)throw v.error;const _=await v.json(),E=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(p=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(C.split(";")[1].split("=")[1]);m[`${b}Page`]=x}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(fe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(fe(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}}function Hm(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}const Ss={debug:!!(globalThis&&sv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class TT extends rv{}async function wT(i,e,n){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await n()}finally{Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new TT(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ss.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function AT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function av(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function CT(i){return parseInt(i,16)}function bT(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function RT(i){var e;const{chainId:n,domain:o,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:p,resources:m,scheme:v,uri:_,version:E}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const w=av(i.address),C=v?`${v}://${o}`:o,x=i.statement?`${i.statement}
`:"",b=`${C} wants you to sign in with your Ethereum account:
${w}

${x}`;let q=`URI: ${_}
Version: ${E}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(q+=`
Expiration Time: ${a.toISOString()}`),f&&(q+=`
Not Before: ${f.toISOString()}`),p&&(q+=`
Request ID: ${p}`),m){let B=`
Resources:`;for(const D of m){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);B+=`
- ${D}`}q+=B}return`${b}
${q}`}class it extends Error{constructor({message:e,code:n,cause:o,name:a}){var l;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(l=a??(o instanceof Error?o.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Sa extends it{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function xT({error:i,options:e}){var n,o,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new it({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new it({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new it({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new it({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new it({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new it({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new it({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new it({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(lv(c)){if(l.rp.id!==c)return new it({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new it({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function NT({error:i,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new it({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new it({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(lv(o)){if(n.rpId!==o)return new it({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class IT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const MT=new IT;function DT(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:n,excludeCredentials:o}=i,a=Ms(i,["challenge","user","excludeCredentials"]),l=bs(e).buffer,c=Object.assign(Object.assign({},n),{id:bs(n.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:c});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const m=o[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:bs(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function PT(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:n}=i,o=Ms(i,["challenge","allowCredentials"]),a=bs(e).buffer,l=Object.assign(Object.assign({},o),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const f=n[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:bs(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function UT(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:Di(new Uint8Array(i.response.attestationObject)),clientDataJSON:Di(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function OT(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),a=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Di(new Uint8Array(a.authenticatorData)),clientDataJSON:Di(new Uint8Array(a.clientDataJSON)),signature:Di(new Uint8Array(a.signature)),userHandle:a.userHandle?Di(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lv(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Vm(){var i,e;return!!(ht()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function kT(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Sa("Browser returned unexpected credential type",e)}:{data:null,error:new Sa("Empty credential response",e)}}catch(e){return{data:null,error:xT({error:e,options:i})}}}async function LT(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Sa("Browser returned unexpected credential type",e)}:{data:null,error:new Sa("Empty credential response",e)}}catch(e){return{data:null,error:NT({error:e,options:i})}}}const qT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},GT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ta(...i){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of i)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))o[l]=c;else if(n(c))o[l]=c;else if(e(c)){const f=o[l];e(f)?o[l]=Ta(f,c):o[l]=Ta(c)}else o[l]=c}return o}function BT(i,e){return Ta(qT,i,e||{})}function HT(i,e){return Ta(GT,i,e||{})}class VT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:o,signal:a},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:f};const p=a??MT.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${o}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=BT(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await kT({publicKey:m,signal:p});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const m=HT(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await LT(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new Mi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new Bo("rpId is required for WebAuthn authentication")};try{if(!Vm())return{data:null,error:new Mi("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:o},signal:a},{request:l});if(!c)return{data:null,error:f};const{webauthn:p}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:o,credential_response:p.credential_response}})}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new Mi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new Bo("rpId is required for WebAuthn registration")};try{if(!Vm())return{data:null,error:new Mi("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:a},{create:l});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new Mi("Unexpected error in register",c)}}}}AT();const zT={url:GS,storageKey:BS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:HS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function zm(i,e,n){return await n()}const Ts={};class Ho{get jwks(){var e,n;return(n=(e=Ts[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ts[this.storageKey]=Object.assign(Object.assign({},Ts[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ts[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ts[this.storageKey]=Object.assign(Object.assign({},Ts[this.storageKey]),{cachedAt:e})}constructor(e){var n,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},zT),e);if(this.storageKey=l.storageKey,this.instanceID=(n=Ho.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ho.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ht()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ST({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=ov(l.fetch),this.lock=l.lock||zm,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:ht()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=wT:this.lock=zm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:sv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Hm(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Hm(this.memoryStorage)),ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},o="none";if(ht()&&(n=tT(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),ht()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,o);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),YS(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return fe(n)?this._returnResult({error:n}):this._returnResult({error:new Mi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,o,a;try{const l=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:nn}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const p=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,o,a;try{let l;if("email"in e){const{email:v,password:_,options:E}=e;let w=null,C=null;this.flowType==="pkce"&&([w,C]=await _s(this.storage,this.storageKey)),l=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:v,password:_,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:w,code_challenge_method:C},xform:nn})}else if("phone"in e){const{phone:v,password:_,options:E}=e;l=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(o=E==null?void 0:E.data)!==null&&o!==void 0?o:{},channel:(a=E==null?void 0:E.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:nn})}else throw new pa("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const p=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:c,options:f}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Gm})}else if("phone"in e){const{phone:l,password:c,options:f}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Gm})}else throw new pa("You must provide either an email or phone number and a password");const{data:o,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const l=new vs;return this._returnResult({data:{user:null,session:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,o,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,o,a,l,c,f,p,m,v,_,E;let w,C;if("message"in e)w=e.message,C=e.signature;else{const{chain:x,wallet:b,statement:q,options:B}=e;let D;if(ht())if(typeof b=="object")D=b;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")D=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=b}const $=new URL((n=B==null?void 0:B.url)!==null&&n!==void 0?n:window.location.href),X=await D.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ee=av(X[0]);let J=(o=B==null?void 0:B.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!J){const N=await D.request({method:"eth_chainId"});J=CT(N)}const z={domain:$.host,address:ee,statement:q,uri:$.href,version:"1",chainId:J,nonce:(a=B==null?void 0:B.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=B==null?void 0:B.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=B==null?void 0:B.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=B==null?void 0:B.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=B==null?void 0:B.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=B==null?void 0:B.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=RT(z),C=await D.request({method:"personal_sign",params:[bT(w),ee]})}try{const{data:x,error:b}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:C},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:nn});if(b)throw b;if(!x||!x.session||!x.user){const q=new vs;return this._returnResult({data:{user:null,session:null},error:q})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(fe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,o,a,l,c,f,p,m,v,_,E,w;let C,x;if("message"in e)C=e.message,x=e.signature;else{const{chain:b,wallet:q,statement:B,options:D}=e;let $;if(ht())if(typeof q=="object")$=q;else{const ee=window;if("solana"in ee&&typeof ee.solana=="object"&&("signIn"in ee.solana&&typeof ee.solana.signIn=="function"||"signMessage"in ee.solana&&typeof ee.solana.signMessage=="function"))$=ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=q}const X=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in $&&$.signIn){const ee=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D==null?void 0:D.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),B?{statement:B}:null));let J;if(Array.isArray(ee)&&ee[0]&&typeof ee[0]=="object")J=ee[0];else if(ee&&typeof ee=="object"&&"signedMessage"in ee&&"signature"in ee)J=ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)C=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),x=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${X.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(a=(o=D==null?void 0:D.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=D==null?void 0:D.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((c=D==null?void 0:D.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((f=D==null?void 0:D.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((p=D==null?void 0:D.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((m=D==null?void 0:D.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((_=(v=D==null?void 0:D.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...D.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const ee=await $.signMessage(new TextEncoder().encode(C),"utf8");if(!ee||!(ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=ee}}try{const{data:b,error:q}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Di(x)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:nn});if(q)throw q;if(!b||!b.session||!b.user){const B=new vs;return this._returnResult({data:{user:null,session:null},error:B})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:q})}catch(b){if(fe(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await Ri(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(n??"").split("/");try{const{data:l,error:c}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:nn});if(await ii(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new vs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:o,token:a,access_token:l,nonce:c}=e,f=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:nn}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const v=new vs;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,o,a,l,c;try{if("email"in e){const{email:f,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await _s(this.storage,this.storageKey));const{error:_}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:f,options:p}=e,{data:m,error:v}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(c=p==null?void 0:p.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v})}throw new pa("You must provide either an email or phone number.")}catch(f){if(fe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var n,o;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:c,error:f}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:nn});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,m=c.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(a){if(fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,o,a,l,c;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await _s(this.storage,this.storageKey));const m=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:vT});return!((l=m.data)===null||l===void 0)&&l.url&&ht()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(fe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;if(o)throw o;if(!n)throw new tn;const{error:a}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(fe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:o,type:a,options:l}=e,{error:c}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:o,type:a,options:l}=e,{data:c,error:f}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new pa("You must provide either an email or phone number and a type")}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ri(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<uc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const c=await Ri(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=fc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=pT(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:si}):await this._useSession(async n=>{var o,a,l;const{data:c,error:f}=n;if(f)throw f;return!(!((o=c.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:si})})}catch(n){if(fe(n))return $S(n)&&(await this._removeSession(),await ii(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async o=>{const{data:a,error:l}=o;if(l)throw l;if(!a.session)throw new tn;const c=a.session;let f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=await _s(this.storage,this.storageKey));const{data:m,error:v}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:c.access_token,xform:si});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(o){if(fe(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tn;const n=Date.now()/1e3;let o=n,a=!0,l=null;const{payload:c}=dc(e.access_token);if(c.exp&&(o=c.exp,a=o<=n),a){const{data:f,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(fe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var o;if(!e){const{data:c,error:f}=n;if(f)throw f;e=(o=c.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new tn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ht())throw new ma("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ma(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ma("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Dm("No code detected.");const{data:B,error:D}=await this._exchangeCodeForSession(e.code);if(D)throw D;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:p,token_type:m}=e;if(!l||!f||!c||!m)throw new ma("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(f);let E=v+_;p&&(E=parseInt(p));const w=E-v;w*1e3<=ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);const C=E-_;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,E,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,E,v);const{data:x,error:b}=await this._getUser(l);if(b)throw b;const q={provider_token:o,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:E,refresh_token:c,token_type:m,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:e.type},error:null})}catch(o){if(fe(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ri(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:a,error:l}=n;if(l)return this._returnResult({error:l});const c=(o=a.session)===null||o===void 0?void 0:o.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(JS(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await ii(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=eT(),o={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async n=>{var o,a;try{const{data:{session:l},error:c}=n;if(c)throw c;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await _s(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(fe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:o,error:a}=await this._useSession(async l=>{var c,f,p,m,v;const{data:_,error:E}=l;if(E)throw E;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return ht()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:e.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(fe(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var o;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:c,provider:f,token:p,access_token:m,nonce:v}=e,_=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=l==null?void 0:l.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:p,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:nn}),{data:E,error:w}=_;return w?this._returnResult({data:{user:null,session:null},error:w}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new vs}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:w}))}catch(a){if(fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var o,a;const{data:l,error:c}=n;if(c)throw c;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await sT(async a=>(a>0&&await iT(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&cc(l)&&Date.now()+c-o<ws})}catch(o){if(this._debug(n,"error",o),fe(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",o),ht()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await Ri(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Ri(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await As(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:fc()}else if(a&&!a.user&&!a.user){const c=await Ri(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await ii(this.storage,this.storageKey+"-user"),await As(this.storage,this.storageKey,a)):a.user=fc()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<uc;if(this._debug(o,`session has${l?"":" not"} expired with margin of ${uc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),cc(c)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var n,o;if(!e)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ia;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new tn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),fe(l)){const c={data:null,error:l};return cc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,o=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(p){l.push(p)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await As(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=Lm(a);await As(this.storage,this.storageKey,l)}else{const a=Lm(n);await As(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ii(this.storage,this.storageKey),await ii(this.storage,this.storageKey+"-code-verifier"),await ii(this.storage,this.storageKey+"-user"),this.userStorage&&await ii(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ws);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-e)/ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ws}ms, refresh threshold is ${wc} ticks`),a<=wc&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,o){const a=[`provider=${encodeURIComponent(n)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[l,c]=await _s(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(o!=null&&o.queryParams){const l=new URLSearchParams(o.queryParams);a.push(l.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var o;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var o,a;const{data:l,error:c}=n;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:m}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&p.type==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?UT(e.webauthn.credential_response):OT(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:p}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:DT(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:PT(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=dc(o.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((n=(e=o.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const m=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;return a?this._returnResult({data:null,error:a}):o?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new tn})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:a},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new tn});const c=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&ht()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(fe(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:a},error:l}=o;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new tn});const c=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&ht()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(fe(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(e,n={keys:[]}){let o=n.keys.find(f=>f.kid===e);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(f=>f.kid===e),o&&this.jwks_cached_at+zS>a)return o;const{data:l,error:c}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,o=l.keys.find(f=>f.kid===e),!o)?null:o}async getClaims(e,n={}){try{let o=e;if(!o){const{data:w,error:C}=await this.getSession();if(C||!w.session)return this._returnResult({data:null,error:C});o=w.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:p}}=dc(o);n!=null&&n.allowExpired||dT(l.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:w}=await this.getUser(o);if(w)throw w;return{data:{claims:l,header:a,signature:c},error:null}}const v=fT(a.alg),_=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,XS(`${f}.${p}`)))throw new bc("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(o){if(fe(o))return this._returnResult({data:null,error:o});throw o}}}Ho.nextInstanceID={};const FT=Ho;class JT extends FT{constructor(e){super(e)}}class $T{constructor(e,n,o){var a,l,c;this.supabaseUrl=e,this.supabaseKey=n;const f=qS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,m={db:IS,realtime:DS,auth:Object.assign(Object.assign({},MS),{storageKey:p}),global:NS},v=LS(o??{},m);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(_,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=v.auth)!==null&&c!==void 0?c:{},this.headers,v.global.fetch),this.fetch=OS(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new GE(new URL("rest/v1",f).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new bS(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new OE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,o)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:o,storage:a,userStorage:l,storageKey:c,flowType:f,lock:p,debug:m,throwOnError:v},_,E){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JT({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),_),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:o,storage:a,userStorage:l,flowType:f,lock:p,debug:m,throwOnError:v,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(e,n,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YT=(i,e,n)=>new $T(i,e,n);function KT(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}KT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jT="https://fttxgekrdrsdjtgjkqyt.supabase.co",QT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0dHhnZWtyZHJzZGp0Z2prcXl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwOTIyMDEsImV4cCI6MjA3ODY2ODIwMX0.9ZXwSgeb83Yi7aiYpx3bMT0jQR8P8LL8qgrbXxZyHIA",_e=YT(jT,QT),uv=ae.createContext(null),WT=({children:i})=>{const[e,n]=ae.useState(null),[o,a]=ae.useState(!0);ae.useEffect(()=>{const{data:f}=_e.auth.onAuthStateChange(async(p,m)=>{m||(n(null),a(!1))});return a(!1),()=>{f.subscription.unsubscribe()}},[]);const l=async(f,p)=>{a(!0);const{data:m,error:v}=await _e.auth.signInWithPassword({email:f,password:p});if(v||!m.user)return console.error("Sign in error:",v),n(null),a(!1),!1;const{data:_,error:E}=await _e.from("profiles").select("*").eq("id",m.user.id).single();return E||!_?(console.error("Profile fetch error:",E),await _e.auth.signOut(),n(null),a(!1),!1):(n(_),a(!1),!0)},c=async()=>{await _e.auth.signOut()};return T.jsx(uv.Provider,{value:{user:e,login:l,logout:c},children:!o&&i})},Ps=()=>{const i=ae.useContext(uv);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i};var pt=(i=>(i.LAB_ADMIN="Lab Admin",i.PHARMACY_ADMIN="Pharmacy Admin",i.APPROVER="Approver",i.ACCOUNTS="Accounts",i))(pt||{}),xe=(i=>(i.STANDARD="STANDARD",i.PURCHASE_ORDER="PURCHASE_ORDER",i.HISTOLOGY_PAYMENT="HISTOLOGY_PAYMENT",i))(xe||{}),W=(i=>(i.PENDING_APPROVAL="Pending Approval",i.APPROVED="Approved",i.DRAFT="Draft",i.PENDING_CHAIRMAN_REVIEW="Pending Chairman Review",i.PENDING_STORE_PRICING="Pending Store Pricing",i.PENDING_AUDITOR_REVIEW="Pending Auditor Review",i.PENDING_FINAL_APPROVAL="Pending Final Approval",i.PO_COMPLETED="Purchase Order Completed",i.PENDING_AUDITOR_APPROVAL="Pending Auditor Approval",i.PENDING_CHAIRMAN_APPROVAL="Pending Chairman Approval",i.HISTOLOGY_APPROVED="Histology Approved",i.PAYMENT_PROCESSING="Payment Processing",i.PAID="Paid",i.PROCESSED="Processed",i.QUERIED="Queried",i.REJECTED="Rejected",i))(W||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let XT,ZT;function ew(){return{geminiUrl:XT,vertexUrl:ZT}}function tw(i,e,n,o){var a,l;if(!(i!=null&&i.baseUrl)){const c=ew();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:n:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class In{}function se(i,e){const n=/\{([^}]+)\}/g;return i.replace(n,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function h(i,e,n){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in i))if(Array.isArray(n))i[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(i[f])){const p=i[f];if(Array.isArray(n))for(let m=0;m<p.length;m++){const v=p[m];h(v,e.slice(l+1),n[m])}else for(const m of p)h(m,e.slice(l+1),n)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in i||(i[f]=[{}]);const p=i[f];h(p[0],e.slice(l+1),n);return}(!i[c]||typeof i[c]!="object")&&(i[c]={}),i=i[c]}const o=e[e.length-1],a=i[o];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(i,n):i[o]=n}function d(i,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let o=0;o<e.length;o++){if(typeof i!="object"||i===null)return n;const a=e[o];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in i){const c=i[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(o+1),n)):n}else return n}else i=i[a]}return i}catch(o){if(o instanceof TypeError)return n;throw o}}function nw(i,e){for(const[n,o]of Object.entries(e)){const a=n.split("."),l=o.split("."),c=new Set;let f=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Rc(i,a,l,0,c)}}function Rc(i,e,n,o,a){if(o>=e.length||typeof i!="object"||i===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),f=i;if(c in f&&Array.isArray(f[c]))for(const p of f[c])Rc(p,e,n,o+1,a)}else if(l==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const c=i,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!a.has(m)),p={};for(const m of f)p[m]=c[m];for(const[m,v]of Object.entries(p)){const _=[];for(const E of n.slice(o))E==="*"?_.push(m):_.push(E);h(c,_,v)}for(const m of f)delete c[m]}}else{const c=i;l in c&&Rc(c[l],e,n,o+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iw(i){const e={},n=d(i,["operationName"]);n!=null&&h(e,["operationName"],n);const o=d(i,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function sw(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],rw(c)),e}function ow(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response"]);return c!=null&&h(e,["response"],aw(c)),e}function rw(i){const e={},n=d(i,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>lw(c))),h(e,["generatedVideos"],l)}const o=d(i,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function aw(i){const e={},n=d(i,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>uw(c))),h(e,["generatedVideos"],l)}const o=d(i,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function lw(i){const e={},n=d(i,["video"]);return n!=null&&h(e,["video"],mw(n)),e}function uw(i){const e={},n=d(i,["_self"]);return n!=null&&h(e,["video"],gw(n)),e}function cw(i){const e={},n=d(i,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function dw(i){const e={},n=d(i,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function fw(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response"]);return c!=null&&h(e,["response"],hw(c)),e}function hw(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["parent"]);o!=null&&h(e,["parent"],o);const a=d(i,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function cv(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response"]);return c!=null&&h(e,["response"],pw(c)),e}function pw(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["parent"]);o!=null&&h(e,["parent"],o);const a=d(i,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function mw(i){const e={},n=d(i,["uri"]);n!=null&&h(e,["uri"],n);const o=d(i,["encodedVideo"]);o!=null&&h(e,["videoBytes"],Qc(o));const a=d(i,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function gw(i){const e={},n=d(i,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=d(i,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],Qc(o));const a=d(i,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fm;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fm||(Fm={}));var Jm;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Jm||(Jm={}));var $m;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})($m||($m={}));var Rt;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Rt||(Rt={}));var Ym;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Ym||(Ym={}));var Km;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Km||(Km={}));var jm;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(jm||(jm={}));var Qm;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Qm||(Qm={}));var Wm;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Wm||(Wm={}));var Xm;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xm||(Xm={}));var Zm;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Zm||(Zm={}));var eg;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(eg||(eg={}));var tg;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(tg||(tg={}));var ng;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(ng||(ng={}));var ig;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ig||(ig={}));var sg;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sg||(sg={}));var og;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(og||(og={}));var rg;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rg||(rg={}));var wa;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(wa||(wa={}));var ag;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ag||(ag={}));var lg;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lg||(lg={}));var ug;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ug||(ug={}));var xc;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(xc||(xc={}));var cg;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cg||(cg={}));var dg;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(dg||(dg={}));var fg;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(fg||(fg={}));var hg;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(hg||(hg={}));var pg;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(pg||(pg={}));var mg;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(mg||(mg={}));var gg;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(gg||(gg={}));var yg;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(yg||(yg={}));var vg;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(vg||(vg={}));var _g;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_g||(_g={}));var Eg;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Eg||(Eg={}));var Sg;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Sg||(Sg={}));var Tg;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Tg||(Tg={}));var wg;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(wg||(wg={}));var Ag;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Ag||(Ag={}));var Cg;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Cg||(Cg={}));var bg;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(bg||(bg={}));var Rg;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Rg||(Rg={}));var xg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(xg||(xg={}));var Ng;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Ng||(Ng={}));var Ig;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Ig||(Ig={}));var Mg;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Mg||(Mg={}));var Dg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Dg||(Dg={}));var Pg;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Pg||(Pg={}));var Ug;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ug||(Ug={}));var Og;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Og||(Og={}));var kg;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kg||(kg={}));var Lg;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Lg||(Lg={}));var qg;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(qg||(qg={}));var Cs;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Cs||(Cs={}));class Nc{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Uo{get text(){var e,n,o,a,l,c,f,p;if(((a=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const E of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[w,C]of Object.entries(E))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(C!==null||C!==void 0)&&_.push(w);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,m+=E.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,n,o,a,l,c,f,p;if(((a=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[E,w]of Object.entries(_))E!=="inlineData"&&(w!==null||w!==void 0)&&v.push(E);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,a,l,c,f,p;if(((a=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,o,a,l,c,f,p,m;if(((a=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,a,l,c,f,p,m;if(((a=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Gg{}class Bg{}class yw{}class vw{}class _w{}class Ew{}class Hg{}class Vg{}class zg{}class Sw{}class Aa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Aa;let a;const l=e;return n?a=ow(l):a=sw(l),Object.assign(o,a),o}}class Fg{}class Jg{}class $g{}class Tw{}class ww{}class Aw{}class Wc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Wc,l=fw(e);return Object.assign(o,l),o}}class Cw{}class bw{}class Rw{}class Yg{}class xw{get text(){var e,n,o;let a="",l=!1;const c=[];for(const f of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,a+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,n,o;let a="";const l=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Nw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xc,l=cv(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function dv(i,e){const n=De(i,e);return n?n.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${n}`:n.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${n}`:n:""}function fv(i){return Array.isArray(i)?i.map(e=>Ca(e)):[Ca(i)]}function Ca(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function hv(i){const e=Ca(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pv(i){const e=Ca(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function mv(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>Kg(e)):[Kg(i)]}function Ic(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function jg(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Qg(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function yt(i){if(i==null)throw new Error("ContentUnion is required");return Ic(i)?i:{role:"user",parts:mv(i)}}function Zc(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=yt(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const n=yt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>yt(n)):[yt(e)]}function Wt(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(jg(i)||Qg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[yt(i)]}const e=[],n=[],o=Ic(i[0]);for(const a of i){const l=Ic(a);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(jg(a)||Qg(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return o||e.push({role:"user",parts:mv(n)}),e}function Iw(i,e){i.includes("null")&&(e.nullable=!0);const n=i.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Rt).includes(n[0].toUpperCase())?n[0].toUpperCase():Rt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Rt).includes(o.toUpperCase())?o.toUpperCase():Rt.TYPE_UNSPECIFIED})}}function Rs(i){const e={},n=["items"],o=["anyOf"],a=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=i.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,i=l[1]):l[1].type==="null"&&(e.nullable=!0,i=l[0])),i.type instanceof Array&&Iw(i.type,e);for(const[c,f]of Object.entries(i))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Rt).includes(f.toUpperCase())?f.toUpperCase():Rt.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Rs(f);else if(o.includes(c)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(Rs(m))}e[c]=p}else if(a.includes(c)){const p={};for(const[m,v]of Object.entries(f))p[m]=Rs(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function ed(i){return Rs(i)}function td(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function nd(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Us(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Rs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Rs(e.response));return i}function Os(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of i)e.push(n);return e}function Mw(i,e,n,o=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===o;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:a?`projects/${i.getProject()}/locations/${i.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Mn(i,e){if(typeof e!="string")throw new Error("name must be a string");return Mw(i,e,"cachedContents")}function gv(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function ri(i){return Qc(i)}function Dw(i){return i!=null&&typeof i=="object"&&"name"in i}function Pw(i){return i!=null&&typeof i=="object"&&"video"in i}function Uw(i){return i!=null&&typeof i=="object"&&"uri"in i}function yv(i){var e;let n;if(Dw(i)&&(n=i.name),!(Uw(i)&&(n=i.uri,n===void 0))&&!(Pw(i)&&(n=(e=i.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof i=="string"&&(n=i),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function vv(i,e){let n;return i.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function _v(i){for(const e of["models","tunedModels","publisherModels"])if(Ow(i,e))return i[e];return[]}function Ow(i,e){return i!==null&&typeof i=="object"&&e in i}function kw(i,e={}){const n=i,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Lw(i,e={}){const n=[],o=new Set;for(const a of i){const l=a.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=kw(a,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function Ev(i,e){let n;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(i.isVertexAI()){if(a>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function qw(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Sv(i){if(typeof i!="object"||i===null)return{};const e=i,n=e.inlinedResponses;if(typeof n!="object"||n===null)return i;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return i;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function ks(i,e){const n=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Tv(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gw(i){const e={},n=d(i,["responsesFile"]);n!=null&&h(e,["fileName"],n);const o=d(i,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>gA(c))),h(e,["inlinedResponses"],l)}const a=d(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function Bw(i){const e={},n=d(i,["predictionsFormat"]);n!=null&&h(e,["format"],n);const o=d(i,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const a=d(i,["bigqueryDestination","outputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Hw(i){const e={},n=d(i,["format"]);n!=null&&h(e,["predictionsFormat"],n);const o=d(i,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const a=d(i,["bigqueryUri"]);if(a!=null&&h(e,["bigqueryDestination","outputUri"],a),d(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ga(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const a=d(i,["metadata","state"]);a!=null&&h(e,["state"],Tv(a));const l=d(i,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=d(i,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const f=d(i,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const p=d(i,["metadata","model"]);p!=null&&h(e,["model"],p);const m=d(i,["metadata","output"]);return m!=null&&h(e,["dest"],Gw(Sv(m))),e}function Mc(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["displayName"]);o!=null&&h(e,["displayName"],o);const a=d(i,["state"]);a!=null&&h(e,["state"],Tv(a));const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["createTime"]);c!=null&&h(e,["createTime"],c);const f=d(i,["startTime"]);f!=null&&h(e,["startTime"],f);const p=d(i,["endTime"]);p!=null&&h(e,["endTime"],p);const m=d(i,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=d(i,["model"]);v!=null&&h(e,["model"],v);const _=d(i,["inputConfig"]);_!=null&&h(e,["src"],Vw(_));const E=d(i,["outputConfig"]);E!=null&&h(e,["dest"],Bw(Sv(E)));const w=d(i,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function Vw(i){const e={},n=d(i,["instancesFormat"]);n!=null&&h(e,["format"],n);const o=d(i,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const a=d(i,["bigquerySource","inputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function zw(i,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&h(n,["fileName"],o);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>mA(i,c))),h(n,["requests","requests"],l)}return n}function Fw(i){const e={},n=d(i,["format"]);n!=null&&h(e,["instancesFormat"],n);const o=d(i,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const a=d(i,["bigqueryUri"]);if(a!=null&&h(e,["bigquerySource","inputUri"],a),d(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Jw(i){const e={},n=d(i,["data"]);if(n!=null&&h(e,["data"],n),d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function $w(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ks(i,o)),n}function Yw(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ks(i,o)),n}function Kw(i){const e={},n=d(i,["content"]);n!=null&&h(e,["content"],n);const o=d(i,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],jw(o));const a=d(i,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const l=d(i,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(i,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(i,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const p=d(i,["index"]);p!=null&&h(e,["index"],p);const m=d(i,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=d(i,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(w=>w)),h(e,["safetyRatings"],E)}const _=d(i,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function jw(i){const e={},n=d(i,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>a)),h(e,["citations"],o)}return e}function wv(i){const e={},n=d(i,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>wA(l))),h(e,["parts"],a)}const o=d(i,["role"]);return o!=null&&h(e,["role"],o),e}function Qw(i,e){const n={},o=d(i,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),d(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Ww(i,e){const n={},o=d(i,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const a=d(i,["dest"]);return e!==void 0&&a!=null&&h(e,["outputConfig"],Hw(qw(a))),n}function Wg(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["src"]);a!=null&&h(n,["batch","inputConfig"],zw(i,Ev(i,a)));const l=d(e,["config"]);return l!=null&&Qw(l,n),n}function Xw(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["model"],De(i,o));const a=d(e,["src"]);a!=null&&h(n,["inputConfig"],Fw(Ev(i,a)));const l=d(e,["config"]);return l!=null&&Ww(l,n),n}function Zw(i,e){const n={},o=d(i,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),n}function eA(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["src"]);a!=null&&h(n,["batch","inputConfig"],aA(i,a));const l=d(e,["config"]);return l!=null&&Zw(l,n),n}function tA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ks(i,o)),n}function nA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ks(i,o)),n}function iA(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["name"]);o!=null&&h(e,["name"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);return l!=null&&h(e,["error"],l),e}function sA(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["name"]);o!=null&&h(e,["name"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);return l!=null&&h(e,["error"],l),e}function oA(i,e){const n={},o=d(e,["contents"]);if(o!=null){let l=Zc(i,o);Array.isArray(l)&&(l=l.map(c=>c)),h(n,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(h(n,["_self"],rA(a,n)),nw(n,{"requests[].*":"requests[].request.*"})),n}function rA(i,e){const n={},o=d(i,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const a=d(i,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const l=d(i,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function aA(i,e){const n={},o=d(e,["fileName"]);o!=null&&h(n,["file_name"],o);const a=d(e,["inlinedRequests"]);return a!=null&&h(n,["requests"],oA(i,a)),n}function lA(i){const e={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(i,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function uA(i,e,n){const o={},a=d(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],wv(yt(a)));const l=d(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(o,["topP"],c);const f=d(e,["topK"]);f!=null&&h(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&h(o,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&h(o,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&h(o,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&h(o,["presencePenalty"],w);const C=d(e,["frequencyPenalty"]);C!=null&&h(o,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&h(o,["seed"],x);const b=d(e,["responseMimeType"]);b!=null&&h(o,["responseMimeType"],b);const q=d(e,["responseSchema"]);q!=null&&h(o,["responseSchema"],ed(q));const B=d(e,["responseJsonSchema"]);if(B!=null&&h(o,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=d(e,["safetySettings"]);if(n!==void 0&&D!=null){let te=D;Array.isArray(te)&&(te=te.map(ce=>AA(ce))),h(n,["safetySettings"],te)}const $=d(e,["tools"]);if(n!==void 0&&$!=null){let te=Os($);Array.isArray(te)&&(te=te.map(ce=>CA(Us(ce)))),h(n,["tools"],te)}const X=d(e,["toolConfig"]);if(n!==void 0&&X!=null&&h(n,["toolConfig"],X),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=d(e,["cachedContent"]);n!==void 0&&ee!=null&&h(n,["cachedContent"],Mn(i,ee));const J=d(e,["responseModalities"]);J!=null&&h(o,["responseModalities"],J);const z=d(e,["mediaResolution"]);z!=null&&h(o,["mediaResolution"],z);const N=d(e,["speechConfig"]);if(N!=null&&h(o,["speechConfig"],td(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=d(e,["thinkingConfig"]);j!=null&&h(o,["thinkingConfig"],j);const ne=d(e,["imageConfig"]);return ne!=null&&h(o,["imageConfig"],ne),o}function cA(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>Kw(m))),h(e,["candidates"],p)}const a=d(i,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const l=d(i,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(i,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(i,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function dA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ks(i,o)),n}function fA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],ks(i,o)),n}function hA(i){const e={};if(d(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(i,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function pA(i){const e={};if(d(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(i,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function mA(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["request","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let f=Wt(a);Array.isArray(f)&&(f=f.map(p=>wv(p))),h(n,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(n,["metadata"],l);const c=d(e,["config"]);return c!=null&&h(n,["request","generationConfig"],uA(i,c,d(n,["request"],{}))),n}function gA(i){const e={},n=d(i,["response"]);n!=null&&h(e,["response"],cA(n));const o=d(i,["error"]);return o!=null&&h(e,["error"],o),e}function yA(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);if(e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),d(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function vA(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const l=d(i,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),n}function _A(i){const e={},n=d(i,["config"]);return n!=null&&yA(n,e),e}function EA(i){const e={},n=d(i,["config"]);return n!=null&&vA(n,e),e}function SA(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>ga(c))),h(e,["batchJobs"],l)}return e}function TA(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Mc(c))),h(e,["batchJobs"],l)}return e}function wA(i){const e={},n=d(i,["functionCall"]);n!=null&&h(e,["functionCall"],n);const o=d(i,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const a=d(i,["executableCode"]);a!=null&&h(e,["executableCode"],a);const l=d(i,["fileData"]);l!=null&&h(e,["fileData"],lA(l));const c=d(i,["functionResponse"]);c!=null&&h(e,["functionResponse"],c);const f=d(i,["inlineData"]);f!=null&&h(e,["inlineData"],Jw(f));const p=d(i,["text"]);p!=null&&h(e,["text"],p);const m=d(i,["thought"]);m!=null&&h(e,["thought"],m);const v=d(i,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const _=d(i,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function AA(i){const e={},n=d(i,["category"]);if(n!=null&&h(e,["category"],n),d(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(i,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function CA(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(i,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const a=d(i,["computerUse"]);a!=null&&h(e,["computerUse"],a);const l=d(i,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(i,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(i,["googleMaps"]);f!=null&&h(e,["googleMaps"],hA(f));const p=d(i,["googleSearch"]);p!=null&&h(e,["googleSearch"],pA(p));const m=d(i,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Nn||(Nn={}));class Pi{constructor(e,n,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,a)}init(e,n,o){var a,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bA extends In{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Pi(Nn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Wg(this.apiClient,e),o=n._url,a=se("{model}:batchGenerateContent",o),f=n.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const E=_.systemInstruction;delete _.systemInstruction;const w=_.request;w.systemInstruction=E,_.request=w}m.push(_)}return f.requests=m,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},a=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${a}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${a}`;else if(c)o.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Xw(this.apiClient,e);return f=se("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Mc(v))}else{const m=Wg(this.apiClient,e);return f=se("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>ga(v))}}async createEmbeddingsInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=eA(this.apiClient,e);return l=se("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>ga(p))}}async get(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=fA(this.apiClient,e);return f=se("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Mc(v))}else{const m=dA(this.apiClient,e);return f=se("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>ga(v))}}async cancel(e){var n,o,a,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=Yw(this.apiClient,e);c=se("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=$w(this.apiClient,e);c=se("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=EA(e);return f=se("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=TA(v),E=new Yg;return Object.assign(E,_),E})}else{const m=_A(e);return f=se("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=SA(v),E=new Yg;return Object.assign(E,_),E})}}async delete(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=nA(this.apiClient,e);return f=se("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>sA(v))}else{const m=tA(this.apiClient,e);return f=se("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>iA(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RA(i){const e={},n=d(i,["data"]);if(n!=null&&h(e,["data"],n),d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Xg(i){const e={},n=d(i,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>KA(l))),h(e,["parts"],a)}const o=d(i,["role"]);return o!=null&&h(e,["role"],o),e}function xA(i,e){const n={},o=d(i,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const a=d(i,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const l=d(i,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(i,["contents"]);if(e!==void 0&&c!=null){let v=Wt(c);Array.isArray(v)&&(v=v.map(_=>Xg(_))),h(e,["contents"],v)}const f=d(i,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],Xg(yt(f)));const p=d(i,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>jA(_))),h(e,["tools"],v)}const m=d(i,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],m),d(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function NA(i,e){const n={},o=d(i,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const a=d(i,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const l=d(i,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(i,["contents"]);if(e!==void 0&&c!=null){let _=Wt(c);Array.isArray(_)&&(_=_.map(E=>E)),h(e,["contents"],_)}const f=d(i,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],yt(f));const p=d(i,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>QA(E))),h(e,["tools"],_)}const m=d(i,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=d(i,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),n}function IA(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["model"],dv(i,o));const a=d(e,["config"]);return a!=null&&xA(a,n),n}function MA(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["model"],dv(i,o));const a=d(e,["config"]);return a!=null&&NA(a,n),n}function DA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mn(i,o)),n}function PA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mn(i,o)),n}function UA(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function OA(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function kA(i){const e={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(i,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function LA(i){const e={};if(d(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(i,["description"]);n!=null&&h(e,["description"],n);const o=d(i,["name"]);o!=null&&h(e,["name"],o);const a=d(i,["parameters"]);a!=null&&h(e,["parameters"],a);const l=d(i,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&h(e,["response"],c);const f=d(i,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function qA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mn(i,o)),n}function GA(i,e){const n={},o=d(e,["name"]);return o!=null&&h(n,["_url","name"],Mn(i,o)),n}function BA(i){const e={};if(d(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(i,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function HA(i){const e={};if(d(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(i,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function VA(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function zA(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function FA(i){const e={},n=d(i,["config"]);return n!=null&&VA(n,e),e}function JA(i){const e={},n=d(i,["config"]);return n!=null&&zA(n,e),e}function $A(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function YA(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function KA(i){const e={},n=d(i,["functionCall"]);n!=null&&h(e,["functionCall"],n);const o=d(i,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const a=d(i,["executableCode"]);a!=null&&h(e,["executableCode"],a);const l=d(i,["fileData"]);l!=null&&h(e,["fileData"],kA(l));const c=d(i,["functionResponse"]);c!=null&&h(e,["functionResponse"],c);const f=d(i,["inlineData"]);f!=null&&h(e,["inlineData"],RA(f));const p=d(i,["text"]);p!=null&&h(e,["text"],p);const m=d(i,["thought"]);m!=null&&h(e,["thought"],m);const v=d(i,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const _=d(i,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function jA(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(i,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const a=d(i,["computerUse"]);a!=null&&h(e,["computerUse"],a);const l=d(i,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(i,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(i,["googleMaps"]);f!=null&&h(e,["googleMaps"],BA(f));const p=d(i,["googleSearch"]);p!=null&&h(e,["googleSearch"],HA(p));const m=d(i,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function QA(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>LA(E))),h(e,["functionDeclarations"],_)}const o=d(i,["retrieval"]);o!=null&&h(e,["retrieval"],o);const a=d(i,["googleSearchRetrieval"]);a!=null&&h(e,["googleSearchRetrieval"],a);const l=d(i,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(i,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(i,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const p=d(i,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const m=d(i,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=d(i,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function WA(i,e){const n={},o=d(i,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const a=d(i,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function XA(i,e){const n={},o=d(i,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const a=d(i,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function ZA(i,e){const n={},o=d(e,["name"]);o!=null&&h(n,["_url","name"],Mn(i,o));const a=d(e,["config"]);return a!=null&&WA(a,n),n}function eC(i,e){const n={},o=d(e,["name"]);o!=null&&h(n,["_url","name"],Mn(i,o));const a=d(e,["config"]);return a!=null&&XA(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tC extends In{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Pi(Nn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=MA(this.apiClient,e);return f=se("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=IA(this.apiClient,e);return f=se("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=GA(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=qA(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=PA(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=OA(v),E=new Jg;return Object.assign(E,_),E})}else{const m=DA(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=UA(v),E=new Jg;return Object.assign(E,_),E})}}async update(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=eC(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=ZA(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=JA(e);return f=se("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=YA(v),E=new $g;return Object.assign(E,_),E})}else{const m=FA(e);return f=se("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=$A(v),E=new $g;return Object.assign(E,_),E})}}}function Zg(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(i){return this instanceof Je?(this.v=i,this):new Je(i)}function xs(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(w){return function(C){return Promise.resolve(C).then(w,_)}}function f(w,C){o[w]&&(a[w]=function(x){return new Promise(function(b,q){l.push([w,x,b,q])>1||p(w,x)})},C&&(a[w]=C(a[w])))}function p(w,C){try{m(o[w](C))}catch(x){E(l[0][3],x)}}function m(w){w.value instanceof Je?Promise.resolve(w.value.v).then(v,_):E(l[0][2],w)}function v(w){p("next",w)}function _(w){p("throw",w)}function E(w,C){w(C),l.shift(),l.length&&p(l[0][0],l[0][1])}}function qo(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof Zg=="function"?Zg(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=i[l]&&function(c){return new Promise(function(f,p){c=i[l](c),a(f,p,c.done,c.value)})}}function a(l,c,f,p){Promise.resolve(p).then(function(m){l({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nC(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Av(n)}function Av(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function iC(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ey(i){if(i===void 0||i.length===0)return[];const e=[],n=i.length;let o=0;for(;o<n;)if(i[o].role==="user")e.push(i[o]),o++;else{const a=[];let l=!0;for(;o<n&&i[o].role==="model";)a.push(i[o]),l&&!Av(i[o])&&(l=!1),o++;l?e.push(...a):e.pop()}return e}class sC{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new oC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class oC{constructor(e,n,o,a={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),iC(l)}async sendMessage(e){var n;await this.sendPromise;const o=yt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,c,f;const p=await a,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let E=[];v!=null&&(E=(f=v.slice(_))!==null&&f!==void 0?f:[]);const w=m?[m]:[];this.recordHistory(o,w,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const o=yt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?ey(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,a;return xs(this,arguments,function*(){var c,f,p,m;const v=[];try{for(var _=!0,E=qo(e),w;w=yield Je(E.next()),c=w.done,!c;_=!0){m=w.value,_=!1;const C=m;if(nC(C)){const x=(a=(o=C.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content;x!==void 0&&v.push(x)}yield yield Je(C)}}catch(C){f={error:C}}finally{try{!_&&!c&&(p=E.return)&&(yield Je(p.call(E)))}finally{if(f)throw f.error}}this.recordHistory(n,v)})}recordHistory(e,n,o){let a=[];n.length>0&&n.every(l=>l.role!==void 0)?a=n:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ey(o)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ma extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ma.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rC(i){const e={},n=d(i,["file"]);return n!=null&&h(e,["file"],n),e}function aC(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function lC(i){const e={},n=d(i,["name"]);return n!=null&&h(e,["_url","file"],yv(n)),e}function uC(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function cC(i){const e={},n=d(i,["name"]);return n!=null&&h(e,["_url","file"],yv(n)),e}function dC(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function fC(i){const e={},n=d(i,["config"]);return n!=null&&dC(n,e),e}function hC(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pC extends In{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Pi(Nn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fC(e);return l=se("files",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=hC(p),v=new Cw;return Object.assign(v,m),v})}}async createInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rC(e);return l=se("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=aC(p),v=new bw;return Object.assign(v,m),v})}}async get(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cC(e);return l=se("files/{file}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lC(e);return l=se("files/{file}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=uC(p),v=new Rw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ya(i){const e={},n=d(i,["data"]);if(n!=null&&h(e,["data"],n),d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function mC(i){const e={},n=d(i,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>IC(l))),h(e,["parts"],a)}const o=d(i,["role"]);return o!=null&&h(e,["role"],o),e}function gC(i){const e={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(i,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function yC(i){const e={};if(d(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(i,["description"]);n!=null&&h(e,["description"],n);const o=d(i,["name"]);o!=null&&h(e,["name"],o);const a=d(i,["parameters"]);a!=null&&h(e,["parameters"],a);const l=d(i,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&h(e,["response"],c);const f=d(i,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function vC(i){const e={},n=d(i,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=d(i,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const a=d(i,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const l=d(i,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(i,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(i,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const p=d(i,["logprobs"]);p!=null&&h(e,["logprobs"],p);const m=d(i,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=d(i,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const _=d(i,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const E=d(i,["responseLogprobs"]);E!=null&&h(e,["responseLogprobs"],E);const w=d(i,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const C=d(i,["responseModalities"]);C!=null&&h(e,["responseModalities"],C);const x=d(i,["responseSchema"]);x!=null&&h(e,["responseSchema"],x);const b=d(i,["routingConfig"]);b!=null&&h(e,["routingConfig"],b);const q=d(i,["seed"]);q!=null&&h(e,["seed"],q);const B=d(i,["speechConfig"]);B!=null&&h(e,["speechConfig"],Cv(B));const D=d(i,["stopSequences"]);D!=null&&h(e,["stopSequences"],D);const $=d(i,["temperature"]);$!=null&&h(e,["temperature"],$);const X=d(i,["thinkingConfig"]);X!=null&&h(e,["thinkingConfig"],X);const ee=d(i,["topK"]);ee!=null&&h(e,["topK"],ee);const J=d(i,["topP"]);if(J!=null&&h(e,["topP"],J),d(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _C(i){const e={};if(d(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(i,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function EC(i){const e={};if(d(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(i,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function SC(i,e){const n={},o=d(i,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const a=d(i,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const l=d(i,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(i,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(i,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const p=d(i,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(i,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=d(i,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const _=d(i,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],nd(_));const E=d(i,["thinkingConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","thinkingConfig"],E);const w=d(i,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=d(i,["systemInstruction"]);e!==void 0&&C!=null&&h(e,["setup","systemInstruction"],mC(yt(C)));const x=d(i,["tools"]);if(e!==void 0&&x!=null){let ee=Os(x);Array.isArray(ee)&&(ee=ee.map(J=>DC(Us(J)))),h(e,["setup","tools"],ee)}const b=d(i,["sessionResumption"]);e!==void 0&&b!=null&&h(e,["setup","sessionResumption"],MC(b));const q=d(i,["inputAudioTranscription"]);e!==void 0&&q!=null&&h(e,["setup","inputAudioTranscription"],q);const B=d(i,["outputAudioTranscription"]);e!==void 0&&B!=null&&h(e,["setup","outputAudioTranscription"],B);const D=d(i,["realtimeInputConfig"]);e!==void 0&&D!=null&&h(e,["setup","realtimeInputConfig"],D);const $=d(i,["contextWindowCompression"]);e!==void 0&&$!=null&&h(e,["setup","contextWindowCompression"],$);const X=d(i,["proactivity"]);return e!==void 0&&X!=null&&h(e,["setup","proactivity"],X),n}function TC(i,e){const n={},o=d(i,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],vC(o));const a=d(i,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const l=d(i,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(i,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(i,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const p=d(i,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(i,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=d(i,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const _=d(i,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],Cv(nd(_)));const E=d(i,["thinkingConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","thinkingConfig"],E);const w=d(i,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=d(i,["systemInstruction"]);e!==void 0&&C!=null&&h(e,["setup","systemInstruction"],yt(C));const x=d(i,["tools"]);if(e!==void 0&&x!=null){let ee=Os(x);Array.isArray(ee)&&(ee=ee.map(J=>PC(Us(J)))),h(e,["setup","tools"],ee)}const b=d(i,["sessionResumption"]);e!==void 0&&b!=null&&h(e,["setup","sessionResumption"],b);const q=d(i,["inputAudioTranscription"]);e!==void 0&&q!=null&&h(e,["setup","inputAudioTranscription"],q);const B=d(i,["outputAudioTranscription"]);e!==void 0&&B!=null&&h(e,["setup","outputAudioTranscription"],B);const D=d(i,["realtimeInputConfig"]);e!==void 0&&D!=null&&h(e,["setup","realtimeInputConfig"],D);const $=d(i,["contextWindowCompression"]);e!==void 0&&$!=null&&h(e,["setup","contextWindowCompression"],$);const X=d(i,["proactivity"]);return e!==void 0&&X!=null&&h(e,["setup","proactivity"],X),n}function wC(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["setup","model"],De(i,o));const a=d(e,["config"]);return a!=null&&h(n,["config"],SC(a,n)),n}function AC(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["setup","model"],De(i,o));const a=d(e,["config"]);return a!=null&&h(n,["config"],TC(a,n)),n}function CC(i){const e={},n=d(i,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function bC(i){const e={},n=d(i,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>a)),h(e,["weightedPrompts"],o)}return e}function RC(i){const e={},n=d(i,["media"]);if(n!=null){let m=fv(n);Array.isArray(m)&&(m=m.map(v=>ya(v))),h(e,["mediaChunks"],m)}const o=d(i,["audio"]);o!=null&&h(e,["audio"],ya(pv(o)));const a=d(i,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const l=d(i,["video"]);l!=null&&h(e,["video"],ya(hv(l)));const c=d(i,["text"]);c!=null&&h(e,["text"],c);const f=d(i,["activityStart"]);f!=null&&h(e,["activityStart"],f);const p=d(i,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function xC(i){const e={},n=d(i,["media"]);if(n!=null){let m=fv(n);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const o=d(i,["audio"]);o!=null&&h(e,["audio"],pv(o));const a=d(i,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const l=d(i,["video"]);l!=null&&h(e,["video"],hv(l));const c=d(i,["text"]);c!=null&&h(e,["text"],c);const f=d(i,["activityStart"]);f!=null&&h(e,["activityStart"],f);const p=d(i,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function NC(i){const e={},n=d(i,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const o=d(i,["serverContent"]);o!=null&&h(e,["serverContent"],o);const a=d(i,["toolCall"]);a!=null&&h(e,["toolCall"],a);const l=d(i,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=d(i,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],UC(c));const f=d(i,["goAway"]);f!=null&&h(e,["goAway"],f);const p=d(i,["sessionResumptionUpdate"]);return p!=null&&h(e,["sessionResumptionUpdate"],p),e}function IC(i){const e={},n=d(i,["functionCall"]);n!=null&&h(e,["functionCall"],n);const o=d(i,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const a=d(i,["executableCode"]);a!=null&&h(e,["executableCode"],a);const l=d(i,["fileData"]);l!=null&&h(e,["fileData"],gC(l));const c=d(i,["functionResponse"]);c!=null&&h(e,["functionResponse"],c);const f=d(i,["inlineData"]);f!=null&&h(e,["inlineData"],ya(f));const p=d(i,["text"]);p!=null&&h(e,["text"],p);const m=d(i,["thought"]);m!=null&&h(e,["thought"],m);const v=d(i,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const _=d(i,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function MC(i){const e={},n=d(i,["handle"]);if(n!=null&&h(e,["handle"],n),d(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Cv(i){const e={},n=d(i,["languageCode"]);n!=null&&h(e,["languageCode"],n);const o=d(i,["voiceConfig"]);if(o!=null&&h(e,["voiceConfig"],o),d(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function DC(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(i,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const a=d(i,["computerUse"]);a!=null&&h(e,["computerUse"],a);const l=d(i,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(i,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(i,["googleMaps"]);f!=null&&h(e,["googleMaps"],_C(f));const p=d(i,["googleSearch"]);p!=null&&h(e,["googleSearch"],EC(p));const m=d(i,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function PC(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>yC(E))),h(e,["functionDeclarations"],_)}const o=d(i,["retrieval"]);o!=null&&h(e,["retrieval"],o);const a=d(i,["googleSearchRetrieval"]);a!=null&&h(e,["googleSearchRetrieval"],a);const l=d(i,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(i,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(i,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const p=d(i,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const m=d(i,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=d(i,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function UC(i){const e={},n=d(i,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const o=d(i,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const a=d(i,["candidatesTokenCount"]);a!=null&&h(e,["responseTokenCount"],a);const l=d(i,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=d(i,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const f=d(i,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const p=d(i,["promptTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(C=>C)),h(e,["promptTokensDetails"],w)}const m=d(i,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(C=>C)),h(e,["cacheTokensDetails"],w)}const v=d(i,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(C=>C)),h(e,["responseTokensDetails"],w)}const _=d(i,["toolUsePromptTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(C=>C)),h(e,["toolUsePromptTokensDetails"],w)}const E=d(i,["trafficType"]);return E!=null&&h(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OC(i){const e={},n=d(i,["data"]);if(n!=null&&h(e,["data"],n),d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function kC(i){const e={},n=d(i,["content"]);n!=null&&h(e,["content"],n);const o=d(i,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],LC(o));const a=d(i,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const l=d(i,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(i,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(i,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const p=d(i,["index"]);p!=null&&h(e,["index"],p);const m=d(i,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=d(i,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(w=>w)),h(e,["safetyRatings"],E)}const _=d(i,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function LC(i){const e={},n=d(i,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>a)),h(e,["citations"],o)}return e}function qC(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let l=Wt(a);Array.isArray(l)&&(l=l.map(c=>c)),h(n,["contents"],l)}return n}function GC(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["tokensInfo"],a)}return e}function BC(i){const e={},n=d(i,["values"]);n!=null&&h(e,["values"],n);const o=d(i,["statistics"]);return o!=null&&h(e,["statistics"],HC(o)),e}function HC(i){const e={},n=d(i,["truncated"]);n!=null&&h(e,["truncated"],n);const o=d(i,["token_count"]);return o!=null&&h(e,["tokenCount"],o),e}function Da(i){const e={},n=d(i,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>$b(l))),h(e,["parts"],a)}const o=d(i,["role"]);return o!=null&&h(e,["role"],o),e}function VC(i){const e={},n=d(i,["controlType"]);n!=null&&h(e,["controlType"],n);const o=d(i,["enableControlImageComputation"]);return o!=null&&h(e,["computeControl"],o),e}function zC(i){const e={};if(d(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function FC(i,e){const n={},o=d(i,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],yt(o));const a=d(i,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>Iv(f))),h(e,["tools"],c)}const l=d(i,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],Pb(l)),n}function JC(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let c=Wt(a);Array.isArray(c)&&(c=c.map(f=>Da(f))),h(n,["contents"],c)}const l=d(e,["config"]);return l!=null&&zC(l),n}function $C(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let c=Wt(a);Array.isArray(c)&&(c=c.map(f=>f)),h(n,["contents"],c)}const l=d(e,["config"]);return l!=null&&FC(l,n),n}function YC(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["totalTokens"]);o!=null&&h(e,["totalTokens"],o);const a=d(i,["cachedContentTokenCount"]);return a!=null&&h(e,["cachedContentTokenCount"],a),e}function KC(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["totalTokens"]);return o!=null&&h(e,["totalTokens"],o),e}function jC(i,e){const n={},o=d(e,["model"]);return o!=null&&h(n,["_url","name"],De(i,o)),n}function QC(i,e){const n={},o=d(e,["model"]);return o!=null&&h(n,["_url","name"],De(i,o)),n}function WC(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function XC(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function ZC(i,e){const n={},o=d(i,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const a=d(i,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const l=d(i,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(i,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(i,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const p=d(i,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const m=d(i,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=d(i,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const _=d(i,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const E=d(i,["includeRaiReason"]);e!==void 0&&E!=null&&h(e,["parameters","includeRaiReason"],E);const w=d(i,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const C=d(i,["outputMimeType"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","mimeType"],C);const x=d(i,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const b=d(i,["addWatermark"]);e!==void 0&&b!=null&&h(e,["parameters","addWatermark"],b);const q=d(i,["labels"]);e!==void 0&&q!=null&&h(e,["labels"],q);const B=d(i,["editMode"]);e!==void 0&&B!=null&&h(e,["parameters","editMode"],B);const D=d(i,["baseSteps"]);return e!==void 0&&D!=null&&h(e,["parameters","editConfig","baseSteps"],D),n}function eb(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>Xb(p))),h(n,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&ZC(c,n),n}function tb(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Pa(l))),h(e,["generatedImages"],a)}return e}function nb(i,e){const n={},o=d(i,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const a=d(i,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const l=d(i,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ib(i,e){const n={},o=d(i,["taskType"]);e!==void 0&&o!=null&&h(e,["instances[]","task_type"],o);const a=d(i,["title"]);e!==void 0&&a!=null&&h(e,["instances[]","title"],a);const l=d(i,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=d(i,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const f=d(i,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),n}function sb(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let f=Zc(i,a);Array.isArray(f)&&(f=f.map(p=>p)),h(n,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&nb(l,n);const c=d(e,["model"]);return c!==void 0&&h(n,["requests[]","model"],De(i,c)),n}function ob(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let c=Zc(i,a);Array.isArray(c)&&(c=c.map(f=>f)),h(n,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&ib(l,n),n}function rb(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const a=d(i,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function ab(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>BC(c))),h(e,["embeddings"],l)}const a=d(i,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function lb(i){const e={},n=d(i,["endpoint"]);n!=null&&h(e,["name"],n);const o=d(i,["deployedModelId"]);return o!=null&&h(e,["deployedModelId"],o),e}function ub(i){const e={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(i,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function cb(i){const e={};if(d(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(i,["description"]);n!=null&&h(e,["description"],n);const o=d(i,["name"]);o!=null&&h(e,["name"],o);const a=d(i,["parameters"]);a!=null&&h(e,["parameters"],a);const l=d(i,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(i,["response"]);c!=null&&h(e,["response"],c);const f=d(i,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function db(i,e,n){const o={},a=d(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],Da(yt(a)));const l=d(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(o,["topP"],c);const f=d(e,["topK"]);f!=null&&h(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&h(o,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&h(o,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&h(o,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&h(o,["presencePenalty"],w);const C=d(e,["frequencyPenalty"]);C!=null&&h(o,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&h(o,["seed"],x);const b=d(e,["responseMimeType"]);b!=null&&h(o,["responseMimeType"],b);const q=d(e,["responseSchema"]);q!=null&&h(o,["responseSchema"],ed(q));const B=d(e,["responseJsonSchema"]);if(B!=null&&h(o,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=d(e,["safetySettings"]);if(n!==void 0&&D!=null){let te=D;Array.isArray(te)&&(te=te.map(ce=>Zb(ce))),h(n,["safetySettings"],te)}const $=d(e,["tools"]);if(n!==void 0&&$!=null){let te=Os($);Array.isArray(te)&&(te=te.map(ce=>oR(Us(ce)))),h(n,["tools"],te)}const X=d(e,["toolConfig"]);if(n!==void 0&&X!=null&&h(n,["toolConfig"],X),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=d(e,["cachedContent"]);n!==void 0&&ee!=null&&h(n,["cachedContent"],Mn(i,ee));const J=d(e,["responseModalities"]);J!=null&&h(o,["responseModalities"],J);const z=d(e,["mediaResolution"]);z!=null&&h(o,["mediaResolution"],z);const N=d(e,["speechConfig"]);if(N!=null&&h(o,["speechConfig"],td(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=d(e,["thinkingConfig"]);j!=null&&h(o,["thinkingConfig"],j);const ne=d(e,["imageConfig"]);return ne!=null&&h(o,["imageConfig"],ne),o}function fb(i,e,n){const o={},a=d(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],yt(a));const l=d(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(o,["topP"],c);const f=d(e,["topK"]);f!=null&&h(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&h(o,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&h(o,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&h(o,["logprobs"],E);const w=d(e,["presencePenalty"]);w!=null&&h(o,["presencePenalty"],w);const C=d(e,["frequencyPenalty"]);C!=null&&h(o,["frequencyPenalty"],C);const x=d(e,["seed"]);x!=null&&h(o,["seed"],x);const b=d(e,["responseMimeType"]);b!=null&&h(o,["responseMimeType"],b);const q=d(e,["responseSchema"]);q!=null&&h(o,["responseSchema"],ed(q));const B=d(e,["responseJsonSchema"]);B!=null&&h(o,["responseJsonSchema"],B);const D=d(e,["routingConfig"]);D!=null&&h(o,["routingConfig"],D);const $=d(e,["modelSelectionConfig"]);$!=null&&h(o,["modelConfig"],$);const X=d(e,["safetySettings"]);if(n!==void 0&&X!=null){let U=X;Array.isArray(U)&&(U=U.map(G=>G)),h(n,["safetySettings"],U)}const ee=d(e,["tools"]);if(n!==void 0&&ee!=null){let U=Os(ee);Array.isArray(U)&&(U=U.map(G=>Iv(Us(G)))),h(n,["tools"],U)}const J=d(e,["toolConfig"]);n!==void 0&&J!=null&&h(n,["toolConfig"],J);const z=d(e,["labels"]);n!==void 0&&z!=null&&h(n,["labels"],z);const N=d(e,["cachedContent"]);n!==void 0&&N!=null&&h(n,["cachedContent"],Mn(i,N));const j=d(e,["responseModalities"]);j!=null&&h(o,["responseModalities"],j);const ne=d(e,["mediaResolution"]);ne!=null&&h(o,["mediaResolution"],ne);const te=d(e,["speechConfig"]);te!=null&&h(o,["speechConfig"],Nv(td(te)));const ce=d(e,["audioTimestamp"]);ce!=null&&h(o,["audioTimestamp"],ce);const me=d(e,["thinkingConfig"]);me!=null&&h(o,["thinkingConfig"],me);const de=d(e,["imageConfig"]);return de!=null&&h(o,["imageConfig"],de),o}function ty(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let c=Wt(a);Array.isArray(c)&&(c=c.map(f=>Da(f))),h(n,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(n,["generationConfig"],db(i,l,n)),n}function ny(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["contents"]);if(a!=null){let c=Wt(a);Array.isArray(c)&&(c=c.map(f=>f)),h(n,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(n,["generationConfig"],fb(i,l,n)),n}function iy(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>kC(m))),h(e,["candidates"],p)}const a=d(i,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const l=d(i,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(i,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(i,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function sy(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),h(e,["candidates"],m)}const a=d(i,["createTime"]);a!=null&&h(e,["createTime"],a);const l=d(i,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=d(i,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const f=d(i,["responseId"]);f!=null&&h(e,["responseId"],f);const p=d(i,["usageMetadata"]);return p!=null&&h(e,["usageMetadata"],p),e}function hb(i,e){const n={};if(d(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(i,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const a=d(i,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const l=d(i,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),d(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(i,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const f=d(i,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=d(i,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=d(i,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const v=d(i,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const _=d(i,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const E=d(i,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E),d(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(i,["imageSize"]);if(e!==void 0&&w!=null&&h(e,["parameters","sampleImageSize"],w),d(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function pb(i,e){const n={},o=d(i,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const a=d(i,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const l=d(i,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(i,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(i,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const p=d(i,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const m=d(i,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=d(i,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const _=d(i,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const E=d(i,["includeRaiReason"]);e!==void 0&&E!=null&&h(e,["parameters","includeRaiReason"],E);const w=d(i,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const C=d(i,["outputMimeType"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","mimeType"],C);const x=d(i,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const b=d(i,["addWatermark"]);e!==void 0&&b!=null&&h(e,["parameters","addWatermark"],b);const q=d(i,["labels"]);e!==void 0&&q!=null&&h(e,["labels"],q);const B=d(i,["imageSize"]);e!==void 0&&B!=null&&h(e,["parameters","sampleImageSize"],B);const D=d(i,["enhancePrompt"]);return e!==void 0&&D!=null&&h(e,["parameters","enhancePrompt"],D),n}function mb(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&hb(l,n),n}function gb(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&pb(l,n),n}function yb(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Nb(c))),h(e,["generatedImages"],l)}const a=d(i,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],Rv(a)),e}function vb(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Pa(c))),h(e,["generatedImages"],l)}const a=d(i,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],xv(a)),e}function _b(i,e){const n={},o=d(i,["numberOfVideos"]);if(e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o),d(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(i,["durationSeconds"]);if(e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a),d(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(i,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=d(i,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const f=d(i,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(i,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const m=d(i,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),d(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(i,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],Ua(v));const _=d(i,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>vR(w))),h(e,["instances[0]","referenceImages"],E)}if(d(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Eb(i,e){const n={},o=d(i,["numberOfVideos"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const a=d(i,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const l=d(i,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=d(i,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const f=d(i,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const p=d(i,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const m=d(i,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const v=d(i,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const _=d(i,["pubsubTopic"]);e!==void 0&&_!=null&&h(e,["parameters","pubsubTopic"],_);const E=d(i,["negativePrompt"]);e!==void 0&&E!=null&&h(e,["parameters","negativePrompt"],E);const w=d(i,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const C=d(i,["generateAudio"]);e!==void 0&&C!=null&&h(e,["parameters","generateAudio"],C);const x=d(i,["lastFrame"]);e!==void 0&&x!=null&&h(e,["instances[0]","lastFrame"],on(x));const b=d(i,["referenceImages"]);if(e!==void 0&&b!=null){let D=b;Array.isArray(D)&&(D=D.map($=>_R($))),h(e,["instances[0]","referenceImages"],D)}const q=d(i,["mask"]);e!==void 0&&q!=null&&h(e,["instances[0]","mask"],yR(q));const B=d(i,["compressionQuality"]);return e!==void 0&&B!=null&&h(e,["parameters","compressionQuality"],B),n}function Sb(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],Cb(c)),e}function Tb(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response"]);return c!=null&&h(e,["response"],bb(c)),e}function wb(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&h(n,["instances[0]","image"],Ua(l));const c=d(e,["video"]);c!=null&&h(n,["instances[0]","video"],Mv(c));const f=d(e,["source"]);f!=null&&Rb(f,n);const p=d(e,["config"]);return p!=null&&_b(p,n),n}function Ab(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&h(n,["instances[0]","image"],on(l));const c=d(e,["video"]);c!=null&&h(n,["instances[0]","video"],Dv(c));const f=d(e,["source"]);f!=null&&xb(f,n);const p=d(e,["config"]);return p!=null&&Eb(p,n),n}function Cb(i){const e={},n=d(i,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Mb(c))),h(e,["generatedVideos"],l)}const o=d(i,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function bb(i){const e={},n=d(i,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Db(c))),h(e,["generatedVideos"],l)}const o=d(i,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const a=d(i,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function Rb(i,e){const n={},o=d(i,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const a=d(i,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],Ua(a));const l=d(i,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],Mv(l)),n}function xb(i,e){const n={},o=d(i,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const a=d(i,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],on(a));const l=d(i,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],Dv(l)),n}function Nb(i){const e={},n=d(i,["_self"]);n!=null&&h(e,["image"],qb(n));const o=d(i,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const a=d(i,["_self"]);return a!=null&&h(e,["safetyAttributes"],Rv(a)),e}function Pa(i){const e={},n=d(i,["_self"]);n!=null&&h(e,["image"],bv(n));const o=d(i,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const a=d(i,["_self"]);a!=null&&h(e,["safetyAttributes"],xv(a));const l=d(i,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function Ib(i){const e={},n=d(i,["_self"]);n!=null&&h(e,["mask"],bv(n));const o=d(i,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["labels"],a)}return e}function Mb(i){const e={},n=d(i,["video"]);return n!=null&&h(e,["video"],mR(n)),e}function Db(i){const e={},n=d(i,["_self"]);return n!=null&&h(e,["video"],gR(n)),e}function Pb(i){const e={},n=d(i,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=d(i,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const a=d(i,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const l=d(i,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(i,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(i,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const p=d(i,["logprobs"]);p!=null&&h(e,["logprobs"],p);const m=d(i,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=d(i,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const _=d(i,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const E=d(i,["responseLogprobs"]);E!=null&&h(e,["responseLogprobs"],E);const w=d(i,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const C=d(i,["responseModalities"]);C!=null&&h(e,["responseModalities"],C);const x=d(i,["responseSchema"]);x!=null&&h(e,["responseSchema"],x);const b=d(i,["routingConfig"]);b!=null&&h(e,["routingConfig"],b);const q=d(i,["seed"]);q!=null&&h(e,["seed"],q);const B=d(i,["speechConfig"]);B!=null&&h(e,["speechConfig"],Nv(B));const D=d(i,["stopSequences"]);D!=null&&h(e,["stopSequences"],D);const $=d(i,["temperature"]);$!=null&&h(e,["temperature"],$);const X=d(i,["thinkingConfig"]);X!=null&&h(e,["thinkingConfig"],X);const ee=d(i,["topK"]);ee!=null&&h(e,["topK"],ee);const J=d(i,["topP"]);if(J!=null&&h(e,["topP"],J),d(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ub(i,e){const n={},o=d(e,["model"]);return o!=null&&h(n,["_url","name"],De(i,o)),n}function Ob(i,e){const n={},o=d(e,["model"]);return o!=null&&h(n,["_url","name"],De(i,o)),n}function kb(i){const e={};if(d(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(i,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Lb(i){const e={};if(d(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(i,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function qb(i){const e={},n=d(i,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],ri(n));const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function bv(i){const e={},n=d(i,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const o=d(i,["bytesBase64Encoded"]);o!=null&&h(e,["imageBytes"],ri(o));const a=d(i,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function Ua(i){const e={};if(d(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(i,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],ri(n));const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function on(i){const e={},n=d(i,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const o=d(i,["imageBytes"]);o!=null&&h(e,["bytesBase64Encoded"],ri(o));const a=d(i,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function Gb(i,e,n){const o={},a=d(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const l=d(e,["pageToken"]);n!==void 0&&l!=null&&h(n,["_query","pageToken"],l);const c=d(e,["filter"]);n!==void 0&&c!=null&&h(n,["_query","filter"],c);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&h(n,["_url","models_url"],vv(i,f)),o}function Bb(i,e,n){const o={},a=d(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const l=d(e,["pageToken"]);n!==void 0&&l!=null&&h(n,["_query","pageToken"],l);const c=d(e,["filter"]);n!==void 0&&c!=null&&h(n,["_query","filter"],c);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&h(n,["_url","models_url"],vv(i,f)),o}function Hb(i,e){const n={},o=d(e,["config"]);return o!=null&&Gb(i,o,n),n}function Vb(i,e){const n={},o=d(e,["config"]);return o!=null&&Bb(i,o,n),n}function zb(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["_self"]);if(a!=null){let l=_v(a);Array.isArray(l)&&(l=l.map(c=>Dc(c))),h(e,["models"],l)}return e}function Fb(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["_self"]);if(a!=null){let l=_v(a);Array.isArray(l)&&(l=l.map(c=>Pc(c))),h(e,["models"],l)}return e}function Jb(i){const e={},n=d(i,["maskMode"]);n!=null&&h(e,["maskMode"],n);const o=d(i,["segmentationClasses"]);o!=null&&h(e,["maskClasses"],o);const a=d(i,["maskDilation"]);return a!=null&&h(e,["dilation"],a),e}function Dc(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["displayName"]);o!=null&&h(e,["displayName"],o);const a=d(i,["description"]);a!=null&&h(e,["description"],a);const l=d(i,["version"]);l!=null&&h(e,["version"],l);const c=d(i,["_self"]);c!=null&&h(e,["tunedModelInfo"],rR(c));const f=d(i,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const p=d(i,["outputTokenLimit"]);p!=null&&h(e,["outputTokenLimit"],p);const m=d(i,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const v=d(i,["temperature"]);v!=null&&h(e,["temperature"],v);const _=d(i,["maxTemperature"]);_!=null&&h(e,["maxTemperature"],_);const E=d(i,["topP"]);E!=null&&h(e,["topP"],E);const w=d(i,["topK"]);w!=null&&h(e,["topK"],w);const C=d(i,["thinking"]);return C!=null&&h(e,["thinking"],C),e}function Pc(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["displayName"]);o!=null&&h(e,["displayName"],o);const a=d(i,["description"]);a!=null&&h(e,["description"],a);const l=d(i,["versionId"]);l!=null&&h(e,["version"],l);const c=d(i,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>lb(E))),h(e,["endpoints"],_)}const f=d(i,["labels"]);f!=null&&h(e,["labels"],f);const p=d(i,["_self"]);p!=null&&h(e,["tunedModelInfo"],aR(p));const m=d(i,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const v=d(i,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(E=>E)),h(e,["checkpoints"],_)}return e}function $b(i){const e={},n=d(i,["functionCall"]);n!=null&&h(e,["functionCall"],n);const o=d(i,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const a=d(i,["executableCode"]);a!=null&&h(e,["executableCode"],a);const l=d(i,["fileData"]);l!=null&&h(e,["fileData"],ub(l));const c=d(i,["functionResponse"]);c!=null&&h(e,["functionResponse"],c);const f=d(i,["inlineData"]);f!=null&&h(e,["inlineData"],OC(f));const p=d(i,["text"]);p!=null&&h(e,["text"],p);const m=d(i,["thought"]);m!=null&&h(e,["thought"],m);const v=d(i,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const _=d(i,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function Yb(i){const e={},n=d(i,["productImage"]);return n!=null&&h(e,["image"],on(n)),e}function Kb(i,e){const n={},o=d(i,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const a=d(i,["baseSteps"]);e!==void 0&&a!=null&&h(e,["parameters","baseSteps"],a);const l=d(i,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=d(i,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const f=d(i,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const p=d(i,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const m=d(i,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const v=d(i,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const _=d(i,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const E=d(i,["enhancePrompt"]);e!==void 0&&E!=null&&h(e,["parameters","enhancePrompt"],E);const w=d(i,["labels"]);return e!==void 0&&w!=null&&h(e,["labels"],w),n}function jb(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["source"]);a!=null&&Wb(a,n);const l=d(e,["config"]);return l!=null&&Kb(l,n),n}function Qb(i){const e={},n=d(i,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Pa(a))),h(e,["generatedImages"],o)}return e}function Wb(i,e){const n={},o=d(i,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const a=d(i,["personImage"]);e!==void 0&&a!=null&&h(e,["instances[0]","personImage","image"],on(a));const l=d(i,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Yb(f))),h(e,["instances[0]","productImages"],c)}return n}function Xb(i){const e={},n=d(i,["referenceImage"]);n!=null&&h(e,["referenceImage"],on(n));const o=d(i,["referenceId"]);o!=null&&h(e,["referenceId"],o);const a=d(i,["referenceType"]);a!=null&&h(e,["referenceType"],a);const l=d(i,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],Jb(l));const c=d(i,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],VC(c));const f=d(i,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const p=d(i,["subjectImageConfig"]);return p!=null&&h(e,["subjectImageConfig"],p),e}function Rv(i){const e={},n=d(i,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const o=d(i,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const a=d(i,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function xv(i){const e={},n=d(i,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const o=d(i,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const a=d(i,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function Zb(i){const e={},n=d(i,["category"]);if(n!=null&&h(e,["category"],n),d(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(i,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function eR(i){const e={},n=d(i,["image"]);return n!=null&&h(e,["image"],on(n)),e}function tR(i,e){const n={},o=d(i,["mode"]);e!==void 0&&o!=null&&h(e,["parameters","mode"],o);const a=d(i,["maxPredictions"]);e!==void 0&&a!=null&&h(e,["parameters","maxPredictions"],a);const l=d(i,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=d(i,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const f=d(i,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const p=d(i,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),n}function nR(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["source"]);a!=null&&sR(a,n);const l=d(e,["config"]);return l!=null&&tR(l,n),n}function iR(i){const e={},n=d(i,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Ib(a))),h(e,["generatedMasks"],o)}return e}function sR(i,e){const n={},o=d(i,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const a=d(i,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],on(a));const l=d(i,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],eR(l)),n}function Nv(i){const e={},n=d(i,["languageCode"]);n!=null&&h(e,["languageCode"],n);const o=d(i,["voiceConfig"]);if(o!=null&&h(e,["voiceConfig"],o),d(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function oR(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(i,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const a=d(i,["computerUse"]);a!=null&&h(e,["computerUse"],a);const l=d(i,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(i,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(i,["googleMaps"]);f!=null&&h(e,["googleMaps"],kb(f));const p=d(i,["googleSearch"]);p!=null&&h(e,["googleSearch"],Lb(p));const m=d(i,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function Iv(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>cb(E))),h(e,["functionDeclarations"],_)}const o=d(i,["retrieval"]);o!=null&&h(e,["retrieval"],o);const a=d(i,["googleSearchRetrieval"]);a!=null&&h(e,["googleSearchRetrieval"],a);const l=d(i,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(i,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(i,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const p=d(i,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const m=d(i,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=d(i,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function rR(i){const e={},n=d(i,["baseModel"]);n!=null&&h(e,["baseModel"],n);const o=d(i,["createTime"]);o!=null&&h(e,["createTime"],o);const a=d(i,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function aR(i){const e={},n=d(i,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const o=d(i,["createTime"]);o!=null&&h(e,["createTime"],o);const a=d(i,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function lR(i,e){const n={},o=d(i,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const a=d(i,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const l=d(i,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),n}function uR(i,e){const n={},o=d(i,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const a=d(i,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const l=d(i,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),n}function cR(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","name"],De(i,o));const a=d(e,["config"]);return a!=null&&lR(a,n),n}function dR(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["config"]);return a!=null&&uR(a,n),n}function fR(i,e){const n={},o=d(i,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const a=d(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const l=d(i,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=d(i,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const f=d(i,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const p=d(i,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const m=d(i,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(i,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(i,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const E=d(i,["numberOfImages"]);e!==void 0&&E!=null&&h(e,["parameters","sampleCount"],E);const w=d(i,["mode"]);return e!==void 0&&w!=null&&h(e,["parameters","mode"],w),n}function hR(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["_url","model"],De(i,o));const a=d(e,["image"]);a!=null&&h(n,["instances[0]","image"],on(a));const l=d(e,["upscaleFactor"]);l!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&fR(c,n),n}function pR(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Pa(l))),h(e,["generatedImages"],a)}return e}function mR(i){const e={},n=d(i,["uri"]);n!=null&&h(e,["uri"],n);const o=d(i,["encodedVideo"]);o!=null&&h(e,["videoBytes"],ri(o));const a=d(i,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function gR(i){const e={},n=d(i,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=d(i,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],ri(o));const a=d(i,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function yR(i){const e={},n=d(i,["image"]);n!=null&&h(e,["_self"],on(n));const o=d(i,["maskMode"]);return o!=null&&h(e,["maskMode"],o),e}function vR(i){const e={},n=d(i,["image"]);n!=null&&h(e,["image"],Ua(n));const o=d(i,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function _R(i){const e={},n=d(i,["image"]);n!=null&&h(e,["image"],on(n));const o=d(i,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function Mv(i){const e={},n=d(i,["uri"]);n!=null&&h(e,["uri"],n);const o=d(i,["videoBytes"]);o!=null&&h(e,["encodedVideo"],ri(o));const a=d(i,["mimeType"]);return a!=null&&h(e,["encoding"],a),e}function Dv(i){const e={},n=d(i,["uri"]);n!=null&&h(e,["gcsUri"],n);const o=d(i,["videoBytes"]);o!=null&&h(e,["bytesBase64Encoded"],ri(o));const a=d(i,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ER="Content-Type",SR="X-Server-Timeout",TR="User-Agent",Uc="x-goog-api-client",wR="1.29.1",AR=`google-genai-sdk/${wR}`,CR="v1beta1",bR="v1beta",oy=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class RR{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:CR,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:bR,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const a=[this.getRequestUrlInternal(n)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))a.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(n))typeof l=="object"?o[a]=Object.assign(Object.assign({},o[a]),l):l!==void 0&&(o[a]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,a){if(n&&n.timeout||a){const l=new AbortController,c=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>l.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return n&&n.extraBody!==null&&xR(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async a=>(await ry(a),new Nc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async a=>(await ry(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var n;return xs(this,arguments,function*(){const a=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";for(;;){const{done:f,value:p}=yield Je(a.read());if(f){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const E=JSON.parse(JSON.stringify(_.error)),w=E.status,C=E.code,x=`got status: ${w}. ${JSON.stringify(_)}`;if(C>=400&&C<600)throw new Ma({message:x,status:C})}}catch(_){if(_.name==="ApiError")throw _}c+=m;let v=c.match(oy);for(;v;){const _=v[1];try{const E=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Je(new Nc(E)),c=c.slice(v[0].length),v=c.match(oy)}catch(E){throw new Error(`exception parsing stream chunk ${_}. ${E}`)}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=AR+" "+this.clientOptions.userAgentExtra;return e[TR]=n,e[Uc]=n,e[ER]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))o.append(a,l);e.timeout&&e.timeout>0&&o.append(SR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const f=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=f;const p={file:a},m=this.getFileName(e),v=se("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,p,n==null?void 0:n.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,o){var a;const l=this.clientOptions.uploader,c=await l.stat(n),f=String(c.size),p=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),_={};o!=null&&o.customMetadata&&(_.customMetadata=o.customMetadata),o!=null&&o.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const E=await this.fetchUploadUrl(m,f,p,v,_,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,a,l,c){var f;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function ry(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const n=i.status;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=JSON.stringify(o);throw n>=400&&n<600?new Ma({message:a,status:n}):new Error(a)}}function xR(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof i.body=="string"&&i.body.length>0)try{const l=JSON.parse(i.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const f=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[p]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const a=o(n,e);i.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NR="mcp_used/unknown";let IR=!1;function Pv(i){for(const e of i)if(MR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return IR}function Uv(i){var e;const n=(e=i[Uc])!==null&&e!==void 0?e:"";i[Uc]=(n+` ${NR}`).trimStart()}function MR(i){return i!==null&&typeof i=="object"&&i instanceof id}function DR(i,e=100){return xs(this,arguments,function*(){let o,a=0;for(;a<e;){const l=yield Je(i.listTools({cursor:o}));for(const c of l.tools)yield yield Je(c),a++;if(!l.nextCursor)break;o=l.nextCursor}})}class id{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new id(e,n)}async initialize(){var e,n,o,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,p=(n=void 0,qo(DR(v))),m;m=await p.next(),e=m.done,!e;f=!0){a=m.value,f=!1;const _=a;c.push(_);const E=_.name;if(l[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);l[E]=v}}catch(_){n={error:_}}finally{try{!f&&!e&&(o=p.return)&&await o.call(p)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Lw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function PR(i,e,n){const o=new Nw;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(o,a),e(o)}class UR{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=LR(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(D=>{m=D}),_=e.callbacks,E=function(){m({})},w=this.apiClient,C={onopen:E,onmessage:D=>{PR(w,_.onmessage,D)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(D){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(D){}},x=this.webSocketFactory.create(p,kR(c),C);x.connect(),await v;const B={setup:{model:De(this.apiClient,e.model)}};return x.send(JSON.stringify(B)),new OR(x,this.apiClient)}}class OR{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=bC(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=CC(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Cs.PLAY)}pause(){this.sendPlaybackControl(Cs.PAUSE)}stop(){this.sendPlaybackControl(Cs.STOP)}resetContext(){this.sendPlaybackControl(Cs.RESET_CONTEXT)}close(){this.conn.close()}}function kR(i){const e={};return i.forEach((n,o)=>{e[o]=n}),e}function LR(i){const e=new Headers;for(const[n,o]of Object.entries(i))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GR(i,e,n){const o=new xw;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const l=JSON.parse(a);if(i.isVertexAI()){const c=NC(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class BR{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new UR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,a,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Pv(e.config.tools)&&Uv(_);const E=FR(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v);else{const N=this.apiClient.getApiKey();let j="BidiGenerateContent",ne="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",ne="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${j}?${ne}=${N}`}let w=()=>{};const C=new Promise(N=>{w=N}),x=e.callbacks,b=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),w({})},q=this.apiClient,B={onopen:b,onmessage:N=>{GR(q,x.onmessage,N)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(N){},onclose:(o=x==null?void 0:x.onclose)!==null&&o!==void 0?o:function(N){}},D=this.webSocketFactory.create(v,zR(E),B);D.connect(),await C;let $=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const N=this.apiClient.getProject(),j=this.apiClient.getLocation();$=`projects/${N}/locations/${j}/`+$}let X={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[wa.AUDIO]}:e.config.responseModalities=[wa.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ee=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],J=[];for(const N of ee)if(this.isCallableTool(N)){const j=N;J.push(await j.tool())}else J.push(N);J.length>0&&(e.config.tools=J);const z={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=AC(this.apiClient,z):X=wC(this.apiClient,z),delete X.config,D.send(JSON.stringify(X)),new VR(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const HR={turnComplete:!0};class VR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Wt(n.turns),e.isVertexAI()||(o=o.map(a=>Da(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(qR)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},HR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:xC(e)}:n={realtimeInput:RC(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function zR(i){const e={};return i.forEach((n,o)=>{e[o]=n}),e}function FR(i){const e=new Headers;for(const[n,o]of Object.entries(i))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ay=10;function ly(i){var e,n,o;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(n=i==null?void 0:i.tools)!==null&&n!==void 0?n:[])if(Ns(c)){a=!0;break}if(!a)return!0;const l=(o=i==null?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ns(i){return"callTool"in i&&typeof i.callTool=="function"}function JR(i){var e,n,o;return(o=(n=(e=i.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>Ns(a)))!==null&&o!==void 0?o:!1}function uy(i){var e;const n=[];return!((e=i==null?void 0:i.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((o,a)=>{if(Ns(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(a)}),n}function cy(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $R extends In{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,a,l,c,f;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!JR(n)||ly(n.config))return await this.generateContentInternal(p);const m=uy(n);if(m.length>0){const x=m.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let v,_;const E=Wt(p.contents),w=(l=(a=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:ay;let C=0;for(;C<w&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const x=v.candidates[0].content,b=[];for(const q of(f=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(Ns(q)){const D=await q.callTool(v.functionCalls);b.push(...D)}C++,_={role:"user",parts:b},p.contents=Wt(p.contents),p.contents.push(x),p.contents.push(_),cy(p.config)&&(E.push(x),E.push(_))}return cy(p.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),ly(n.config)){const a=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(a)}const o=uy(n);if(o.length>0){const a=o.map(l=>`tools[${l}]`).join(", ");throw new Error(`Incompatible tools found at ${a}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var a;let l;const c=[];if(o!=null&&o.generatedImages)for(const p of o.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Pi(Nn.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var o,a,l,c,f,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(f=n.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,a;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>Ns(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&Pv(e.config.tools)){const p=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Uv(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var n,o,a;const l=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Ns(c)){const f=c,p=await f.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,f)}}return l}async processAfcStream(e){var n,o,a;const l=(a=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:ay;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){var E,w;return xs(this,arguments,function*(){for(var C,x,b,q;f<l;){c&&(f++,c=!1);const X=yield Je(m.processParamsMaybeAddMcpUsage(_)),ee=yield Je(m.generateContentStreamInternal(X)),J=[],z=[];try{for(var B=!0,D=(x=void 0,qo(ee)),$;$=yield Je(D.next()),C=$.done,!C;B=!0){q=$.value,B=!1;const N=q;if(yield yield Je(N),N.candidates&&(!((E=N.candidates[0])===null||E===void 0)&&E.content)){z.push(N.candidates[0].content);for(const j of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(f<l&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(j.functionCall.name)){const ne=yield Je(v.get(j.functionCall.name).callTool([j.functionCall]));J.push(...ne)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(N){x={error:N}}finally{try{!B&&!C&&(b=D.return)&&(yield Je(b.call(D)))}finally{if(x)throw x.error}}if(J.length>0){c=!0;const N=new Uo;N.candidates=[{content:{role:"user",parts:J}}],yield yield Je(N);const j=[];j.push(...z),j.push({role:"user",parts:J});const ne=Wt(_.contents).concat(j);_.contents=ne}else break}})})(this,p,e)}async generateContentInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ny(this.apiClient,e);return f=se("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=sy(v),E=new Uo;return Object.assign(E,_),E})}else{const m=ty(this.apiClient,e);return f=se("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=iy(v),E=new Uo;return Object.assign(E,_),E})}}async generateContentStreamInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ny(this.apiClient,e);return f=se("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return xs(this,arguments,function*(){var E,w,C,x;try{for(var b=!0,q=qo(_),B;B=yield Je(q.next()),E=B.done,!E;b=!0){x=B.value,b=!1;const D=x,$=sy(yield Je(D.json()));$.sdkHttpResponse={headers:D.headers};const X=new Uo;Object.assign(X,$),yield yield Je(X)}}catch(D){w={error:D}}finally{try{!b&&!E&&(C=q.return)&&(yield Je(C.call(q)))}finally{if(w)throw w.error}}})})}else{const m=ty(this.apiClient,e);return f=se("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return xs(this,arguments,function*(){var E,w,C,x;try{for(var b=!0,q=qo(_),B;B=yield Je(q.next()),E=B.done,!E;b=!0){x=B.value,b=!1;const D=x,$=iy(yield Je(D.json()));$.sdkHttpResponse={headers:D.headers};const X=new Uo;Object.assign(X,$),yield yield Je(X)}}catch(D){w={error:D}}finally{try{!b&&!E&&(C=q.return)&&(yield Je(C.call(q)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ob(this.apiClient,e);return f=se("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=ab(v),E=new Gg;return Object.assign(E,_),E})}else{const m=sb(this.apiClient,e);return f=se("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=rb(v),E=new Gg;return Object.assign(E,_),E})}}async generateImagesInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=gb(this.apiClient,e);return f=se("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=vb(v),E=new Bg;return Object.assign(E,_),E})}else{const m=mb(this.apiClient,e);return f=se("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=yb(v),E=new Bg;return Object.assign(E,_),E})}}async editImageInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=eb(this.apiClient,e);return l=se("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=tb(p),v=new yw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=hR(this.apiClient,e);return l=se("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=pR(p),v=new vw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=jb(this.apiClient,e);return l=se("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Qb(p),v=new _w;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=nR(this.apiClient,e);return l=se("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=iR(p),v=new Ew;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Ob(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Pc(v))}else{const m=Ub(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Dc(v))}}async listInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Vb(this.apiClient,e);return f=se("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=Fb(v),E=new Hg;return Object.assign(E,_),E})}else{const m=Hb(this.apiClient,e);return f=se("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=zb(v),E=new Hg;return Object.assign(E,_),E})}}async update(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=dR(this.apiClient,e);return f=se("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Pc(v))}else{const m=cR(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Dc(v))}}async delete(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=QC(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=XC(v),E=new Vg;return Object.assign(E,_),E})}else{const m=jC(this.apiClient,e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=WC(v),E=new Vg;return Object.assign(E,_),E})}}async countTokens(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=$C(this.apiClient,e);return f=se("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=KC(v),E=new zg;return Object.assign(E,_),E})}else{const m=JC(this.apiClient,e);return f=se("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=YC(v),E=new zg;return Object.assign(E,_),E})}}async computeTokens(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=qC(this.apiClient,e);return l=se("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=GC(p),v=new Sw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Ab(this.apiClient,e);return f=se("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=Tb(v),E=new Aa;return Object.assign(E,_),E})}else{const m=wb(this.apiClient,e);return f=se("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=Sb(v),E=new Aa;return Object.assign(E,_),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YR extends In{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=dw(e);return f=se("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=cw(e);return f=se("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=iw(e);return l=se("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KR(i){const e={},n=d(i,["data"]);if(n!=null&&h(e,["data"],n),d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function jR(i){const e={},n=d(i,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>ix(l))),h(e,["parts"],a)}const o=d(i,["role"]);return o!=null&&h(e,["role"],o),e}function QR(i,e,n){const o={},a=d(e,["expireTime"]);n!==void 0&&a!=null&&h(n,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&h(n,["newSessionExpireTime"],l);const c=d(e,["uses"]);n!==void 0&&c!=null&&h(n,["uses"],c);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&h(n,["bidiGenerateContentSetup"],nx(i,f));const p=d(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&h(n,["fieldMask"],p),o}function WR(i,e){const n={},o=d(e,["config"]);return o!=null&&h(n,["config"],QR(i,o,n)),n}function XR(i){const e={};if(d(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(i,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=d(i,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ZR(i){const e={};if(d(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(i,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function ex(i){const e={};if(d(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(i,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function tx(i,e){const n={},o=d(i,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const a=d(i,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const l=d(i,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(i,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(i,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const p=d(i,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(i,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=d(i,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const _=d(i,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],nd(_));const E=d(i,["thinkingConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","thinkingConfig"],E);const w=d(i,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=d(i,["systemInstruction"]);e!==void 0&&C!=null&&h(e,["setup","systemInstruction"],jR(yt(C)));const x=d(i,["tools"]);if(e!==void 0&&x!=null){let ee=Os(x);Array.isArray(ee)&&(ee=ee.map(J=>ox(Us(J)))),h(e,["setup","tools"],ee)}const b=d(i,["sessionResumption"]);e!==void 0&&b!=null&&h(e,["setup","sessionResumption"],sx(b));const q=d(i,["inputAudioTranscription"]);e!==void 0&&q!=null&&h(e,["setup","inputAudioTranscription"],q);const B=d(i,["outputAudioTranscription"]);e!==void 0&&B!=null&&h(e,["setup","outputAudioTranscription"],B);const D=d(i,["realtimeInputConfig"]);e!==void 0&&D!=null&&h(e,["setup","realtimeInputConfig"],D);const $=d(i,["contextWindowCompression"]);e!==void 0&&$!=null&&h(e,["setup","contextWindowCompression"],$);const X=d(i,["proactivity"]);return e!==void 0&&X!=null&&h(e,["setup","proactivity"],X),n}function nx(i,e){const n={},o=d(e,["model"]);o!=null&&h(n,["setup","model"],De(i,o));const a=d(e,["config"]);return a!=null&&h(n,["config"],tx(a,n)),n}function ix(i){const e={},n=d(i,["functionCall"]);n!=null&&h(e,["functionCall"],n);const o=d(i,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const a=d(i,["executableCode"]);a!=null&&h(e,["executableCode"],a);const l=d(i,["fileData"]);l!=null&&h(e,["fileData"],XR(l));const c=d(i,["functionResponse"]);c!=null&&h(e,["functionResponse"],c);const f=d(i,["inlineData"]);f!=null&&h(e,["inlineData"],KR(f));const p=d(i,["text"]);p!=null&&h(e,["text"],p);const m=d(i,["thought"]);m!=null&&h(e,["thought"],m);const v=d(i,["thoughtSignature"]);v!=null&&h(e,["thoughtSignature"],v);const _=d(i,["videoMetadata"]);return _!=null&&h(e,["videoMetadata"],_),e}function sx(i){const e={},n=d(i,["handle"]);if(n!=null&&h(e,["handle"],n),d(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ox(i){const e={},n=d(i,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(i,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const a=d(i,["computerUse"]);a!=null&&h(e,["computerUse"],a);const l=d(i,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(i,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(i,["googleMaps"]);f!=null&&h(e,["googleMaps"],ZR(f));const p=d(i,["googleSearch"]);p!=null&&h(e,["googleSearch"],ex(p));const m=d(i,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rx(i){const e=[];for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){const o=i[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(l=>`${n}.${l}`);e.push(...a)}else e.push(n)}return e.join(",")}function ax(i,e){let n=null;const o=i.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(i.bidiGenerateContentSetup=l,n=l):delete i.bidiGenerateContentSetup}else o!==void 0&&delete i.bidiGenerateContentSetup;const a=i.fieldMask;if(n){const l=rx(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?i.fieldMask=l:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];a.length>0&&(f=a.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?i.fieldMask=p.join(","):delete i.fieldMask}else delete i.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?i.fieldMask=a.join(","):delete i.fieldMask;return i}class lx extends In{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=WR(this.apiClient,e);l=se("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=ax(f,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ux(i,e){const n={},o=d(i,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),n}function cx(i){const e={},n=d(i,["config"]);return n!=null&&ux(n,e),e}function dx(i,e){const n={},o=d(i,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function fx(i){const e={},n=d(i,["name"]);n!=null&&h(e,["_url","name"],n);const o=d(i,["config"]);return o!=null&&dx(o,e),e}function hx(i){const e={},n=d(i,["name"]);return n!=null&&h(e,["_url","name"],n),e}function px(i,e){const n={},o=d(i,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const a=d(i,["chunkingConfig"]);return e!==void 0&&a!=null&&h(e,["chunkingConfig"],a),n}function mx(i){const e={},n=d(i,["name"]);n!=null&&h(e,["name"],n);const o=d(i,["metadata"]);o!=null&&h(e,["metadata"],o);const a=d(i,["done"]);a!=null&&h(e,["done"],a);const l=d(i,["error"]);l!=null&&h(e,["error"],l);const c=d(i,["response"]);return c!=null&&h(e,["response"],yx(c)),e}function gx(i){const e={},n=d(i,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=d(i,["fileName"]);o!=null&&h(e,["fileName"],o);const a=d(i,["config"]);return a!=null&&px(a,e),e}function yx(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["parent"]);o!=null&&h(e,["parent"],o);const a=d(i,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function vx(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function _x(i){const e={},n=d(i,["config"]);return n!=null&&vx(n,e),e}function Ex(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function Sx(i,e){const n={},o=d(i,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const a=d(i,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const l=d(i,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["customMetadata"],f)}const c=d(i,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),n}function Tx(i){const e={},n=d(i,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=d(i,["config"]);return o!=null&&Sx(o,e),e}function wx(i){const e={},n=d(i,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ax(i,e){const n={},o=d(i,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function Cx(i){const e={},n=d(i,["name"]);n!=null&&h(e,["_url","name"],n);const o=d(i,["config"]);return o!=null&&Ax(o,e),e}function bx(i){const e={},n=d(i,["name"]);return n!=null&&h(e,["_url","name"],n),e}function Rx(i,e){const n={},o=d(i,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const a=d(i,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function xx(i){const e={},n=d(i,["parent"]);n!=null&&h(e,["_url","parent"],n);const o=d(i,["config"]);return o!=null&&Rx(o,e),e}function Nx(i){const e={},n=d(i,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=d(i,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const a=d(i,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ix extends In{constructor(e){super(),this.apiClient=e,this.list=async n=>new Pi(Nn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bx(e);return l=se("{name}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,o;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Cx(e);a=se("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xx(e);return l=se("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Nx(p),v=new Tw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mx extends In{constructor(e,n=new Ix(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Pi(Nn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cx(e);return l=se("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hx(e);return l=se("{name}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,o;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fx(e);a=se("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_x(e);return l=se("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Ex(p),v=new ww;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Tx(e);return l=se("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=wx(p),v=new Aw;return Object.assign(v,m),v})}}async importFile(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gx(e);return l=se("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const m=mx(p),v=new Wc;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dx(i,e){const n={},o=d(i,["name"]);return o!=null&&h(n,["_url","name"],o),n}function Px(i,e){const n={},o=d(i,["name"]);return o!=null&&h(n,["_url","name"],o),n}function Ux(i,e,n){const o={};if(d(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(i,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&h(e,["displayName"],a),d(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(i,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(i,["learningRateMultiplier"]);if(c!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(i,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(i,["learningRate"]);if(e!==void 0&&p!=null&&h(e,["tuningTask","hyperparameters","learningRate"],p),d(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function Ox(i,e,n){const o={};let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const w=d(i,["validationDataset"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec"],dy(w))}else if(a==="PREFERENCE_TUNING"){const w=d(i,["validationDataset"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec"],dy(w))}const l=d(i,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=d(i,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(i,["epochCount"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(i,["epochCount"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=d(i,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(p==="PREFERENCE_TUNING"){const w=d(i,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let m=d(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=d(i,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(m==="PREFERENCE_TUNING"){const w=d(i,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(i,["adapterSize"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(i,["adapterSize"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(i,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const E=d(i,["beta"]);return e!==void 0&&E!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),o}function kx(i,e){const n={},o=d(i,["baseModel"]);o!=null&&h(n,["baseModel"],o);const a=d(i,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const l=d(i,["trainingDataset"]);l!=null&&Yx(l);const c=d(i,["config"]);return c!=null&&Ux(c,n),n}function Lx(i,e){const n={},o=d(i,["baseModel"]);o!=null&&h(n,["baseModel"],o);const a=d(i,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const l=d(i,["trainingDataset"]);l!=null&&Kx(l,n,e);const c=d(i,["config"]);return c!=null&&Ox(c,n,e),n}function qx(i,e){const n={},o=d(i,["name"]);return o!=null&&h(n,["_url","name"],o),n}function Gx(i,e){const n={},o=d(i,["name"]);return o!=null&&h(n,["_url","name"],o),n}function Bx(i,e,n){const o={},a=d(i,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const l=d(i,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(i,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function Hx(i,e,n){const o={},a=d(i,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const l=d(i,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(i,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function Vx(i,e){const n={},o=d(i,["config"]);return o!=null&&Bx(o,n),n}function zx(i,e){const n={},o=d(i,["config"]);return o!=null&&Hx(o,n),n}function Fx(i,e){const n={},o=d(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const a=d(i,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const l=d(i,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Ov(f))),h(n,["tuningJobs"],c)}return n}function Jx(i,e){const n={},o=d(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const a=d(i,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const l=d(i,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Oc(f))),h(n,["tuningJobs"],c)}return n}function $x(i,e){const n={},o=d(i,["name"]);o!=null&&h(n,["model"],o);const a=d(i,["name"]);return a!=null&&h(n,["endpoint"],a),n}function Yx(i,e){const n={};if(d(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(i,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),h(n,["examples","examples"],a)}return n}function Kx(i,e,n){const o={};let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(i,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(i,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(i,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(i,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Ov(i,e){const n={},o=d(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const a=d(i,["name"]);a!=null&&h(n,["name"],a);const l=d(i,["state"]);l!=null&&h(n,["state"],gv(l));const c=d(i,["createTime"]);c!=null&&h(n,["createTime"],c);const f=d(i,["tuningTask","startTime"]);f!=null&&h(n,["startTime"],f);const p=d(i,["tuningTask","completeTime"]);p!=null&&h(n,["endTime"],p);const m=d(i,["updateTime"]);m!=null&&h(n,["updateTime"],m);const v=d(i,["description"]);v!=null&&h(n,["description"],v);const _=d(i,["baseModel"]);_!=null&&h(n,["baseModel"],_);const E=d(i,["_self"]);return E!=null&&h(n,["tunedModel"],$x(E)),n}function Oc(i,e){const n={},o=d(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const a=d(i,["name"]);a!=null&&h(n,["name"],a);const l=d(i,["state"]);l!=null&&h(n,["state"],gv(l));const c=d(i,["createTime"]);c!=null&&h(n,["createTime"],c);const f=d(i,["startTime"]);f!=null&&h(n,["startTime"],f);const p=d(i,["endTime"]);p!=null&&h(n,["endTime"],p);const m=d(i,["updateTime"]);m!=null&&h(n,["updateTime"],m);const v=d(i,["error"]);v!=null&&h(n,["error"],v);const _=d(i,["description"]);_!=null&&h(n,["description"],_);const E=d(i,["baseModel"]);E!=null&&h(n,["baseModel"],E);const w=d(i,["tunedModel"]);w!=null&&h(n,["tunedModel"],w);const C=d(i,["preTunedModel"]);C!=null&&h(n,["preTunedModel"],C);const x=d(i,["supervisedTuningSpec"]);x!=null&&h(n,["supervisedTuningSpec"],x);const b=d(i,["preferenceOptimizationSpec"]);b!=null&&h(n,["preferenceOptimizationSpec"],b);const q=d(i,["tuningDataStats"]);q!=null&&h(n,["tuningDataStats"],q);const B=d(i,["encryptionSpec"]);B!=null&&h(n,["encryptionSpec"],B);const D=d(i,["partnerModelTuningSpec"]);D!=null&&h(n,["partnerModelTuningSpec"],D);const $=d(i,["customBaseModel"]);$!=null&&h(n,["customBaseModel"],$);const X=d(i,["experiment"]);X!=null&&h(n,["experiment"],X);const ee=d(i,["labels"]);ee!=null&&h(n,["labels"],ee);const J=d(i,["outputUri"]);J!=null&&h(n,["outputUri"],J);const z=d(i,["pipelineJob"]);z!=null&&h(n,["pipelineJob"],z);const N=d(i,["serviceAccount"]);N!=null&&h(n,["serviceAccount"],N);const j=d(i,["tunedModelDisplayName"]);j!=null&&h(n,["tunedModelDisplayName"],j);const ne=d(i,["veoTuningSpec"]);return ne!=null&&h(n,["veoTuningSpec"],ne),n}function jx(i,e){const n={},o=d(i,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const a=d(i,["name"]);a!=null&&h(n,["name"],a);const l=d(i,["metadata"]);l!=null&&h(n,["metadata"],l);const c=d(i,["done"]);c!=null&&h(n,["done"],c);const f=d(i,["error"]);return f!=null&&h(n,["error"],f),n}function dy(i,e){const n={},o=d(i,["gcsUri"]);o!=null&&h(n,["validationDatasetUri"],o);const a=d(i,["vertexDatasetResource"]);return a!=null&&h(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qx extends In{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Pi(Nn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:xc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Gx(e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>Oc(v))}else{const m=qx(e);return f=se("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>Ov(v))}}async listInternal(e){var n,o,a,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=zx(e);return f=se("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=Jx(v),E=new Fg;return Object.assign(E,_),E})}else{const m=Vx(e);return f=se("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const _=Fx(v),E=new Fg;return Object.assign(E,_),E})}}async cancel(e){var n,o,a,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=Px(e);c=se("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=Dx(e);c=se("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI()){const f=Lx(e,e);return l=se("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>Oc(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kx(e);return l=se("tunedModels",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>jx(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wx{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Xx=1024*1024*8,Zx=3,eN=1e3,tN=2,ba="x-goog-upload-status";async function nN(i,e,n){var o;const a=await kv(i,e,n),l=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function iN(i,e,n){var o;const a=await kv(i,e,n),l=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=cv(l),f=new Xc;return Object.assign(f,c),f}async function kv(i,e,n){var o,a;let l=0,c=0,f=new Nc(new Response),p="upload";for(l=i.size;c<l;){const m=Math.min(Xx,l-c),v=i.slice(c,c+m);c+m>=l&&(p+=", finalize");let _=0,E=eN;for(;_<Zx&&(f=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=f==null?void 0:f.headers)===null||o===void 0)&&o[ba]));)_++,await oN(E),E=E*tN;if(c+=m,((a=f==null?void 0:f.headers)===null||a===void 0?void 0:a[ba])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function sN(i){return{size:i.size,type:i.type}}function oN(i){return new Promise(e=>setTimeout(e,i))}class rN{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nN(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iN(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aN{create(e,n,o){return new lN(e,n,o)}}class lN{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fy="x-goog-api-key";class uN{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(fy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cN="gl-node/";class dN{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=tw(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const a=new uN(this.apiKey);this.apiClient=new RR({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:cN+"web",uploader:new rN,downloader:new Wx}),this.models=new $R(this.apiClient),this.live=new BR(this.apiClient,a,new aN),this.batches=new bA(this.apiClient),this.chats=new sC(this.models,this.apiClient),this.caches=new tC(this.apiClient),this.files=new pC(this.apiClient),this.operations=new YR(this.apiClient),this.authTokens=new lx(this.apiClient),this.tunings=new Qx(this.apiClient),this.fileSearchStores=new Mx(this.apiClient)}}const fN=i=>{var e,n,o,a;return{...i,requesterName:((e=i.profiles)==null?void 0:e.name)||"Unknown",items:i.requisition_items||[],histologyItems:i.histology_items||[],log:((n=i.approval_logs)==null?void 0:n.map(l=>{var c;return{...l,userName:((c=l.profiles)==null?void 0:c.name)||"Unknown"}}))||[],conversation:((o=i.messages)==null?void 0:o.map(l=>{var c;return{...l,senderName:((c=l.profiles)==null?void 0:c.name)||"Unknown"}}))||[],payments:((a=i.payments)==null?void 0:a.map(l=>{var c;return{...l,recordedByName:((c=l.profiles)==null?void 0:c.name)||"Unknown"}}))||[]}},Lv=ae.createContext(null),hN=({children:i})=>{const[e,n]=ae.useState([]),[o,a]=ae.useState([]),[l,c]=ae.useState([]),{user:f}=Ps(),p=ae.useRef(null),m=ae.useCallback(async()=>{if(!f)return;const{data:N}=await _e.from("profiles").select("*");N&&c(N);const{data:j,error:ne}=await _e.from("requisitions").select("*, profiles!requester_id(name), approval_logs(*, profiles!user_id(name)), messages(*, profiles!sender_id(name)), payments(*, profiles!recorded_by_id(name)), requisition_items(*), histology_items(*)").order("created_at",{ascending:!1});ne?console.error("Error fetching requisitions:",ne):j&&n(j.map(fN));const{data:te,error:ce}=await _e.from("notifications").select("*").eq("recipient_id",f.id).order("created_at",{ascending:!1});ce?console.error("Error fetching notifications:",ce):a(te)},[f]);ae.useEffect(()=>{m()},[m]),ae.useEffect(()=>{if(!f)return;const N=_e.channel("db-changes").on("postgres_changes",{event:"*",schema:"public"},j=>{p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{m()},300)}).subscribe();return()=>{p.current&&clearTimeout(p.current),_e.removeChannel(N)}},[f,m]);const v=async(N,j,ne)=>{await _e.from("notifications").insert({recipient_id:N,message:j,requisition_id:ne})},_=async(N,j,ne)=>{const te=l.filter(ce=>ce.role===N);for(const ce of te)await v(ce.id,j,ne)},E=async(N,j,ne)=>{const te=l.filter(ce=>ce.name===N);for(const ce of te)await v(ce.id,j,ne)},w=async(N,j)=>{const ne=N.reduce((de,U)=>de+U.quantity*(U.estimated_unit_cost||0),0),{data:te,error:ce}=await _e.from("requisitions").insert({type:xe.STANDARD,department:j.department,requester_id:j.id,status:W.PENDING_APPROVAL,total_estimated_cost:ne}).select().single();if(ce||!te)throw ce||new Error("Failed to create requisition.");await _e.from("approval_logs").insert({requisition_id:te.id,user_id:j.id,action:"Submitted"});const me=N.map(de=>({...de,requisition_id:te.id}));await _e.from("requisition_items").insert(me),await E("Chairman",`New standard requisition ${te.id} needs approval.`,te.id),await E("Auditor",`New standard requisition ${te.id} needs approval.`,te.id)},C=async(N,j,ne)=>{var ce;const te=new Map;for(const me of N){const de=((ce=me.supplier)==null?void 0:ce.trim().toLowerCase())||"miscellaneous supplier";te.has(de)||te.set(de,[]),te.get(de).push(me)}for(const[me,de]of te.entries()){const U=de.reduce((K,ie)=>{const re=j.department==="Pharmacy"&&ie.unit_price||0;return K+ie.quantity*re},0),G=j.department==="Pharmacy"?W.PENDING_AUDITOR_REVIEW:W.PENDING_CHAIRMAN_REVIEW,{data:Y,error:Z}=await _e.from("requisitions").insert({type:xe.PURCHASE_ORDER,department:j.department,requester_id:j.id,status:G,total_estimated_cost:U,signatures:ne}).select().single();if(Z||!Y)throw Z||new Error(`Failed to create PO for supplier: ${me}.`);await _e.from("approval_logs").insert({requisition_id:Y.id,user_id:j.id,action:"Submitted"});const ye=de.map(K=>({...K,supplier:me==="miscellaneous supplier"?K.supplier:me,requisition_id:Y.id})),{error:M}=await _e.from("requisition_items").insert(ye);if(M)throw await _e.from("requisitions").delete().eq("id",Y.id),M;G===W.PENDING_AUDITOR_REVIEW?await E("Auditor",`New PO ${Y.id} from Pharmacy (Supplier: ${me}) requires review.`,Y.id):await E("Chairman",`New PO ${Y.id} from Lab (Supplier: ${me}) requires review.`,Y.id)}},x=async(N,j,ne)=>{const te=N.reduce((U,G)=>U+(G.outsource_bills||0)+(G.zmc_charge||0),0),{data:ce,error:me}=await _e.from("requisitions").insert({type:xe.HISTOLOGY_PAYMENT,department:j.department,requester_id:j.id,status:W.PENDING_AUDITOR_APPROVAL,total_estimated_cost:te,signatures:ne}).select().single();if(me||!ce)throw me||new Error("Failed to create Histology Req.");await _e.from("approval_logs").insert({requisition_id:ce.id,user_id:j.id,action:"Submitted"});const de=N.map(U=>({...U,requisition_id:ce.id}));await _e.from("histology_items").insert(de),await E("Auditor",`New Histology Payment request ${ce.id} requires approval.`,ce.id)},b=async(N,j,ne,te)=>{const ce=j.reduce((Z,ye)=>Z+ye.quantity*(ye.unit_price||0),0),me=j.map(Z=>_e.from("requisition_items").update({unit_price:Z.unit_price||0}).eq("id",Z.id)),U=(await Promise.all(me)).find(Z=>Z.error);if(U)throw console.error("Supabase item update error:",U.error),new Error(`Failed to update item price: ${U.error.message}`);const{error:G}=await _e.from("requisitions").update({total_estimated_cost:ce,status:W.PENDING_AUDITOR_REVIEW,updated_at:new Date().toISOString()}).eq("id",N);if(G)throw console.error("Supabase requisition update error:",G),new Error(`Failed to update requisition status: ${G.message}`);const{error:Y}=await _e.from("approval_logs").insert({requisition_id:N,user_id:ne.id,action:"Priced",signature:te});Y&&console.error("Supabase log insert error:",Y),await E("Auditor",`PO ${N} has been priced and requires review.`,N)},q=async(N,j,ne,te,ce,me)=>{const de=e.find(ye=>ye.id===N);if(!de)throw new Error("Requisition not found in local state.");const U=me==null?void 0:me.logAction;if(!U)throw new Error("A log action must be provided to update status.");const G={status:j,updated_at:new Date().toISOString()};j===W.QUERIED&&(G.previous_status_on_query=de.status,G.queried_to=me==null?void 0:me.queryTarget);const{error:Y}=await _e.from("requisitions").update(G).eq("id",N);if(Y)throw console.error("Requisition Update Error:",Y),Y;const{error:Z}=await _e.from("approval_logs").insert({requisition_id:N,user_id:ne.id,action:U,comment:ce,signature:te});Z&&console.error("Approval Log Error:",Z),j===W.QUERIED||j===W.REJECTED?await v(de.requester_id,`Your requisition ${N} was ${j.toLowerCase()}.`,N):de.type===xe.PURCHASE_ORDER?(j===W.PENDING_STORE_PRICING&&await _("Pharmacy Admin",`PO ${N} is ready for pricing.`,N),j===W.PENDING_AUDITOR_REVIEW&&await E("Auditor",`PO ${N} requires review.`,N),j===W.PENDING_FINAL_APPROVAL&&await E("Chairman",`PO ${N} requires final approval.`,N),j===W.PO_COMPLETED&&await _("Accounts",`PO ${N} is complete and ready for payment processing.`,N)):de.type===xe.HISTOLOGY_PAYMENT?(j===W.PENDING_CHAIRMAN_APPROVAL&&await E("Chairman",`Histology request ${N} requires approval.`,N),j===W.HISTOLOGY_APPROVED&&await _("Accounts",`Histology request ${N} is approved and ready for payment.`,N)):de.type===xe.STANDARD&&j===W.APPROVED&&await _("Accounts",`Standard requisition ${N} is approved and ready for payment.`,N)},B=async(N,j,ne)=>{let te;if(N.status===W.QUERIED&&N.previous_status_on_query)te=N.previous_status_on_query;else switch(N.type){case xe.PURCHASE_ORDER:te=ne.department==="Pharmacy"?W.PENDING_AUDITOR_REVIEW:W.PENDING_CHAIRMAN_REVIEW;break;case xe.HISTOLOGY_PAYMENT:te=W.PENDING_AUDITOR_APPROVAL;break;case xe.STANDARD:default:te=W.PENDING_APPROVAL;break}let ce=N.total_estimated_cost;j.items&&(await _e.from("requisition_items").delete().eq("requisition_id",N.id),await _e.from("requisition_items").insert(j.items.map(de=>({...de,requisition_id:N.id}))),ce=j.items.reduce((de,U)=>de+U.quantity*(U.estimated_unit_cost||U.unit_price||0),0)),j.histologyItems&&(await _e.from("histology_items").delete().eq("requisition_id",N.id),await _e.from("histology_items").insert(j.histologyItems.map(de=>({...de,requisition_id:N.id}))),ce=j.histologyItems.reduce((de,U)=>de+(U.outsource_bills||0)+(U.zmc_charge||0),0)),await _e.from("requisitions").update({status:te,queried_to:null,previous_status_on_query:null,total_estimated_cost:ce}).eq("id",N.id),await _e.from("approval_logs").insert({requisition_id:N.id,user_id:ne.id,action:"Resubmitted"});const me=`Requisition ${N.id} has been resubmitted and requires your attention.`;switch(te){case W.PENDING_CHAIRMAN_REVIEW:case W.PENDING_FINAL_APPROVAL:case W.PENDING_CHAIRMAN_APPROVAL:await E("Chairman",me,N.id);break;case W.PENDING_AUDITOR_REVIEW:case W.PENDING_AUDITOR_APPROVAL:await E("Auditor",me,N.id);break;case W.PENDING_APPROVAL:await E("Chairman",me,N.id),await E("Auditor",me,N.id);break;case W.PENDING_STORE_PRICING:await _("Pharmacy Admin",me,N.id);break}},D=async(N,j,ne)=>{await _e.from("messages").insert({requisition_id:N,sender_id:ne.id,text:j});const{data:te,error:ce}=await _e.from("requisitions").select("requester_id").eq("id",N).single();if(ce){console.error("Could not fetch requisition to send notification",ce);return}te&&te.requester_id!==ne.id&&await v(te.requester_id,`${ne.name} sent a message on requisition ${N}.`,N)},$=async(N,j,ne,te)=>{let ce;if(ne){const G=`${te.id}/${N}/${Date.now()}_${ne.name}`,{error:Y}=await _e.storage.from("payment_proofs").upload(G,ne);if(Y)throw console.error("Storage upload error:",Y),new Error(`Failed to upload proof: ${Y.message}`);ce=G}const{error:me}=await _e.from("payments").insert({requisition_id:N,amount:j.amount,date:j.date,recorded_by_id:te.id,proof_path:ce});if(me)throw console.error("Payment insert error:",me),new Error(`Failed to save payment record: ${me.message}`);const{error:de}=await _e.from("requisitions").update({status:W.PAYMENT_PROCESSING,updated_at:new Date().toISOString()}).eq("id",N);if(de)throw console.error("Requisition status update error:",de),new Error(`Payment saved, but failed to update requisition status: ${de.message}`);const{error:U}=await _e.from("approval_logs").insert({requisition_id:N,user_id:te.id,action:"Payment Added",comment:`NGN ${j.amount.toLocaleString()}`});U&&console.error("Approval log error:",U)},X=async(N,j)=>{const{error:ne}=await _e.from("requisitions").update({status:W.PAID,updated_at:new Date().toISOString()}).eq("id",N);if(ne)throw console.error("Mark as Paid error:",ne),new Error(`Failed to update status to Paid: ${ne.message}`);const{error:te}=await _e.from("approval_logs").insert({requisition_id:N,user_id:j.id,action:"Marked as Paid"});te&&console.error("Log error on Mark as Paid:",te)},ee=async N=>{await _e.from("notifications").update({read:!0}).eq("id",N)},J=async N=>{await _e.from("notifications").update({read:!0}).eq("recipient_id",N).eq("read",!1)},z=async N=>{const j=new dN({apiKey:"PLACEHOLDER_API_KEY"}),ce={inlineData:{data:await(de=>new Promise((U,G)=>{const Y=new FileReader;Y.readAsDataURL(de),Y.onload=()=>U(Y.result.split(",")[1]),Y.onerror=Z=>G(Z)}))(N),mimeType:N.type}},me={text:'Analyze this invoice or list of items. Extract each item, its quantity, its current stock level, and a brief description. Return the data as a JSON array with objects containing "name", "quantity" (as a number), "stock_level" (as a number), and "description" keys. If a value is not found, use a reasonable default or null. For example: [{"name": "Item A", "quantity": 10, "stock_level": 50, "description": "10mg tablets"}]. Only return the JSON array.'};try{const de=await j.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[me,ce]},config:{responseMimeType:"application/json",responseSchema:{type:Rt.ARRAY,items:{type:Rt.OBJECT,properties:{name:{type:Rt.STRING},quantity:{type:Rt.NUMBER},stock_level:{type:Rt.NUMBER},description:{type:Rt.STRING}},required:["name","quantity"]}}}}),U=JSON.parse(de.text);if(!Array.isArray(U))throw new Error("AI did not return a valid array.");return U.map(G=>({name:G.name||"Unknown Item",quantity:typeof G.quantity=="number"?G.quantity:1,description:G.description||"",estimated_unit_cost:0,stock_level:typeof G.stock_level=="number"?G.stock_level:0,unit_price:0,supplier:""}))}catch(de){throw console.error("Error processing invoice with AI:",de),new Error("Failed to analyze the invoice. The document might be unclear or in an unsupported format.")}};return T.jsx(Lv.Provider,{value:{requisitions:e,notifications:o,profiles:l,addRequisition:w,addPurchaseOrder:C,updatePurchaseOrder:b,updateRequisitionStatus:q,resubmitRequisition:B,addHistologyRequisition:x,addMessage:D,addPayment:$,markAsPaid:X,markNotificationAsRead:ee,markAllNotificationsAsRead:J,processInvoiceWithAI:z,fetchAllData:m},children:i})},Ls=()=>{const i=ae.useContext(Lv);if(!i)throw new Error("useRequisitions must be used within a RequisitionProvider");return i},qv=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),kc=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ra=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),hy=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})}),Gv=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),Bv=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),pN=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001a7.5 7.5 0 0 1-1.085 3.931l-1.5 2.598m0 0l-3.93-1.086a7.5 7.5 0 0 1-4.242-4.242l-1.086-3.93m0 0a7.5 7.5 0 0 1 2.598-1.5l3.93-1.085a7.5 7.5 0 0 1 4.242 4.242l1.086 3.93m-8.484 2.598a7.5 7.5 0 0 1-2.598 1.5l-3.93 1.085a7.5 7.5 0 0 1-4.242-4.242l-1.086-3.93m0 0a7.5 7.5 0 0 1-1.085-3.931v-.001h4.992m0 0l-1.5-2.598a7.5 7.5 0 0 1-1.085-3.931m-1.5 2.598a7.5 7.5 0 0 1-2.598-1.5m-3.93-1.085a7.5 7.5 0 0 1-4.242-4.242m4.242 4.242 3.93 1.085"})}),mN=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),gN=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),yN=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),py=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})}),vN=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),_N=({onLogin:i})=>{const[e,n]=ae.useState(""),[o,a]=ae.useState(""),[l,c]=ae.useState(""),[f,p]=ae.useState(!1),m=async v=>{v.preventDefault(),c(""),p(!0);try{await i(e,o)||c("Invalid email or password. Please try again.")}catch(_){c("An unexpected error occurred. Please try again."),console.error(_)}finally{p(!1)}};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-50 px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"w-full max-w-md space-y-8",children:[T.jsxs("div",{children:[T.jsx("div",{className:"mx-auto h-16 w-16 text-burnt-orange-700 bg-burnt-orange-100 rounded-full flex items-center justify-center",children:T.jsx(Gv,{className:"h-8 w-8"})}),T.jsx("h1",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-slate-900",children:"Zankli Medical Centre"}),T.jsx("h2",{className:"mt-2 text-center text-xl font-semibold tracking-tight text-burnt-orange-800",children:"Procurement & Requisition System"})]}),T.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[T.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),T.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full appearance-none rounded-t-md border border-slate-300 px-3 py-3 text-slate-900 placeholder-slate-500 focus:z-10 focus:border-burnt-orange-500 focus:outline-none focus:ring-burnt-orange-500 sm:text-sm",placeholder:"Email address",value:e,onChange:v=>n(v.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),T.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full appearance-none rounded-b-md border border-slate-300 px-3 py-3 text-slate-900 placeholder-slate-500 focus:z-10 focus:border-burnt-orange-500 focus:outline-none focus:ring-burnt-orange-500 sm:text-sm",placeholder:"Password",value:o,onChange:v=>a(v.target.value)})]})]}),l&&T.jsx("p",{className:"text-sm text-red-600 text-center",children:l}),T.jsx("div",{children:T.jsx("button",{type:"submit",disabled:f,className:"group relative flex w-full justify-center rounded-md border border-transparent bg-burnt-orange-700 py-3 px-4 text-sm font-medium text-white hover:bg-burnt-orange-800 focus:outline-none focus:ring-2 focus:ring-burnt-orange-500 focus:ring-offset-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:f?"Signing in...":"Sign in"})})]})]})})};/*!
 * Signature Pad v5.1.2 | https://github.com/szimek/signature_pad
 * (c) 2025 Szymon Nowak | Released under the MIT license
 */var xa=class{constructor(i,e,n,o){He(this,"x");He(this,"y");He(this,"pressure");He(this,"time");if(isNaN(i)||isNaN(e))throw new Error(`Point is invalid: (${i}, ${e})`);this.x=+i,this.y=+e,this.pressure=n||0,this.time=o||Date.now()}distanceTo(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))}equals(i){return this.x===i.x&&this.y===i.y&&this.pressure===i.pressure&&this.time===i.time}velocityFrom(i){return this.time!==i.time?this.distanceTo(i)/(this.time-i.time):0}},EN=class Hv{constructor(e,n,o,a,l,c){this.startPoint=e,this.control2=n,this.control1=o,this.endPoint=a,this.startWidth=l,this.endWidth=c}static fromPoints(e,n){const o=this.calculateControlPoints(e[0],e[1],e[2]).c2,a=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Hv(e[1],o,a,e[2],n.start,n.end)}static calculateControlPoints(e,n,o){const a=e.x-n.x,l=e.y-n.y,c=n.x-o.x,f=n.y-o.y,p={x:(e.x+n.x)/2,y:(e.y+n.y)/2},m={x:(n.x+o.x)/2,y:(n.y+o.y)/2},v=Math.sqrt(a*a+l*l),_=Math.sqrt(c*c+f*f),E=p.x-m.x,w=p.y-m.y,C=v+_==0?0:_/(v+_),x={x:m.x+E*C,y:m.y+w*C},b=n.x-x.x,q=n.y-x.y;return{c1:new xa(p.x+b,p.y+q),c2:new xa(m.x+b,m.y+q)}}length(){let n=0,o,a;for(let l=0;l<=10;l+=1){const c=l/10,f=this.point(c,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),p=this.point(c,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(l>0){const m=f-o,v=p-a;n+=Math.sqrt(m*m+v*v)}o=f,a=p}return n}point(e,n,o,a,l){return n*(1-e)*(1-e)*(1-e)+3*o*(1-e)*(1-e)*e+3*a*(1-e)*e*e+l*e*e*e}},SN=class{constructor(){He(this,"_et");try{this._et=new EventTarget}catch{this._et=document}}addEventListener(i,e,n){this._et.addEventListener(i,e,n)}dispatchEvent(i){return this._et.dispatchEvent(i)}removeEventListener(i,e,n){this._et.removeEventListener(i,e,n)}};function TN(i,e=250){let n=0,o=null,a,l,c;const f=()=>{n=Date.now(),o=null,a=i.apply(l,c),o||(l=null,c=[])};return function(...m){const v=Date.now(),_=e-(v-n);return l=this,c=m,_<=0||_>e?(o&&(clearTimeout(o),o=null),n=v,a=i.apply(l,c),o||(l=null,c=[])):o||(o=window.setTimeout(f,_)),a}}var wN=class Lc extends SN{constructor(n,o={}){super();He(this,"dotSize");He(this,"minWidth");He(this,"maxWidth");He(this,"penColor");He(this,"minDistance");He(this,"velocityFilterWeight");He(this,"compositeOperation");He(this,"backgroundColor");He(this,"throttle");He(this,"canvasContextOptions");He(this,"_ctx");He(this,"_drawingStroke",!1);He(this,"_isEmpty",!0);He(this,"_dataUrl");He(this,"_dataUrlOptions");He(this,"_lastPoints",[]);He(this,"_data",[]);He(this,"_lastVelocity",0);He(this,"_lastWidth",0);He(this,"_strokeMoveUpdate");He(this,"_strokePointerId");this.canvas=n,this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle=o.throttle??16,this.minDistance=o.minDistance??5,this.dotSize=o.dotSize||0,this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=o.compositeOperation||"source-over",this.canvasContextOptions=o.canvasContextOptions??{},this._strokeMoveUpdate=this.throttle?TN(Lc.prototype._strokeUpdate,this.throttle):Lc.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._handlePointerCancel=this._handlePointerCancel.bind(this),this._handleTouchCancel=this._handleTouchCancel.bind(this),this._ctx=n.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:n,canvas:o}=this;n.fillStyle=this.backgroundColor,n.clearRect(0,0,o.width,o.height),n.fillRect(0,0,o.width,o.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._dataUrl=void 0,this._dataUrlOptions=void 0,this._strokePointerId=void 0}redraw(){const n=this._data,o=this._dataUrl,a=this._dataUrlOptions;this.clear(),o&&this.fromDataURL(o,a),this.fromData(n,{clear:!1})}fromDataURL(n,o={}){return new Promise((a,l)=>{const c=new Image,f=o.ratio||window.devicePixelRatio||1,p=o.width||this.canvas.width/f,m=o.height||this.canvas.height/f,v=o.xOffset||0,_=o.yOffset||0;this._reset(this._getPointGroupOptions()),c.onload=()=>{this._ctx.drawImage(c,v,_,p,m),a()},c.onerror=E=>{l(E)},c.crossOrigin="anonymous",c.src=n,this._isEmpty=!1,this._dataUrl=n,this._dataUrlOptions={...o}})}toDataURL(n="image/png",o){switch(n){case"image/svg+xml":return typeof o!="object"&&(o=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(o))}`;default:return typeof o!="number"&&(o=void 0),this.canvas.toDataURL(n,o)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const n=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!n?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){const n=window.document===this.canvas.ownerDocument?window:this.canvas.ownerDocument.defaultView??this.canvas.ownerDocument;return{addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}_removeMoveUpEventListeners(){const{removeEventListener:n}=this._getListenerFunctions();n("pointermove",this._handlePointerMove),n("pointerup",this._handlePointerUp),n("pointercancel",this._handlePointerCancel),n("mousemove",this._handleMouseMove),n("mouseup",this._handleMouseUp),n("touchmove",this._handleTouchMove),n("touchend",this._handleTouchEnd),n("touchcancel",this._handleTouchCancel)}isEmpty(){return this._isEmpty}fromData(n,{clear:o=!0}={}){o&&this.clear(),this._fromData(n,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(n)}toData(){return this._data}_isLeftButtonPressed(n,o){return o?n.buttons===1:(n.buttons&1)===1}_pointerEventToSignatureEvent(n){return{event:n,type:n.type,x:n.clientX,y:n.clientY,pressure:"pressure"in n?n.pressure:0}}_touchEventToSignatureEvent(n){const o=n.changedTouches[0];return{event:n,type:n.type,x:o.clientX,y:o.clientY,pressure:o.force}}_handleMouseDown(n){!this._isLeftButtonPressed(n,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(n))}_handleMouseMove(n){if(!this._isLeftButtonPressed(n,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(n),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(n))}_handleMouseUp(n){this._isLeftButtonPressed(n)||this._strokeEnd(this._pointerEventToSignatureEvent(n))}_handleTouchStart(n){n.targetTouches.length!==1||this._drawingStroke||(n.cancelable&&n.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(n)))}_handleTouchMove(n){if(n.targetTouches.length===1){if(n.cancelable&&n.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(n),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(n))}}_handleTouchEnd(n){n.targetTouches.length===0&&(n.cancelable&&n.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(n)))}_handlePointerCancel(n){this._allowPointerId(n)&&(n.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(n),!1))}_handleTouchCancel(n){n.cancelable&&n.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(n),!1)}_getPointerId(n){return n.persistentDeviceId||n.pointerId}_allowPointerId(n,o=!1){return typeof this._strokePointerId>"u"?o:this._getPointerId(n)===this._strokePointerId}_handlePointerDown(n){this._drawingStroke||!this._isLeftButtonPressed(n)||!this._allowPointerId(n,!0)||(this._strokePointerId=this._getPointerId(n),n.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(n)))}_handlePointerMove(n){if(this._allowPointerId(n)){if(!this._isLeftButtonPressed(n,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(n),!1);return}n.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(n))}}_handlePointerUp(n){this._isLeftButtonPressed(n)||!this._allowPointerId(n)||(n.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(n)))}_getPointGroupOptions(n){return{penColor:n&&"penColor"in n?n.penColor:this.penColor,dotSize:n&&"dotSize"in n?n.dotSize:this.dotSize,minWidth:n&&"minWidth"in n?n.minWidth:this.minWidth,maxWidth:n&&"maxWidth"in n?n.maxWidth:this.maxWidth,velocityFilterWeight:n&&"velocityFilterWeight"in n?n.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:n&&"compositeOperation"in n?n.compositeOperation:this.compositeOperation}}_strokeBegin(n){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:n,cancelable:!0})))return;const{addEventListener:a}=this._getListenerFunctions();switch(n.event.type){case"mousedown":a("mousemove",this._handleMouseMove,{passive:!1}),a("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":a("touchmove",this._handleTouchMove,{passive:!1}),a("touchend",this._handleTouchEnd,{passive:!1}),a("touchcancel",this._handleTouchCancel,{passive:!1});break;case"pointerdown":a("pointermove",this._handlePointerMove,{passive:!1}),a("pointerup",this._handlePointerUp,{passive:!1}),a("pointercancel",this._handlePointerCancel,{passive:!1});break}this._drawingStroke=!0;const l=this._getPointGroupOptions(),c={...l,points:[]};this._data.push(c),this._reset(l),this._strokeUpdate(n)}_strokeUpdate(n){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(n);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:n}));const o=this._createPoint(n.x,n.y,n.pressure),a=this._data[this._data.length-1],l=a.points,c=l.length>0&&l[l.length-1],f=c?o.distanceTo(c)<=this.minDistance:!1,p=this._getPointGroupOptions(a);if(!c||!(c&&f)){const m=this._addPoint(o,p);c?m&&this._drawCurve(m,p):this._drawDot(o,p),l.push({time:o.time,x:o.x,y:o.y,pressure:o.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:n}))}_strokeEnd(n,o=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(o&&this._strokeUpdate(n),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:n})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(n){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(n.minWidth+n.maxWidth)/2,this._ctx.fillStyle=n.penColor,this._ctx.globalCompositeOperation=n.compositeOperation}_createPoint(n,o,a){const l=this.canvas.getBoundingClientRect();return new xa(n-l.left,o-l.top,a,new Date().getTime())}_addPoint(n,o){const{_lastPoints:a}=this;if(a.push(n),a.length>2){a.length===3&&a.unshift(a[0]);const l=this._calculateCurveWidths(a[1],a[2],o),c=EN.fromPoints(a,l);return a.shift(),c}return null}_calculateCurveWidths(n,o,a){const l=a.velocityFilterWeight*o.velocityFrom(n)+(1-a.velocityFilterWeight)*this._lastVelocity,c=this._strokeWidth(l,a),f={end:c,start:this._lastWidth};return this._lastVelocity=l,this._lastWidth=c,f}_strokeWidth(n,o){return Math.max(o.maxWidth/(n+1),o.minWidth)}_drawCurveSegment(n,o,a){const l=this._ctx;l.moveTo(n,o),l.arc(n,o,a,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(n,o){const a=this._ctx,l=n.endWidth-n.startWidth,c=Math.ceil(n.length())*2;a.beginPath(),a.fillStyle=o.penColor;for(let f=0;f<c;f+=1){const p=f/c,m=p*p,v=m*p,_=1-p,E=_*_,w=E*_;let C=w*n.startPoint.x;C+=3*E*p*n.control1.x,C+=3*_*m*n.control2.x,C+=v*n.endPoint.x;let x=w*n.startPoint.y;x+=3*E*p*n.control1.y,x+=3*_*m*n.control2.y,x+=v*n.endPoint.y;const b=Math.min(n.startWidth+v*l,o.maxWidth);this._drawCurveSegment(C,x,b)}a.closePath(),a.fill()}_drawDot(n,o){const a=this._ctx,l=o.dotSize>0?o.dotSize:(o.minWidth+o.maxWidth)/2;a.beginPath(),this._drawCurveSegment(n.x,n.y,l),a.closePath(),a.fillStyle=o.penColor,a.fill()}_fromData(n,o,a){for(const l of n){const{points:c}=l,f=this._getPointGroupOptions(l);if(c.length>1)for(let p=0;p<c.length;p+=1){const m=c[p],v=new xa(m.x,m.y,m.pressure,m.time);p===0&&this._reset(f);const _=this._addPoint(v,f);_&&o(_,f)}else this._reset(f),a(c[0],f)}}toSVG({includeBackgroundColor:n=!1,includeDataUrl:o=!1}={}){var _,E,w,C,x;const a=this._data,l=Math.max(window.devicePixelRatio||1,1),c=0,f=0,p=this.canvas.width/l,m=this.canvas.height/l,v=document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.setAttribute("xmlns","http://www.w3.org/2000/svg"),v.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),v.setAttribute("viewBox",`${c} ${f} ${p} ${m}`),v.setAttribute("width",p.toString()),v.setAttribute("height",m.toString()),n&&this.backgroundColor){const b=document.createElement("rect");b.setAttribute("width","100%"),b.setAttribute("height","100%"),b.setAttribute("fill",this.backgroundColor),v.appendChild(b)}if(o&&this._dataUrl){const b=((_=this._dataUrlOptions)==null?void 0:_.ratio)||window.devicePixelRatio||1,q=((E=this._dataUrlOptions)==null?void 0:E.width)||this.canvas.width/b,B=((w=this._dataUrlOptions)==null?void 0:w.height)||this.canvas.height/b,D=((C=this._dataUrlOptions)==null?void 0:C.xOffset)||0,$=((x=this._dataUrlOptions)==null?void 0:x.yOffset)||0,X=document.createElement("image");X.setAttribute("x",D.toString()),X.setAttribute("y",$.toString()),X.setAttribute("width",q.toString()),X.setAttribute("height",B.toString()),X.setAttribute("preserveAspectRatio","none"),X.setAttribute("href",this._dataUrl),v.appendChild(X)}return this._fromData(a,(b,{penColor:q})=>{const B=document.createElement("path");if(!isNaN(b.control1.x)&&!isNaN(b.control1.y)&&!isNaN(b.control2.x)&&!isNaN(b.control2.y)){const D=`M ${b.startPoint.x.toFixed(3)},${b.startPoint.y.toFixed(3)} C ${b.control1.x.toFixed(3)},${b.control1.y.toFixed(3)} ${b.control2.x.toFixed(3)},${b.control2.y.toFixed(3)} ${b.endPoint.x.toFixed(3)},${b.endPoint.y.toFixed(3)}`;B.setAttribute("d",D),B.setAttribute("stroke-width",(b.endWidth*2.25).toFixed(3)),B.setAttribute("stroke",q),B.setAttribute("fill","none"),B.setAttribute("stroke-linecap","round"),v.appendChild(B)}},(b,{penColor:q,dotSize:B,minWidth:D,maxWidth:$})=>{const X=document.createElement("circle"),ee=B>0?B:(D+$)/2;X.setAttribute("r",ee.toString()),X.setAttribute("cx",b.x.toString()),X.setAttribute("cy",b.y.toString()),X.setAttribute("fill",q),v.appendChild(X)}),v.outerHTML}};const AN=i=>{const{jsPDF:e}=window.jspdf,n=new e;let o=0;const a=n.internal.pageSize.getWidth(),l=15,c=p=>{const m=p.internal.getNumberOfPages();for(let v=1;v<=m;v++)p.setPage(v),p.setFontSize(8),p.setTextColor(150),p.text(`Page ${v} of ${m}`,p.internal.pageSize.width-25,p.internal.pageSize.height-10),p.text(`Zankli Procurement System - ${i.id}`,15,p.internal.pageSize.height-10)},f=p=>{var _,E,w,C;let m=p;m>220&&(n.addPage(),m=20),n.setFontSize(12),n.text("Signatures & Approvals",l,m),m+=10;const v=[((_=i.signatures)==null?void 0:_.preparedBy)&&{...i.signatures.preparedBy,role:"Prepared By"},((E=i.signatures)==null?void 0:E.levelConfirmedBy)&&{...i.signatures.levelConfirmedBy,role:"Level Confirmed By"},((w=i.signatures)==null?void 0:w.checkedBy)&&{...i.signatures.checkedBy,role:"Checked By"}].filter(Boolean);return(C=i.log)==null||C.forEach(x=>{x.signature&&v.push({name:x.userName||"",signature:x.signature,timestamp:x.timestamp,role:`${x.action} By`})}),v.forEach(x=>{m>240&&(n.addPage(),m=20),n.setFontSize(10),n.text(`${x.role}: ${x.name}`,l,m+5),n.text(`Date: ${new Date(x.timestamp).toLocaleString()}`,l,m+10),n.addImage(x.signature,"PNG",l,m+12,50,20),n.line(l,m+35,l+70,m+35),m+=45}),m};if(i.type===xe.HISTOLOGY_PAYMENT){n.setFontSize(16),n.text("ZANKLI MEDICAL SERVICES LTD",105,15,{align:"center"}),n.setFontSize(12),n.text("REQUEST FOR HISTOLOGY PAYMENT",105,22,{align:"center"}),n.text(`Status: ${i.status}`,l,30),n.text(`Requester: ${i.requesterName}`,l,37);const p=["Date","Patient Name","Hosp. No","Lab. No","Receipt/HMO","Service","Outsource Bills","ZMC Charge","Retainership"],m=(i.histologyItems||[]).map(E=>[new Date(E.date).toLocaleDateString(),E.patient_name,E.hospital_no,E.lab_no,E.receipt_no,E.outsource_service,`NGN ${E.outsource_bills.toLocaleString()}`,`NGN ${E.zmc_charge.toLocaleString()}`,E.retainership]);n.autoTable({head:[p],body:m,startY:45,margin:{left:l}}),o=n.previousAutoTable.finalY,o>220&&(n.addPage(),o=20),n.setFontSize(14);const v=`Total Cost: NGN ${i.total_estimated_cost.toLocaleString()}`,_=n.getTextWidth(v);n.text(v,a-l-_,o+15),o+=20}else if(i.type===xe.PURCHASE_ORDER){n.setFontSize(18),n.setFont("helvetica","bold"),n.text("Zankli Medical Services LTD",l,20),n.setFontSize(10),n.setFont("helvetica","normal"),n.text("No. 1 Ibrahim Tahir Lane",l,26),n.text("Abuja, FCT, Nigeria",l,32),n.setFontSize(22),n.setFont("helvetica","bold"),n.text("PURCHASE ORDER",a-l,25,{align:"right"});let p=50;n.setDrawColor(200),n.line(l,p-5,a-l,p-5),n.setFontSize(10),n.setFont("helvetica","bold"),n.text("PO Number:",a-l-35,p),n.setFont("helvetica","normal"),n.text(i.id,a-l-10,p),p+=7,n.setFont("helvetica","bold"),n.text("Date:",a-l-35,p),n.setFont("helvetica","normal"),n.text(new Date(i.created_at).toLocaleDateString(),a-l-10,p),p+=10;const m=["Item Name","Description","Supplier","Stock Lvl","Qty","Unit Price","Total Price"],v=(i.items||[]).map(E=>[E.name,E.description,E.supplier||"N/A",E.stock_level??"N/A",E.quantity,E.unit_price?`NGN ${E.unit_price.toLocaleString()}`:"Not Priced",E.unit_price?`NGN ${(E.quantity*E.unit_price).toLocaleString()}`:"N/A"]);n.autoTable({head:[m],body:v,startY:p,margin:{left:l},theme:"grid",headStyles:{fillColor:[34,49,63]}}),o=n.previousAutoTable.finalY,o>240&&(n.addPage(),o=20),n.setFontSize(12),n.setFont("helvetica","bold");const _=`Total: NGN ${i.total_estimated_cost.toLocaleString()}`;n.text(_,a-l,o+15,{align:"right"}),o+=20}else{n.setFontSize(20),n.text(`Requisition: ${i.id}`,l,20),n.setFontSize(12),n.text("Type: Standard",l,30),n.text(`Department: ${i.department}`,l,37),n.text(`Status: ${i.status}`,l,44),n.text(`Requester: ${i.requesterName}`,l,51);const p=["Item Name","Description","Quantity","Est. Unit Cost","Est. Total Cost"],m=(i.items||[]).map(E=>[E.name,E.description,E.quantity,`NGN ${(E.estimated_unit_cost||0).toLocaleString()}`,`NGN ${(E.quantity*(E.estimated_unit_cost||0)).toLocaleString()}`]);n.autoTable({head:[p],body:m,startY:60,margin:{left:l}}),o=n.previousAutoTable.finalY,o>220&&(n.addPage(),o=20),n.setFontSize(14);const v=`Total Cost: NGN ${i.total_estimated_cost.toLocaleString()}`,_=n.getTextWidth(v);n.text(v,a-l-_,o+15),o+=20}if(i.payments&&i.payments.length>0){o+=15,o>220&&(n.addPage(),o=20),n.setFontSize(12),n.text("Payment History",l,o);const p=["Date","Amount Paid","Recorded By","Proof"],m=i.payments.map(v=>[new Date(v.date).toLocaleDateString(),`NGN ${v.amount.toLocaleString()}`,v.recordedByName||"N/A",v.proof_path?"Yes":"No"]);n.autoTable({head:[p],body:m,startY:o+5,margin:{left:l}}),o=n.previousAutoTable.finalY}o=f(o+15),c(n),n.save(`${i.id}.pdf`)},Vv=({message:i,type:e,onClose:n})=>{ae.useEffect(()=>{const a=setTimeout(n,5e3);return()=>clearTimeout(a)},[n]);const o=e==="success"?"bg-green-600":"bg-red-600";return T.jsx("div",{className:`fixed top-5 right-5 ${o} text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in`,children:i})},CN=({notifications:i,onSelect:e,onMarkAllRead:n})=>T.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-20",children:[T.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[T.jsx("h3",{className:"font-semibold text-slate-800",children:"Notifications"}),T.jsx("button",{onClick:n,className:"text-xs font-semibold text-burnt-orange-700 hover:underline",children:"Mark all as read"})]}),T.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.length===0?T.jsx("p",{className:"text-center text-sm text-slate-500 py-8",children:"No new notifications."}):i.map(o=>T.jsxs("div",{onClick:()=>e(o),className:"p-4 border-b border-slate-100 hover:bg-slate-50 cursor-pointer flex items-start gap-3",children:[!o.read&&T.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),T.jsxs("div",{className:o.read?"ml-5":"",children:[T.jsx("p",{className:`text-sm ${o.read?"text-slate-600":"text-slate-800 font-semibold"}`,children:o.message}),T.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(o.created_at).toLocaleString()})]})]},o.id))})]}),bN=({user:i,onLogout:e,onSelectNotification:n})=>{const{notifications:o,markAllNotificationsAsRead:a}=Ls(),[l,c]=ae.useState(!1),f=ae.useRef(null),p=ae.useMemo(()=>o.filter(m=>!m.read).length,[o]);return ae.useEffect(()=>{const m=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[f]),T.jsx("header",{className:"bg-white shadow-md sticky top-0 z-10",children:T.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"flex h-16 items-center justify-between",children:[T.jsx("div",{className:"flex items-center",children:T.jsx("h1",{className:"text-xl md:text-2xl font-bold text-burnt-orange-800",children:"Zankli Procurement"})}),T.jsxs("div",{className:"flex items-center space-x-4",children:[T.jsxs("div",{ref:f,className:"relative",children:[T.jsxs("button",{onClick:()=>c(m=>!m),className:"relative text-slate-600 hover:text-slate-800 p-2 rounded-full hover:bg-slate-100",children:[T.jsx(vN,{className:"w-6 h-6"}),p>0&&T.jsx("span",{className:"absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:p})]}),l&&T.jsx(CN,{notifications:o,onSelect:m=>{n(m),c(!1)},onMarkAllRead:()=>a(i.id)})]}),T.jsxs("div",{className:"text-right",children:[T.jsx("p",{className:"font-semibold text-slate-800 text-sm md:text-base",children:i.name}),T.jsx("p",{className:"text-xs md:text-sm text-slate-500",children:i.role})]}),T.jsx("button",{onClick:e,className:"rounded-md bg-burnt-orange-100 px-3 py-2 text-sm font-semibold text-burnt-orange-800 hover:bg-burnt-orange-200 transition-colors",children:"Logout"})]})]})})})},qc=({onSave:i,onClear:e})=>{const n=ae.useRef(null),o=ae.useRef(null);ae.useEffect(()=>{if(n.current){o.current=new wN(n.current,{backgroundColor:"rgb(255, 255, 255)"});const c=()=>{var p;if(!n.current)return;const f=Math.max(window.devicePixelRatio||1,1);n.current.width=n.current.offsetWidth*f,n.current.height=n.current.offsetHeight*f,n.current.getContext("2d").scale(f,f),(p=o.current)==null||p.clear()};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)}},[]);const a=()=>{o.current&&!o.current.isEmpty()?i(o.current.toDataURL()):alert("Please provide a signature first.")},l=()=>{var c;(c=o.current)==null||c.clear(),e()};return T.jsxs("div",{className:"w-full",children:[T.jsx("div",{className:"border border-slate-300 rounded-md",children:T.jsx("canvas",{ref:n,className:"w-full h-40 rounded-md"})}),T.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[T.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 text-sm rounded bg-slate-200 hover:bg-slate-300",children:"Clear"}),T.jsx("button",{type:"button",onClick:a,className:"px-3 py-1 text-sm rounded bg-burnt-orange-600 text-white hover:bg-burnt-orange-700",children:"Save Signature"})]})]})},RN=({isOpen:i,onClose:e,onSign:n,action:o,isSubmitting:a=!1})=>{const[l,c]=ae.useState(null),[f,p]=ae.useState("");if(!i)return null;const m=()=>{if(!l){alert("Please provide your signature first.");return}if((o==="Reject"||o==="Query")&&!f.trim()){alert("A comment is required for this action.");return}n(l,f)};return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",children:[T.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:["Confirm Action: ",o]}),(o==="Reject"||o==="Query")&&T.jsxs("div",{className:"mb-4",children:[T.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-slate-700 mb-1",children:"Comment (Required)"}),T.jsx("textarea",{id:"comment",value:f,onChange:v=>p(v.target.value),rows:3,className:"w-full border border-slate-300 rounded-md p-2 focus:ring-burnt-orange-500 focus:border-burnt-orange-500"})]}),T.jsxs("div",{className:"mb-4",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Please Sign Below"}),T.jsx(qc,{onSave:v=>c(v),onClear:()=>c(null)}),l&&T.jsx("img",{src:l,alt:"Your signature",className:"mt-2 border rounded h-16 w-auto"})]}),T.jsxs("div",{className:"flex justify-end space-x-3",children:[T.jsx("button",{onClick:e,className:"px-4 py-2 rounded bg-slate-200 hover:bg-slate-300",children:"Cancel"}),T.jsx("button",{onClick:m,disabled:a,className:"px-4 py-2 rounded bg-burnt-orange-700 text-white hover:bg-burnt-orange-800 disabled:bg-slate-400 disabled:cursor-wait",children:a?"Submitting...":o})]})]})})},xN=({requisition:i,currentUser:e,onSendMessage:n})=>{const[o,a]=ae.useState(""),l=ae.useRef(null),c=i.conversation||[];ae.useEffect(()=>{var p;(p=l.current)==null||p.scrollIntoView({behavior:"smooth"})},[c]);const f=()=>{o.trim()&&(n(o.trim()),a(""))};return T.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-800 border-b pb-2",children:"Conversation"}),T.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-4 pr-2",children:[c.length===0?T.jsx("p",{className:"text-sm text-slate-500",children:"No messages yet."}):c.map(p=>T.jsx("div",{className:`flex items-start gap-2.5 ${p.sender_id===e.id?"justify-end":""}`,children:T.jsxs("div",{className:`flex flex-col w-full max-w-[320px] leading-1.5 p-4 border-slate-200 ${p.sender_id===e.id?"bg-burnt-orange-100 rounded-s-xl rounded-ee-xl":"bg-slate-100 rounded-e-xl rounded-es-xl"}`,children:[T.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[T.jsx("span",{className:"text-sm font-semibold text-slate-900",children:p.senderName}),T.jsx("span",{className:"text-xs font-normal text-slate-500",children:new Date(p.timestamp).toLocaleTimeString()})]}),T.jsx("p",{className:"text-sm font-normal py-2.5 text-slate-900",children:p.text})]})},p.id)),T.jsx("div",{ref:l})]}),T.jsxs("div",{className:"mt-4 flex gap-2",children:[T.jsx("input",{type:"text",value:o,onChange:p=>a(p.target.value),onKeyPress:p=>p.key==="Enter"&&f(),placeholder:"Type your message...",className:"flex-grow border border-slate-300 rounded-md p-2 focus:ring-burnt-orange-500 focus:border-burnt-orange-500"}),T.jsx("button",{onClick:f,className:"px-4 py-2 rounded bg-burnt-orange-700 text-white hover:bg-burnt-orange-800",children:"Send"})]})]})},NN=({requisition:i,user:e,setToast:n})=>{const{addPayment:o,markAsPaid:a}=Ls(),[l,c]=ae.useState(""),[f,p]=ae.useState(new Date().toISOString().split("T")[0]),[m,v]=ae.useState(null),[_,E]=ae.useState({}),[w,C]=ae.useState(!1),[x,b]=ae.useState(!1),[q,B]=ae.useState(!1);ae.useEffect(()=>{(async()=>{if(!i.payments||i.payments.length===0)return;C(!0);const N={};for(const j of i.payments)if(j.proof_path)try{const{data:ne}=await _e.storage.from("payment_proofs").createSignedUrl(j.proof_path,3600);ne&&(N[j.id]=ne.signedUrl)}catch(ne){console.error(`Failed to get signed URL for ${j.proof_path}:`,ne)}E(N),C(!1)})()},[i.payments]);const D=ae.useMemo(()=>(i.payments||[]).reduce((z,N)=>z+N.amount,0),[i.payments]),$=i.total_estimated_cost-D,X=z=>{z.target.files&&z.target.files[0]&&v(z.target.files[0])},ee=async()=>{const z=parseFloat(l);if(isNaN(z)||z<=0){n({message:"Please enter a valid amount.",type:"error"});return}if(z>$){n({message:"Payment cannot exceed the outstanding balance.",type:"error"});return}b(!0),n(null);try{await o(i.id,{amount:z,date:f},m,e),n({message:"Payment added successfully!",type:"success"}),c(""),v(null),document.getElementById("proof")&&(document.getElementById("proof").value="")}catch(N){console.error(N),n({message:`Failed to add payment: ${N.message}`,type:"error"})}finally{b(!1)}},J=async()=>{B(!0),n(null);try{await a(i.id,e),n({message:"Requisition marked as fully paid!",type:"success"})}catch(z){console.error(z),n({message:`Failed to mark as paid: ${z.message}`,type:"error"})}finally{B(!1)}};return T.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[T.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-800",children:"Financial Overview"}),T.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-slate-500",children:"Total Value"}),T.jsxs("p",{className:"text-xl font-bold text-slate-800",children:["NGN ",i.total_estimated_cost.toLocaleString()]})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-slate-500",children:"Total Paid"}),T.jsxs("p",{className:"text-xl font-bold text-green-600",children:["NGN ",D.toLocaleString()]})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-slate-500",children:"Balance"}),T.jsxs("p",{className:"text-xl font-bold text-red-600",children:["NGN ",$.toLocaleString()]})]})]}),i.payments&&i.payments.length>0&&T.jsxs("div",{className:"mb-4",children:[T.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Payment History"}),T.jsx("ul",{className:"space-y-2 text-sm",children:(i.payments||[]).map(z=>T.jsxs("li",{className:"flex justify-between items-center p-2 bg-slate-50 rounded",children:[T.jsxs("div",{children:[T.jsxs("span",{className:"font-medium",children:["NGN ",z.amount.toLocaleString()]})," on ",T.jsx("span",{className:"text-slate-600",children:new Date(z.date).toLocaleDateString()})," by ",T.jsx("span",{className:"text-slate-600",children:z.recordedByName})]}),z.proof_path&&(_[z.id]?T.jsx("a",{href:_[z.id],target:"_blank",rel:"noopener noreferrer",className:"text-burnt-orange-600 hover:underline",children:"View Proof"}):T.jsx("span",{className:"text-slate-400",children:"Loading link..."}))]},z.id))})]}),e.role===pt.ACCOUNTS&&$>0&&T.jsxs("div",{className:"border-t pt-4",children:[T.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Record a New Payment"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[T.jsxs("div",{className:"col-span-1 md:col-span-1",children:[T.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-700",children:"Amount"}),T.jsx("input",{type:"number",id:"amount",value:l,onChange:z=>c(z.target.value),placeholder:`Max NGN ${$.toLocaleString()}`,className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-300 focus:ring focus:ring-burnt-orange-200 focus:ring-opacity-50"})]}),T.jsxs("div",{className:"col-span-1 md:col-span-1",children:[T.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-slate-700",children:"Date"}),T.jsx("input",{type:"date",id:"date",value:f,onChange:z=>p(z.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-300 focus:ring focus:ring-burnt-orange-200 focus:ring-opacity-50"})]}),T.jsx("div",{className:"col-span-1 md:col-span-1",children:T.jsx("button",{onClick:ee,disabled:x||q,className:"w-full bg-burnt-orange-600 text-white py-2 px-4 rounded-md hover:bg-burnt-orange-700 disabled:bg-slate-400 disabled:cursor-wait",children:x?"Adding...":"Add Payment"})}),T.jsxs("div",{className:"col-span-1 md:col-span-3",children:[T.jsx("label",{htmlFor:"proof",className:"block text-sm font-medium text-slate-700",children:"Proof (PDF/Image)"}),T.jsx("input",{type:"file",id:"proof",onChange:X,accept:"application/pdf,image/*",className:"mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-burnt-orange-50 file:text-burnt-orange-700 hover:file:bg-burnt-orange-100"})]})]})]}),$===0&&i.status!==W.PAID&&e.role===pt.ACCOUNTS&&T.jsx("div",{className:"mt-4 border-t pt-4",children:T.jsxs("button",{onClick:J,disabled:x||q,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-wait",children:[T.jsx(kc,{className:"w-5 h-5"})," ",q?"Updating...":"Mark as Fully Paid"]})})]})},IN=({requisitions:i})=>{const{totalApproved:e,totalPaid:n,totalOutstanding:o}=ae.useMemo(()=>{let a=0,l=0;const c=[W.APPROVED,W.PO_COMPLETED,W.HISTOLOGY_APPROVED,W.PAYMENT_PROCESSING,W.PAID];return i.forEach(f=>{c.includes(f.status)&&(a+=f.total_estimated_cost,l+=(f.payments||[]).reduce((p,m)=>p+m.amount,0))}),{totalApproved:a,totalPaid:l,totalOutstanding:a-l}},[i]);return T.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border col-span-1 md:col-span-3",children:[T.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Financial Summary"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-slate-500",children:"Total Value Approved"}),T.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:["NGN ",e.toLocaleString()]})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-slate-500",children:"Total Paid Out"}),T.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["NGN ",n.toLocaleString()]})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-slate-500",children:"Total Outstanding"}),T.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["NGN ",o.toLocaleString()]})]})]})]})},MN=({onSelect:i,onCreate:e})=>{const{requisitions:n,fetchAllData:o}=Ls(),{user:a}=Ps(),[l,c]=ae.useState("All"),[f,p]=ae.useState(""),[m,v]=ae.useState(!1),_=async()=>{v(!0);try{await o()}catch(b){console.error("Manual refresh failed",b)}finally{v(!1)}},E=ae.useMemo(()=>n.filter(b=>{if(l==="All")return!0;if(l==="My Requisitions")return b.requester_id===(a==null?void 0:a.id);if(l==="Action Required"){if(!a)return!1;switch(a.role){case pt.APPROVER:return[W.PENDING_APPROVAL,W.PENDING_CHAIRMAN_REVIEW,W.PENDING_AUDITOR_REVIEW,W.PENDING_FINAL_APPROVAL,W.PENDING_AUDITOR_APPROVAL,W.PENDING_CHAIRMAN_APPROVAL].includes(b.status);case pt.PHARMACY_ADMIN:return b.status===W.PENDING_STORE_PRICING;case pt.ACCOUNTS:return[W.APPROVED,W.PO_COMPLETED,W.HISTOLOGY_APPROVED,W.PAYMENT_PROCESSING].includes(b.status);case pt.LAB_ADMIN:return b.requester_id===a.id&&(b.status===W.QUERIED||b.status===W.REJECTED);default:return!1}}return b.status===l}).filter(b=>{var B;const q=f.toLowerCase();return q?b.id.toLowerCase().includes(q)||((B=b.requesterName)==null?void 0:B.toLowerCase().includes(q))||b.department.toLowerCase().includes(q)||b.items&&b.items.some(D=>D.name.toLowerCase().includes(q)):!0}),[n,l,f,a]),w=b=>{switch(b){case W.APPROVED:case W.PO_COMPLETED:case W.HISTOLOGY_APPROVED:case W.PAID:return"bg-green-100 text-green-800";case W.PENDING_APPROVAL:case W.PENDING_CHAIRMAN_REVIEW:case W.PENDING_STORE_PRICING:case W.PENDING_AUDITOR_REVIEW:case W.PENDING_FINAL_APPROVAL:case W.PENDING_AUDITOR_APPROVAL:case W.PENDING_CHAIRMAN_APPROVAL:return"bg-yellow-100 text-yellow-800";case W.QUERIED:return"bg-blue-100 text-blue-800";case W.REJECTED:return"bg-red-100 text-red-800";case W.PAYMENT_PROCESSING:return"bg-indigo-100 text-indigo-800";default:return"bg-slate-100 text-slate-800"}},C=["All","My Requisitions","Action Required",...Object.values(W)],x=(a==null?void 0:a.role)===pt.LAB_ADMIN||(a==null?void 0:a.role)===pt.PHARMACY_ADMIN;return T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[T.jsx("div",{className:"w-full md:w-1/2 lg:w-1/3",children:T.jsx("input",{type:"text",placeholder:"Search by ID, requester, item...",value:f,onChange:b=>p(b.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-burnt-orange-500"})}),T.jsxs("div",{className:"w-full md:w-auto flex flex-col sm:flex-row gap-4",children:[T.jsx("select",{value:l,onChange:b=>c(b.target.value),className:"w-full sm:w-auto px-4 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-burnt-orange-500",children:C.map(b=>T.jsx("option",{value:b,children:b},b))}),T.jsxs("button",{onClick:_,disabled:m,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-white text-slate-700 px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50 transition-colors disabled:bg-slate-200 disabled:cursor-wait",children:[T.jsx(pN,{className:`w-5 h-5 ${m?"animate-spin":""}`}),T.jsx("span",{children:m?"Refreshing":"Refresh"})]}),x&&T.jsxs("button",{onClick:e,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-burnt-orange-700 text-white px-4 py-2 rounded-md hover:bg-burnt-orange-800 transition-colors",children:[T.jsx(qv,{className:"w-5 h-5"}),T.jsx("span",{children:"New Requisition"})]})]})]}),T.jsx("div",{className:"bg-white shadow-sm border rounded-lg overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[T.jsx("thead",{className:"bg-slate-50",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"ID"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Requester"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Total Cost"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:E.map(b=>T.jsxs("tr",{onClick:()=>i(b),className:"hover:bg-slate-50 cursor-pointer",children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 truncate",style:{maxWidth:"100px"},children:b.id}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:b.requesterName}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:b.type.replace("_"," ")}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:T.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w(b.status)}`,children:b.status})}),T.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:["NGN ",b.total_estimated_cost.toLocaleString()]}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:new Date(b.created_at).toLocaleDateString()})]},b.id))})]})})]})},DN=({requisition:i,onBack:e,onEdit:n})=>{const{updateRequisitionStatus:o,addMessage:a,updatePurchaseOrder:l}=Ls(),{user:c}=Ps(),[f,p]=ae.useState(i.items||[]),[m,v]=ae.useState(!1),[_,E]=ae.useState(null),[w,C]=ae.useState(null);ae.useEffect(()=>{p(i.items||[])},[i]);const x=(J,z,N)=>{p(j=>j.map(ne=>ne.id===J?{...ne,[z]:N}:ne))},b=(J,z,N,j)=>{C(J==="Price & Submit to Auditor"?{action:J,logAction:z}:{action:J,logAction:z,nextStatus:N,queryTarget:j})},q=async(J,z)=>{if(w){v(!0),E(null);try{if(w.action==="Price & Submit to Auditor")await l(i.id,f,c,J);else{if(!w.nextStatus)throw new Error("Action configuration error: nextStatus is missing.");await o(i.id,w.nextStatus,c,J,z,{queryTarget:w.queryTarget,logAction:w.logAction})}E({message:"Action completed! Returning to dashboard...",type:"success"}),C(null),setTimeout(()=>{e()},1500)}catch(N){console.error("Action failed:",N);let j="An unexpected error occurred.";N.message&&N.message.includes("violates row-level security policy")?j="Permission Denied. Your role does not allow this action at the current stage.":N.message&&(j=N.message),E({message:`Action failed: ${j}`,type:"error"})}finally{v(!1)}}},B=async J=>{try{await a(i.id,J,c)}catch(z){console.error(z),E({message:"Failed to send message.",type:"error"})}},D=ae.useMemo(()=>i.type===xe.PURCHASE_ORDER&&i.status===W.PENDING_STORE_PRICING?f.reduce((J,z)=>J+z.quantity*(z.unit_price||0),0):i.total_estimated_cost,[f,i]),$=()=>{if(!c)return null;const J=i.requester_id===c.id,{role:z}=c,{status:N}=i;if(J&&(N===W.QUERIED||N===W.REJECTED))return T.jsxs("button",{onClick:()=>n(i),className:"bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 flex items-center gap-2",children:[T.jsx(yN,{className:"w-5 h-5"})," Edit & Resubmit"]});switch(z){case pt.APPROVER:const j=c.name==="Chairman",ne=c.name==="Auditor";return T.jsx("div",{className:"flex flex-wrap gap-2",children:j&&[W.PENDING_CHAIRMAN_REVIEW,W.PENDING_FINAL_APPROVAL,W.PENDING_CHAIRMAN_APPROVAL].includes(N)||ne&&[W.PENDING_AUDITOR_REVIEW,W.PENDING_AUDITOR_APPROVAL].includes(N)||N===W.PENDING_APPROVAL?T.jsxs(T.Fragment,{children:[T.jsxs("button",{onClick:()=>b("Approve","Approved",N===W.PENDING_CHAIRMAN_REVIEW?W.PENDING_STORE_PRICING:N===W.PENDING_AUDITOR_REVIEW?W.PENDING_FINAL_APPROVAL:N===W.PENDING_FINAL_APPROVAL?W.PO_COMPLETED:N===W.PENDING_AUDITOR_APPROVAL?W.PENDING_CHAIRMAN_APPROVAL:N===W.PENDING_CHAIRMAN_APPROVAL?W.HISTOLOGY_APPROVED:W.APPROVED),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center gap-2",children:[T.jsx(kc,{className:"w-5 h-5"})," Approve"]}),T.jsxs("button",{onClick:()=>b("Query","Queried",W.QUERIED,i.department),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2",children:[T.jsx(hy,{className:"w-5 h-5"})," Query"]}),T.jsxs("button",{onClick:()=>b("Reject","Rejected",W.REJECTED),className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 flex items-center gap-2",children:[T.jsx(Ra,{className:"w-5 h-5"})," Reject"]})]}):null});case pt.PHARMACY_ADMIN:return N===W.PENDING_STORE_PRICING?T.jsx("button",{onClick:()=>b("Price & Submit to Auditor","Priced"),className:"bg-burnt-orange-700 text-white px-4 py-2 rounded-md hover:bg-burnt-orange-800",children:"Price & Submit to Auditor"}):null;case pt.ACCOUNTS:return[W.APPROVED,W.PO_COMPLETED,W.HISTOLOGY_APPROVED,W.PAYMENT_PROCESSING].includes(N)?T.jsxs("div",{className:"text-green-700 font-semibold flex items-center gap-2",children:[T.jsx(py,{className:"w-5 h-5"})," Ready for payment processing."]}):null;default:return null}},X=({logs:J})=>{const z=N=>{switch(N){case"Submitted":case"Resubmitted":return T.jsx(qv,{className:"w-5 h-5 text-blue-500"});case"Approved":case"Reviewed":case"Priced":case"Marked as Paid":return T.jsx(kc,{className:"w-5 h-5 text-green-500"});case"Queried":return T.jsx(hy,{className:"w-5 h-5 text-yellow-500"});case"Rejected":return T.jsx(Ra,{className:"w-5 h-5 text-red-500"});case"Payment Added":return T.jsx(py,{className:"w-5 h-5 text-indigo-500"});default:return T.jsx(Gv,{className:"w-5 h-5 text-slate-500"})}};return T.jsx("div",{className:"flow-root",children:T.jsx("ul",{className:"-mb-8",children:J.sort((N,j)=>new Date(N.timestamp).getTime()-new Date(j.timestamp).getTime()).map((N,j)=>T.jsx("li",{children:T.jsxs("div",{className:"relative pb-8",children:[j!==J.length-1?T.jsx("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-slate-200","aria-hidden":"true"}):null,T.jsxs("div",{className:"relative flex space-x-3",children:[T.jsx("div",{children:T.jsx("span",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center ring-8 ring-white",children:z(N.action)})}),T.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[T.jsxs("div",{children:[T.jsxs("p",{className:"text-sm text-slate-600",children:[T.jsx("span",{className:"font-medium text-slate-900",children:N.userName||"System"})," ",N.action.toLowerCase()," the requisition."]}),N.comment&&T.jsxs("p",{className:"text-sm text-slate-500 mt-1 italic",children:['"',N.comment,'"']})]}),T.jsx("div",{className:"text-right text-sm whitespace-nowrap text-slate-500",children:T.jsx("time",{dateTime:N.timestamp,children:new Date(N.timestamp).toLocaleString()})})]})]})]})},N.id))})})},ee=()=>{const J=(c==null?void 0:c.role)===pt.PHARMACY_ADMIN&&i.status===W.PENDING_STORE_PRICING;return i.type===xe.HISTOLOGY_PAYMENT?T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[T.jsx("thead",{className:"bg-slate-50",children:T.jsx("tr",{children:["Date","Patient Name","Hosp. No","Lab. No","Receipt/HMO","Service","Outsource Bills","ZMC Charge","Retainership"].map(z=>T.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:z},z))})}),T.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:(i.histologyItems||[]).map(z=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:new Date(z.date).toLocaleDateString()}),T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.patient_name}),T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.hospital_no}),T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.lab_no}),T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.receipt_no}),T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.outsource_service}),T.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:["NGN ",z.outsource_bills.toLocaleString()]}),T.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:["NGN ",z.zmc_charge.toLocaleString()]}),T.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:z.retainership})]},z.id))})]})}):T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[T.jsx("thead",{className:"bg-slate-50",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Item Name"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Description"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Supplier"}),i.type===xe.PURCHASE_ORDER&&T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Stock Level"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Quantity"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:J?"Unit Price":"Est. Unit Cost"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Total Cost"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:(J?f:i.items||[]).map(z=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:z.name}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:z.description}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:z.supplier}),i.type===xe.PURCHASE_ORDER&&T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:z.stock_level}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:z.quantity}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:J?T.jsx("input",{type:"number",value:z.unit_price||"",onChange:N=>x(z.id,"unit_price",parseFloat(N.target.value)),className:"w-24 p-1 border rounded"}):`NGN ${(z.unit_price||z.estimated_unit_cost||0).toLocaleString()}`}),T.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["NGN ",(z.quantity*((J?z.unit_price:z.unit_price||z.estimated_unit_cost)||0)).toLocaleString()]})]},z.id))})]})})};return T.jsxs("div",{className:"space-y-6",children:[_&&T.jsx(Vv,{message:_.message,type:_.type,onClose:()=>E(null)}),T.jsx(RN,{isOpen:!!w,onClose:()=>{C(null),v(!1)},onSign:q,action:(w==null?void 0:w.action)||"",isSubmitting:m}),T.jsx("div",{children:T.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-slate-800",children:[T.jsx(Bv,{className:"w-5 h-5"}),"Back to List"]})}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4 mb-6 pb-6 border-b",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:i.type.replace("_"," ")}),T.jsxs("p",{className:"text-sm text-slate-500",children:["ID: ",i.id]})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsx($,{}),T.jsxs("button",{onClick:()=>AN(i),className:"bg-slate-600 text-white px-4 py-2 rounded-md hover:bg-slate-700 flex items-center gap-2",children:[T.jsx(gN,{className:"w-5 h-5"})," Download PDF"]})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[T.jsxs("div",{children:[T.jsx("span",{className:"font-semibold",children:"Requester:"})," ",i.requesterName]}),T.jsxs("div",{children:[T.jsx("span",{className:"font-semibold",children:"Department:"})," ",i.department]}),T.jsxs("div",{children:[T.jsx("span",{className:"font-semibold",children:"Status:"})," ",T.jsx("span",{className:"font-bold text-blue-700",children:i.status})]}),T.jsxs("div",{children:[T.jsx("span",{className:"font-semibold",children:"Created:"})," ",new Date(i.created_at).toLocaleString()]}),T.jsxs("div",{children:[T.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",new Date(i.updated_at).toLocaleString()]}),T.jsxs("div",{className:"text-lg font-bold",children:[T.jsx("span",{className:"font-semibold",children:"Total:"})," NGN ",D.toLocaleString()]})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-800",children:"Items"}),ee()]}),[W.APPROVED,W.PO_COMPLETED,W.HISTOLOGY_APPROVED,W.PAYMENT_PROCESSING,W.PAID].includes(i.status)&&T.jsx(NN,{requisition:i,user:c,setToast:E}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[T.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[T.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-800",children:"Approval History"}),T.jsx(X,{logs:i.log||[]})]}),T.jsx(xN,{requisition:i,currentUser:c,onSendMessage:B})]})]})]})]})},my=({onBack:i,editRequisition:e})=>{const{addRequisition:n,addPurchaseOrder:o,addHistologyRequisition:a,resubmitRequisition:l,processInvoiceWithAI:c}=Ls(),{user:f}=Ps(),[p,m]=ae.useState((e==null?void 0:e.type)||xe.STANDARD),[v,_]=ae.useState([]),[E,w]=ae.useState([]),[C,x]=ae.useState({}),[b,q]=ae.useState(!1),[B,D]=ae.useState(null),[$,X]=ae.useState(!1),ee=ae.useRef(null);ae.useEffect(()=>{e?(_(e.items?JSON.parse(JSON.stringify(e.items)):[{name:"",quantity:1,description:"",supplier:"",estimated_unit_cost:0,stock_level:0,unit_price:0}]),w(e.histologyItems?JSON.parse(JSON.stringify(e.histologyItems)):[{date:new Date().toISOString().split("T")[0],patient_name:"",hospital_no:"",lab_no:"",receipt_no:"",outsource_service:"",outsource_bills:0,zmc_charge:0,retainership:""}])):(_([{name:"",quantity:1,description:"",supplier:"",estimated_unit_cost:0,stock_level:0,unit_price:0}]),w([{date:new Date().toISOString().split("T")[0],patient_name:"",hospital_no:"",lab_no:"",receipt_no:"",outsource_service:"",outsource_bills:0,zmc_charge:0,retainership:""}]))},[e]);const J=ae.useMemo(()=>(f==null?void 0:f.department)==="Pharmacy"?Object.values(xe).filter(G=>G!==xe.HISTOLOGY_PAYMENT):Object.values(xe),[f]),z=(G,Y,Z)=>{const ye=[...v];ye[G]={...ye[G],[Y]:Z},_(ye)},N=(G,Y,Z)=>{const ye=[...E];ye[G]={...ye[G],[Y]:Z},w(ye)},j=()=>{p===xe.HISTOLOGY_PAYMENT?w([...E,{date:new Date().toISOString().split("T")[0],patient_name:"",hospital_no:"",lab_no:"",receipt_no:"",outsource_service:"",outsource_bills:0,zmc_charge:0,retainership:""}]):_([...v,{name:"",quantity:1,description:"",supplier:"",estimated_unit_cost:0,stock_level:0,unit_price:0}])},ne=G=>{p===xe.HISTOLOGY_PAYMENT?w(E.filter((Y,Z)=>Z!==G)):_(v.filter((Y,Z)=>Z!==G))},te=async G=>{var Z;const Y=(Z=G.target.files)==null?void 0:Z[0];if(Y){X(!0),D(null);try{const ye=await c(Y);_(ye),m(xe.PURCHASE_ORDER),D({message:"Invoice processed successfully!",type:"success"})}catch(ye){console.error(ye),D({message:ye.message,type:"error"})}finally{X(!1),ee.current&&(ee.current.value="")}}},ce=async G=>{if(G.preventDefault(),!!f){if(!e){if(f.role===pt.LAB_ADMIN&&p===xe.PURCHASE_ORDER&&(!(C!=null&&C.preparedBy)||!C.levelConfirmedBy)){D({message:'Both "Prepared By" and "Level Confirmed By" signatures are required for Lab Purchase Orders.',type:"error"});return}if(p===xe.HISTOLOGY_PAYMENT&&!(C!=null&&C.preparedBy)){D({message:'"Prepared By" signature is required for Histology Payments.',type:"error"});return}}q(!0),D(null);try{if(e){const Y={};p===xe.HISTOLOGY_PAYMENT?Y.histologyItems=E:Y.items=v,await l(e,Y,f)}else p===xe.STANDARD?await n(v,f):p===xe.PURCHASE_ORDER?await o(v,f,C):p===xe.HISTOLOGY_PAYMENT&&await a(E,f,C);D({message:`Requisition ${e?"resubmitted":"created"} successfully!`,type:"success"}),setTimeout(i,1500)}catch(Y){console.error(Y),D({message:`Failed to ${e?"resubmit":"create"} requisition: ${Y.message}`,type:"error"}),q(!1)}}},me=()=>p===xe.HISTOLOGY_PAYMENT?T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"overflow-x-auto bg-slate-50 p-2 rounded-lg",children:T.jsxs("div",{className:"min-w-max",children:[T.jsxs("div",{className:"grid grid-cols-10 gap-2 font-semibold text-xs text-slate-600 px-2 pb-2 border-b",children:[T.jsx("div",{className:"col-span-1",children:"Date"}),T.jsx("div",{className:"col-span-2",children:"Patient Name"}),T.jsx("div",{className:"col-span-1",children:"Hosp. No"}),T.jsx("div",{className:"col-span-1",children:"Lab. No"}),T.jsx("div",{className:"col-span-1",children:"Receipt/HMO"}),T.jsx("div",{className:"col-span-1",children:"Service"}),T.jsx("div",{className:"col-span-1",children:"Outsource Bills"}),T.jsx("div",{className:"col-span-1",children:"ZMC Charge"}),T.jsx("div",{className:"col-span-1",children:"Retainership"})]}),E.map((G,Y)=>T.jsxs("div",{className:"grid grid-cols-10 gap-2 items-center mt-2 px-2",children:[T.jsx("input",{type:"date",value:G.date,onChange:Z=>N(Y,"date",Z.target.value),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{placeholder:"Name",value:G.patient_name,onChange:Z=>N(Y,"patient_name",Z.target.value),className:"col-span-2 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{placeholder:"Hosp. No",value:G.hospital_no,onChange:Z=>N(Y,"hospital_no",Z.target.value),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{placeholder:"Lab. No",value:G.lab_no,onChange:Z=>N(Y,"lab_no",Z.target.value),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{placeholder:"Receipt",value:G.receipt_no,onChange:Z=>N(Y,"receipt_no",Z.target.value),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{placeholder:"Service",value:G.outsource_service,onChange:Z=>N(Y,"outsource_service",Z.target.value),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{type:"number",placeholder:"Bills",value:G.outsource_bills,onChange:Z=>N(Y,"outsource_bills",parseFloat(Z.target.value)),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{type:"number",placeholder:"Charge",value:G.zmc_charge,onChange:Z=>N(Y,"zmc_charge",parseFloat(Z.target.value)),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),T.jsx("input",{placeholder:"Retainership",value:G.retainership,onChange:Z=>N(Y,"retainership",Z.target.value),className:"col-span-1 w-full border-slate-300 rounded-md shadow-sm text-sm p-1"}),E.length>1&&T.jsx("button",{type:"button",onClick:()=>ne(Y),className:"text-red-500 hover:text-red-700 -ml-2",children:T.jsx(Ra,{className:"w-5 h-5"})})]},Y))]})}),T.jsx("button",{type:"button",onClick:j,className:"text-sm font-semibold text-burnt-orange-700 hover:underline",children:"Add another item"})]}):T.jsxs("div",{className:"space-y-4",children:[v.map((G,Y)=>T.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg grid grid-cols-1 md:grid-cols-12 gap-4 items-end relative",children:[T.jsxs("div",{className:"col-span-12 md:col-span-3",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Item Name"}),T.jsx("input",{type:"text",placeholder:"e.g. Paracetamol",required:!0,value:G.name,onChange:Z=>z(Y,"name",Z.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]}),T.jsxs("div",{className:"col-span-12 md:col-span-5",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Description"}),T.jsx("input",{type:"text",placeholder:"e.g. 500mg, 10 strips",value:G.description,onChange:Z=>z(Y,"description",Z.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]}),T.jsxs("div",{className:"col-span-6 md:col-span-2",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Quantity"}),T.jsx("input",{type:"number",min:"1",required:!0,value:G.quantity,onChange:Z=>z(Y,"quantity",parseInt(Z.target.value,10)),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]}),p===xe.PURCHASE_ORDER&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"col-span-6 md:col-span-2",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Stock Level"}),T.jsx("input",{type:"number",value:G.stock_level,onChange:Z=>z(Y,"stock_level",parseInt(Z.target.value,10)),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]}),T.jsxs("div",{className:"col-span-12 md:col-span-4",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Supplier"}),T.jsx("input",{type:"text",placeholder:"e.g. Zolon",value:G.supplier,onChange:Z=>z(Y,"supplier",Z.target.value),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]}),(f==null?void 0:f.department)==="Pharmacy"&&T.jsxs("div",{className:"col-span-6 md:col-span-3",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Unit Price"}),T.jsx("input",{type:"number",placeholder:"Price from store",value:G.unit_price,onChange:Z=>z(Y,"unit_price",parseFloat(Z.target.value)),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]})]}),p===xe.STANDARD&&T.jsxs("div",{className:"col-span-6 md:col-span-2",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Est. Cost"}),T.jsx("input",{type:"number",value:G.estimated_unit_cost,onChange:Z=>z(Y,"estimated_unit_cost",parseFloat(Z.target.value)),className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-burnt-orange-500 focus:ring-burnt-orange-500"})]}),v.length>1&&T.jsx("div",{className:"col-span-12 md:col-span-1 flex items-end justify-end",children:T.jsx("button",{type:"button",onClick:()=>ne(Y),className:"text-red-500 hover:text-red-700",children:T.jsx(Ra,{className:"w-6 h-6"})})})]},Y)),T.jsx("button",{type:"button",onClick:j,className:"text-sm font-semibold text-burnt-orange-700 hover:underline",children:"Add another item"})]}),de=(G,Y)=>{x(Z=>({...Z,[G]:{name:f.name,signature:Y,timestamp:new Date().toISOString()}}))},U=()=>{const G=p===xe.PURCHASE_ORDER||p===xe.HISTOLOGY_PAYMENT,Y=p===xe.PURCHASE_ORDER&&(f==null?void 0:f.role)===pt.LAB_ADMIN;return!G&&!Y?null:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border mt-6",children:[T.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Signatures"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[G&&T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prepared By"}),C!=null&&C.preparedBy?T.jsxs("div",{className:"border p-2 rounded-md bg-slate-50",children:[T.jsx("img",{src:C.preparedBy.signature,alt:"Signature",className:"h-16 w-auto"}),T.jsxs("p",{className:"text-sm mt-1",children:[C.preparedBy.name," @ ",new Date(C.preparedBy.timestamp).toLocaleTimeString()]})]}):T.jsx(qc,{onSave:Z=>de("preparedBy",Z),onClear:()=>x(Z=>({...Z,preparedBy:void 0}))})]}),Y&&T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Level Confirmed By"}),C!=null&&C.levelConfirmedBy?T.jsxs("div",{className:"border p-2 rounded-md bg-slate-50",children:[T.jsx("img",{src:C.levelConfirmedBy.signature,alt:"Signature",className:"h-16 w-auto"}),T.jsxs("p",{className:"text-sm mt-1",children:[C.levelConfirmedBy.name," @ ",new Date(C.levelConfirmedBy.timestamp).toLocaleTimeString()]})]}):T.jsx(qc,{onSave:Z=>de("levelConfirmedBy",Z),onClear:()=>x(Z=>({...Z,levelConfirmedBy:void 0}))})]})]})]})};return T.jsxs("div",{className:"space-y-6",children:[B&&T.jsx(Vv,{message:B.message,type:B.type,onClose:()=>D(null)}),T.jsx("div",{children:T.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-slate-800",children:[T.jsx(Bv,{className:"w-5 h-5"}),"Back to List"]})}),T.jsxs("form",{onSubmit:ce,children:[T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6 pb-6 border-b",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:e?`Edit Requisition #${e.id.substring(0,8)}`:"Create New Requisition"}),T.jsxs("p",{className:"text-slate-500",children:["Logged in as ",f==null?void 0:f.name," (",f==null?void 0:f.role,")"]})]}),p===xe.PURCHASE_ORDER&&!e&&T.jsxs("div",{children:[T.jsx("input",{type:"file",ref:ee,onChange:te,accept:"image/*,application/pdf",className:"hidden"}),T.jsxs("button",{type:"button",onClick:()=>{var G;return(G=ee.current)==null?void 0:G.click()},disabled:$,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 disabled:bg-slate-400",children:[T.jsx(mN,{className:"w-5 h-5"}),$?"Analyzing...":"Upload Invoice (AI)"]})]})]}),!e&&T.jsxs("div",{className:"mb-6",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Requisition Type"}),T.jsx("div",{className:"flex flex-wrap gap-4",children:J.map(G=>T.jsx("button",{type:"button",onClick:()=>m(G),className:`px-4 py-2 rounded-full text-sm font-semibold border ${p===G?"bg-burnt-orange-700 text-white border-burnt-orange-700":"bg-white text-slate-700 hover:bg-slate-50"}`,children:G.replace("_"," ")},G))})]}),me()]}),!e&&U(),T.jsx("div",{className:"mt-6 flex justify-end",children:T.jsx("button",{type:"submit",disabled:b,className:"bg-burnt-orange-700 text-white px-6 py-3 rounded-md hover:bg-burnt-orange-800 transition-colors disabled:bg-slate-400",children:b?"Submitting...":e?"Resubmit Requisition":"Submit Requisition"})})]})]})},PN=()=>{const{user:i,logout:e}=Ps(),{requisitions:n,markNotificationAsRead:o}=Ls(),[a,l]=ae.useState("list"),[c,f]=ae.useState(null),p=C=>{f(C),l("detail")},m=C=>{const x=n.find(b=>b.id===C.requisition_id);x&&p(x),o(C.id)},v=()=>{f(null),l("create")},_=C=>{f(C),l("create")},E=()=>{f(null),l("list")},w=()=>{switch(a){case"create":return T.jsx(my,{onBack:E,editRequisition:c});case"edit":return T.jsx(my,{onBack:E,editRequisition:c});case"detail":return c&&T.jsx(DN,{requisition:c,onBack:E,onEdit:_});case"list":default:const C=(i==null?void 0:i.role)===pt.ACCOUNTS||(i==null?void 0:i.role)===pt.APPROVER&&(i.name==="Chairman"||i.name==="Auditor");return T.jsxs("div",{className:"space-y-6",children:[C&&T.jsx(IN,{requisitions:n}),T.jsx(MN,{onSelect:p,onCreate:v})]})}};return i?T.jsxs("div",{className:"bg-cream-50 min-h-screen",children:[T.jsx(bN,{user:i,onLogout:e,onSelectNotification:m}),T.jsx("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:w()})]}):T.jsx("div",{children:"Loading user..."})},UN=()=>{const{user:i,login:e}=Ps();return i?T.jsx(hN,{children:T.jsx(PN,{})}):T.jsx(_N,{onLogin:e})};function ON(){return T.jsx(WT,{children:T.jsx(UN,{})})}const zv=document.getElementById("root");if(!zv)throw new Error("Could not find root element to mount to");const kN=xE.createRoot(zv);kN.render(T.jsx(EE.StrictMode,{children:T.jsx(ON,{})}));
